<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Kelin&#39;s blog</title>
  
  
  <link href="http://example.com/atom.xml" rel="self"/>
  
  <link href="http://example.com/"/>
  <updated>2024-03-31T08:43:45.368Z</updated>
  <id>http://example.com/</id>
  
  <author>
    <name>kelin</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>API-architecture</title>
    <link href="http://example.com/2024/03/31/API-architecture/"/>
    <id>http://example.com/2024/03/31/API-architecture/</id>
    <published>2024-03-31T07:39:41.000Z</published>
    <updated>2024-03-31T08:43:45.368Z</updated>
    
    <content type="html"><![CDATA[<p>å‚è€ƒè§†é¢‘ï¼š<a href="https://www.youtube.com/watch?v=4vLxWqE94l4">Top 6 Most Popular API Architecture Styles</a></p><h2 id="API"><a href="#API" class="headerlink" title="API"></a>API</h2><p>APIï¼ˆApplication Programming Interfaceï¼‰æ˜¯ä¸€ç»„å®šä¹‰äº†è½¯ä»¶åº”ç”¨ç¨‹åºä¹‹é—´å¦‚ä½•äº’ç›¸é€šä¿¡çš„è§„åˆ™çš„æ¥å£ã€‚APIå¯ä»¥è®©ä¸åŒçš„è½¯ä»¶åº”ç”¨ç¨‹åºä¹‹é—´å…±äº«æ•°æ®å’ŒåŠŸèƒ½ï¼Œä»è€Œæé«˜å¼€å‘æ•ˆç‡ã€‚</p><p>ä¸»è¦æ˜¯ç”¨äºä¸åŒç³»ç»Ÿä¹‹é—´çš„é€šä¿¡ï¼Œæ¯”å¦‚å‰ç«¯å’Œåç«¯ä¹‹é—´çš„é€šä¿¡ã€‚</p><p>å¦‚æœæ²¡æœ‰å®šä¹‰APIï¼Œé‚£ä¹ˆä¸åŒçš„ç³»ç»Ÿä¹‹é—´å°±æ— æ³•é€šä¿¡ã€‚</p><h3 id="å¸¸ç”¨APIæ¶æ„é£æ ¼"><a href="#å¸¸ç”¨APIæ¶æ„é£æ ¼" class="headerlink" title="å¸¸ç”¨APIæ¶æ„é£æ ¼"></a>å¸¸ç”¨APIæ¶æ„é£æ ¼</h3><p><img src="/../imgs/image-47.png"></p><h3 id="Highlights"><a href="#Highlights" class="headerlink" title="Highlights"></a>Highlights</h3><ul><li>ğŸ“œ SOAPæ˜¯ä¸€ç§æˆç†Ÿã€å…¨é¢ä¸”åŸºäºXMLçš„APIæ¶æ„é£æ ¼ï¼Œå°¤å…¶é€‚ç”¨äºé‡‘èæœåŠ¡å’Œæ”¯ä»˜ç½‘å…³ç­‰éœ€è¦å®‰å…¨æ€§å’Œå¯é æ€§çš„åœºæ™¯ã€‚</li><li>ğŸŒ RESTful APIsæ˜¯Internetçš„éª¨å¹²ï¼Œæ˜“äºå®ç°ï¼Œä½¿ç”¨HTTPæ–¹æ³•ï¼Œé€‚ç”¨äºå¤§å¤šæ•°æ—¥å¸¸äº¤äº’çš„ç½‘ç»œæœåŠ¡ã€‚</li><li>ğŸ“Š GraphQLä¸ä»…æ˜¯ä¸€ç§æ¶æ„é£æ ¼ï¼Œè¿˜æ˜¯ä¸€ç§æŸ¥è¯¢è¯­è¨€ï¼Œèƒ½å¤Ÿé«˜æ•ˆåœ°æä¾›ç²¾ç¡®çš„æ•°æ®ï¼Œå°¤å…¶é€‚ç”¨äºå¤æ‚æ•°æ®éœ€æ±‚çš„åº”ç”¨ç¨‹åºã€‚</li><li>ğŸ’» gRPCæ˜¯ç°ä»£é«˜æ€§èƒ½çš„APIæ¶æ„é£æ ¼ï¼Œé€‚ç”¨äºå¾®æœåŠ¡æ¶æ„ï¼Œä½†åœ¨å¤„ç†æµè§ˆå™¨å®¢æˆ·ç«¯æ—¶å¯èƒ½å­˜åœ¨ä¸€äº›æŒ‘æˆ˜ã€‚</li><li>ğŸ”„ WebSocketæ˜¯å®æ—¶ã€åŒå‘ä¸”æŒä¹…è¿æ¥çš„APIæ¶æ„é£æ ¼ï¼Œé€‚ç”¨äºå®æ—¶èŠå¤©å’Œå®æ—¶æ¸¸æˆç­‰åœºæ™¯ã€‚</li><li>ğŸ£ Webhookæ˜¯åŸºäºäº‹ä»¶é©±åŠ¨çš„APIæ¶æ„é£æ ¼ï¼Œé€‚ç”¨äºå¼‚æ­¥æ“ä½œï¼Œä½†ä¸é€‚åˆéœ€è¦åŒæ­¥é€šä¿¡æˆ–ç«‹å³å“åº”çš„åœºæ™¯ã€‚</li></ul><h3 id="restful-API"><a href="#restful-API" class="headerlink" title="restful API"></a>restful API</h3><p>Githubçš„APIè®¾è®¡è§„èŒƒå­¦ä¹ ï¼š<a href="https://docs.github.com/en/rest/using-the-rest-api/getting-started-with-the-rest-api?apiVersion=2022-11-28">Github API</a></p><h4 id="restæ¶æ„ç‰¹å¾"><a href="#restæ¶æ„ç‰¹å¾" class="headerlink" title="restæ¶æ„ç‰¹å¾"></a>restæ¶æ„ç‰¹å¾</h4><ul><li>ä»¥èµ„æºä¸ºåŸºç¡€ï¼šèµ„æºå¯ä»¥æ˜¯ä¸€ä¸ªå›¾ç‰‡ã€éŸ³ä¹ã€ä¸€ä¸ªXMLæ ¼å¼ã€HTMLæ ¼å¼æˆ–è€…JSONæ ¼å¼ç­‰ç½‘ç»œä¸Šçš„ä¸€ä¸ªå®ä½“ï¼Œé™¤äº†ä¸€äº›äºŒè¿›åˆ¶çš„èµ„æºå¤–æ™®é€šçš„æ–‡æœ¬èµ„æºæ›´å¤šä»¥JSONä¸ºè½½ä½“ã€é¢å‘ç”¨æˆ·çš„ä¸€ç»„æ•°æ®(é€šå¸¸ä»æ•°æ®åº“ä¸­æŸ¥è¯¢è€Œå¾—åˆ°)ã€‚</li><li>ç»Ÿä¸€æ¥å£ï¼šå¯¹èµ„æºçš„æ“ä½œåŒ…æ‹¬è·å–ã€åˆ›å»ºã€ä¿®æ”¹å’Œåˆ é™¤èµ„æºï¼Œè¿™äº›æ“ä½œåˆ†åˆ«å¯¹åº”HTTPåè®®ä¸­çš„GETã€POSTã€PUTã€DELETEæ–¹æ³•ã€‚</li><li>æ— çŠ¶æ€ï¼šæ¯æ¬¡è¯·æ±‚å¿…é¡»åŒ…å«æ‰€æœ‰çš„ä¿¡æ¯ï¼ŒæœåŠ¡å™¨ä¸ä¼šä¿å­˜å®¢æˆ·ç«¯çš„çŠ¶æ€ã€‚</li><li>urlæŒ‡å‘èµ„æºï¼šä¸€ä¸ªurlå¯¹åº”ä¸€ä¸ªèµ„æºï¼Œé€šè¿‡urlè·å–èµ„æºã€‚</li></ul><h3 id="GraphQL"><a href="#GraphQL" class="headerlink" title="GraphQL"></a>GraphQL</h3><p>å‚è€ƒå­¦ä¹ ï¼š<a href="https://juejin.cn/post/6844903475420069902">GraphQL</a></p><h3 id="RPC"><a href="#RPC" class="headerlink" title="RPC"></a>RPC</h3><p>RPCï¼ˆRemote Procedure Callï¼‰æ˜¯ä¸€ç§åè®®ï¼Œç”¨äºåœ¨ä¸åŒçš„è¿›ç¨‹ä¹‹é—´ä¼ é€’æ•°æ®ã€‚RPCåè®®å…è®¸ä¸€ä¸ªç¨‹åºè°ƒç”¨å¦ä¸€ä¸ªç¨‹åºçš„å­ç¨‹åºï¼Œè€Œä¸éœ€è¦äº†è§£åº•å±‚ç½‘ç»œç»†èŠ‚ã€‚</p><p><strong>rpcæ˜¯ä¸€ç§æ€æƒ³ï¼Œå¹¿ä¹‰çš„rpcæ˜¯åŒ…å«httpçš„ã€‚</strong></p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;å‚è€ƒè§†é¢‘ï¼š&lt;a href=&quot;https://www.youtube.com/watch?v=4vLxWqE94l4&quot;&gt;Top 6 Most Popular API Architecture Styles&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&quot;API&quot;&gt;&lt;a href=&quot;#API&quot;</summary>
      
    
    
    
    <category term="Frontend" scheme="http://example.com/categories/Frontend/"/>
    
    
    <category term="architecture" scheme="http://example.com/tags/architecture/"/>
    
  </entry>
  
  <entry>
    <title>input-translationå¼€å‘æ—¥å¿—ï¼ˆä¸‹ï¼‰</title>
    <link href="http://example.com/2024/03/07/input-translation%E5%BC%80%E5%8F%91%E6%97%A5%E5%BF%97%EF%BC%88%E4%B8%8B%EF%BC%89/"/>
    <id>http://example.com/2024/03/07/input-translation%E5%BC%80%E5%8F%91%E6%97%A5%E5%BF%97%EF%BC%88%E4%B8%8B%EF%BC%89/</id>
    <published>2024-03-07T07:03:28.000Z</published>
    <updated>2024-03-30T12:56:10.972Z</updated>
    
    <content type="html"><![CDATA[<h2 id="éœ€æ±‚æ•´ç†"><a href="#éœ€æ±‚æ•´ç†" class="headerlink" title="éœ€æ±‚æ•´ç†"></a>éœ€æ±‚æ•´ç†</h2><p><strong>popup.htmlï¼š</strong></p><ul><li>æ˜¯å¦å¼€å¯åˆ’è¯ç¿»è¯‘</li><li>é€‰æ‹©åˆ’è¯ç¿»è¯‘çš„é»˜è®¤ç›®æ ‡è¯­è¨€</li><li>æ˜¯å¦å¼€å¯è¾“å…¥ç¿»è¯‘</li><li>è¾“å…¥æ¡†ç¿»è¯‘çš„ç®€ä»‹</li><li>é¡¹ç›®åœ°å€</li></ul><p><strong>popup.js</strong></p><ul><li>ä»popupç•Œé¢æ¥æ”¶ä¿¡æ¯ï¼Œå¦‚æœç”¨æˆ·æ›´æ–°è®¾ç½®ï¼Œå°±æ›´æ–°å­˜å‚¨åœ¨æµè§ˆå™¨ä¸­çš„å€¼ï¼ŒåŒæ—¶å‘é€æ¶ˆæ¯ç»™contentè„šæœ¬ï¼Œè®©å…¶ç›‘å¬</li><li>ç›‘å¬ç”¨æˆ·æ˜¯å¦ç‚¹å‡»é¡¹ç›®åœ°å€</li><li>æ¯æ¬¡ç‚¹å¼€popupç•Œé¢éƒ½é‡æ–°ä»æµè§ˆå™¨ä¸­åŠ è½½å­˜å‚¨çš„è®¾ç½®</li></ul><p><strong>content.js</strong></p><ul><li>ä»æµè§ˆå™¨ä¸­è·å–è®¾ç½®</li><li>ç›‘å¬ç”¨æˆ·çš„è¾“å…¥</li><li>ç›‘å¬ç”¨æˆ·æ˜¯å¦å¤åˆ¶æ–‡æœ¬</li><li>å°†ä¿¡æ¯å‘é€ç»™backgroundè„šæœ¬</li><li>æ˜¾ç¤ºç¿»è¯‘æ¡†</li></ul><p><strong>background.js</strong></p><ul><li>æ¥æ”¶contentè„šæœ¬å‘æ¥çš„ä¿¡æ¯</li><li>å‘é€è¯·æ±‚ç»™APIï¼ŒåŒæ—¶æ¥æ”¶åº”ç­”ä¿¡æ¯</li><li>å°†ç¿»è¯‘åçš„å†…å®¹å‘é€ç»™contentè„šæœ¬</li></ul><p>ç¿»è¯‘å±•ç¤ºæ¡†ï¼š</p><ul><li>ä¸Šæ–¹ï¼šå·¦è¾¹æ˜¾ç¤ºlogoï¼Œå³è¾¹æ˜¾ç¤ºå…³é—­æŒ‰é’®</li><li>ä¸­é—´æ˜¾ç¤ºè¯‘æ–‡</li><li>å½“ç”¨æˆ·ç‚¹å‡»åˆ«çš„åœ°æ–¹æ—¶å…³é—­ç¿»è¯‘æ¡†ï¼ŒåŒæ—¶å–æ¶ˆé€‰ä¸­</li></ul><h2 id="å…·ä½“å®ç°"><a href="#å…·ä½“å®ç°" class="headerlink" title="å…·ä½“å®ç°"></a>å…·ä½“å®ç°</h2><h3 id="popup"><a href="#popup" class="headerlink" title="popup"></a>popup</h3><p>åœ¨ä¸Šä¸€ç¯‡æœ‰å†™è¿‡popupè„šæœ¬æ”¯æŒè·¨åŸŸï¼Œæ‰€ä»¥æˆ‘æœ€åˆçš„æƒ³æ³•æ˜¯ï¼Œåœ¨åˆ’è¯ç¿»è¯‘è¿™ä¸ªåŠŸèƒ½ä¸­ï¼Œcontentè„šæœ¬åªè´Ÿè´£å‘é€ã€æ¥æ”¶ä¿¡æ¯ï¼Œå¹¶ä¸”å°†ä¿¡æ¯æ˜¾ç¤ºå‡ºæ¥ï¼Œè€Œå‘ç™¾åº¦ç¿»è¯‘å‘é€è¯·æ±‚ç”±popupè„šæœ¬å®Œæˆã€‚</p><p>ä½†æ˜¯<strong>popup è„šæœ¬ï¼ˆpopup.jsï¼‰åªåœ¨ç”¨æˆ·ç‚¹å‡»æ‰©å±•å›¾æ ‡å¹¶æ‰“å¼€ popup é¡µé¢æ—¶æ‰ä¼šè¿è¡Œã€‚</strong></p><p>æ‰€ä»¥æœ€ç»ˆæ”¹ä¸ºpopupè„šæœ¬åªè´Ÿè´£æ¥æ”¶popupç•Œé¢çš„ä¿¡æ¯ï¼Œå¹¶ä¼ é€’ç»™contentè„šæœ¬ï¼Œä¸å¤–ç•Œçš„äº¤äº’è¿˜æ˜¯<br>ç”±backgroundè„šæœ¬å®Œæˆï¼Œè¿™æ ·å­å¢åŠ äº†ä»£ç å¤ç”¨æ€§ï¼Œä¹Ÿæ›´ç¬¦åˆé€»è¾‘ã€‚</p><p><strong>éœ€è¦ä¿å­˜ç”¨æˆ·çš„è®¾ç½®ï¼Œæ‰€ä»¥å½“ç”¨æˆ·ç‚¹å‡»æ’ä»¶æ—¶éƒ½éœ€è¦ä»storageä¸­è·å–ä¿å­˜çš„è®¾ç½®</strong></p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">window</span>.<span class="property">onload</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">chrome.<span class="property">storage</span>.<span class="property">sync</span>.<span class="title function_">get</span>([<span class="string">&#x27;autoTranslate&#x27;</span>, <span class="string">&#x27;targetLanguage&#x27;</span>, <span class="string">&#x27;inputTranslate&#x27;</span>], <span class="keyword">function</span> (<span class="params">result</span>) &#123;</span><br><span class="line"><span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;auto-translate&#x27;</span>).<span class="property">checked</span> = result.<span class="property">autoTranslate</span>;</span><br><span class="line"><span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;target-language&#x27;</span>).<span class="property">value</span> = result.<span class="property">targetLanguage</span>;</span><br><span class="line"><span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;input-translate&#x27;</span>).<span class="property">checked</span> = result.<span class="property">inputTranslate</span>;</span><br><span class="line">&#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>å½“ç”¨æˆ·æ›´æ–°è®¾ç½®æ—¶ï¼Œä¹Ÿéœ€è¦å°†è®¾ç½®ä¿å­˜ä¸‹æ¥ï¼ŒåŒæ—¶å‘ç»™contentè„šæœ¬ã€‚</strong></p><p>è¿™é‡Œä¸ºä»€ä¹ˆè¦å‘é€ç»™contentè„šæœ¬å‘¢ï¼Ÿè€Œä¸æ˜¯è¦contentè„šæœ¬è‡ªå·±å»è·å–ï¼Ÿ</p><p>è¿™é‡Œæˆ‘æ›´æƒ³ç”¨é€šçŸ¥çš„æ–¹æ³•ï¼Œè¿™æ ·å‡è®¾ç”¨æˆ·å¼€å¯æˆ–å…³é—­æŸä¸€ä¸ªåŠŸèƒ½ï¼Œcontentè„šæœ¬å¯ä»¥ç¬¬ä¸€æ—¶é—´å¾—åˆ°åé¦ˆã€‚</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">saveSettings</span>(<span class="params"></span>) &#123;</span><br><span class="line"><span class="keyword">let</span> autoTranslate = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;auto-translate&#x27;</span>).<span class="property">checked</span>;</span><br><span class="line"><span class="keyword">let</span> targetLanguage = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;target-language&#x27;</span>).<span class="property">value</span>;</span><br><span class="line"><span class="keyword">let</span> inputTranslate = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;input-translate&#x27;</span>).<span class="property">checked</span>;</span><br><span class="line">chrome.<span class="property">storage</span>.<span class="property">sync</span>.<span class="title function_">set</span>(&#123; <span class="attr">autoTranslate</span>: autoTranslate, <span class="attr">targetLanguage</span>: targetLanguage, <span class="attr">inputTranslate</span>: inputTranslate &#125;, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line"><span class="title function_">sendMessageToContent</span>(autoTranslate, targetLanguage, inputTranslate);</span><br><span class="line">&#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç”±äºæ‰©å±•ä¸æ”¯æŒç›´æ¥ä»popupç•Œé¢è·³è½¬é“¾æ¥ï¼Œæ‰€ä»¥è¦åœ¨popupè„šæœ¬å»è·³è½¬ã€‚</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;project-link&#x27;</span>).<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">chrome.<span class="property">tabs</span>.<span class="title function_">create</span>(&#123; <span class="attr">url</span>: <span class="string">&#x27;https://github.com/kelinkong/Input-Translation.git&#x27;</span> &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h3 id="content"><a href="#content" class="headerlink" title="content"></a>content</h3><p>è¿™é‡ŒçœŸçš„æ˜¯æŠ˜ç£¨æˆ‘å¥½å‡ ä¸ªå°æ—¶ï¼Œä¸»è¦æ˜¯è°ƒè¯•å¼¹å‡ºçš„ç¿»è¯‘æ¡†ã€‚</p><p>å’Œpopupä¸€æ ·ï¼Œåœ¨æ¯æ¬¡åŠ è½½ç•Œé¢æ—¶éœ€è¦ä»storageä¸­è·å–ç”¨æˆ·ä¹‹å‰çš„è®¾ç½®ã€‚</p><p>ç„¶åå°±æ˜¯ç›‘å¬ç”¨æˆ·æ˜¯å¦è¿›è¡Œé€‰ä¸­æ–‡æœ¬ã€‚è¿™é‡Œé™¤äº†è®°å½•é€‰ä¸­çš„æ–‡æœ¬ï¼Œè¿˜éœ€è¦è®°å½•é€‰ä¸­çš„ä½ç½®ï¼Œå› ä¸ºæˆ‘æƒ³è¦ç›´æ¥åœ¨é€‰ä¸­æ–‡æœ¬ä¸‹æ–¹å¼¹å‡ºç¿»è¯‘æ¡†ã€‚</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// è·å–æ–‡æœ¬</span></span><br><span class="line"><span class="keyword">var</span> selectedText = <span class="variable language_">window</span>.<span class="title function_">getSelection</span>().<span class="title function_">toString</span>();</span><br><span class="line"><span class="comment">// è·å–ä½ç½®</span></span><br><span class="line"><span class="keyword">var</span> rect = <span class="variable language_">window</span>.<span class="title function_">getSelection</span>().<span class="title function_">getRangeAt</span>(<span class="number">0</span>).<span class="title function_">getBoundingClientRect</span>();</span><br></pre></td></tr></table></figure><p>å’Œbackgroundäº¤äº’æ–¹å¼ä¸ä¸Šä¸€ç¯‡ç›¸åŒï¼Œæ­¤å¤„ä¸å†èµ˜è¿°ã€‚</p><p>æ¥æ”¶åˆ°é¥­å›æ¥çš„è¯‘æ–‡åï¼Œè¿™é‡Œå¯ä»¥ç›´æ¥è°ƒç”¨<code>panel = document.createElement(&#39;div&#39;);</code>æ¥åˆ›å»ºä¸€ä¸ªè§†å›¾ã€‚</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">panel.<span class="property">innerHTML</span> = innerHTMLContent; <span class="comment">// å¯ä»¥ä½¿ç”¨å†…åµŒhtml</span></span><br><span class="line">panel.<span class="property">style</span>.<span class="property">position</span> = <span class="string">&#x27;fixed&#x27;</span>;  <span class="comment">// å¯ä»¥ç›´æ¥è°ƒæ•´æ ·å¼</span></span><br><span class="line">panel.<span class="property">style</span>.<span class="property">top</span> = rect.<span class="property">bottom</span> + <span class="number">10</span> + <span class="string">&#x27;px&#x27;</span>;</span><br><span class="line">panel.<span class="property">style</span>.<span class="property">left</span> = rect.<span class="property">left</span> + <span class="string">&#x27;px&#x27;</span>;</span><br></pre></td></tr></table></figure><p>å…¶å®è¿™é‡Œçš„é€»è¾‘ï¼Œåº”è¯¥æ˜¯æœ‰ä¸€ä¸ªå•ç‹¬çš„HTMLæ–‡ä»¶æ¥æ§åˆ¶ç¿»è¯‘æ¡†ã€‚ä½†æ˜¯æˆ‘å¯¹å‰ç«¯å¤ªä¸äº†è§£ï¼ŒæŠ˜è…¾äº†å¥½ä¹…ä¹Ÿæ²¡æœ‰æŠ˜è…¾æˆåŠŸï¼Œåªèƒ½å°†å°±ç€å†™è¿›contentè„šæœ¬ä¸­ã€‚</p><h4 id="å¼€å¯å’Œå…³é—­åŠŸèƒ½çš„å®ç°"><a href="#å¼€å¯å’Œå…³é—­åŠŸèƒ½çš„å®ç°" class="headerlink" title="å¼€å¯å’Œå…³é—­åŠŸèƒ½çš„å®ç°"></a>å¼€å¯å’Œå…³é—­åŠŸèƒ½çš„å®ç°</h4><p>å¯¹äºè¾“å…¥ç¿»è¯‘æ¥è¯´ï¼Œ<code>if (event.target.tagName.toLowerCase() === &#39;input&#39; &amp;&amp; inputTranslate)</code>ï¼Œæ£€æµ‹åˆ°è¾“å…¥ä¸”inputTranslateä¸ºçœŸæ‰ä¼šå»åˆ†æç”¨æˆ·çš„è¾“å…¥æ˜¯å¦å«æœ‰ç›®æ ‡è¯­è¨€å‰ç¼€ã€‚</p><p>å¯¹äºåˆ’è¯ç¿»è¯‘ï¼Œå’Œè¾“å…¥ç¿»è¯‘ä¸åŒçš„æ˜¯ï¼Œè¿™é‡Œè¿˜æ¶‰åŠåˆ°å¼¹å‡ºæ¡†çš„å¼€å¯ä¸å…³é—­ã€‚</p><ul><li>å½“æ£€æµ‹åˆ°ç”¨æˆ·æ›´æ–°è®¾ç½®æ—¶ï¼Œå…ˆç§»é™¤æ‰€æœ‰çš„é¼ æ ‡ç›‘å¬ï¼Œå¦‚æœåˆ’è¯ç¿»è¯‘è¢«å¼€å¯ï¼Œåˆ™å¼€å§‹ç›‘å¬é¼ æ ‡ã€‚</li><li>å½“ç”¨æˆ·ç‚¹äº†å¼¹å‡ºæ¡†çš„å…³é—­ï¼Œæˆ–è€…ç‚¹å‡»å…¶ä»–åœ°æ–¹ï¼Œå…³é—­ç¿»è¯‘æ¡†ï¼ŒåŒæ—¶å–æ¶ˆé€‰ä¸­ã€‚</li></ul><p>è¿™é‡Œå–æ¶ˆé€‰ä¸­å…¶å®æœ‰ä¸ªå‘ã€‚ä¸€å¼€å§‹æˆ‘æ²¡æœ‰è®¾ç½®å…³é—­ç¿»è¯‘æ¡†åå–æ¶ˆé€‰ä¸­ï¼Œç»“æœå°±æ˜¯ï¼Œä¸æ–­å¼¹å‡ºç¿»è¯‘æ¡†ã€‚</p><p>å½“æˆ‘è®¾ç½®äº†å–æ¶ˆé€‰ä¸­åï¼Œæˆ‘ä¸€å¼€å§‹æ‹…å¿ƒï¼Œä¹Ÿè®¸ç”¨æˆ·é€‰ä¸­å¹¶ä¸æ˜¯æƒ³è¦ç¿»è¯‘ï¼Œè€Œæ˜¯æƒ³è¦å¤åˆ¶ã€‚æ‰€ä»¥æˆ‘åˆç»™ç”¨æˆ·åœ¨ç¿»è¯‘æ¡†ä¸‹æ·»åŠ äº†ä¸¤ä¸ªé€‰é¡¹ï¼šå¤åˆ¶åŸæ–‡å’Œå¤åˆ¶è¯‘æ–‡ã€‚ä½œä¸ºä¸€ä¸ªå‰ç«¯å°ç™½ï¼Œè°ƒè¯•ç•Œé¢çš„è¿‡ç¨‹çœŸçš„å¤ªéš¾äº†ï¼Œè¿™äº›å…ƒç´ æˆ‘æ€ä¹ˆæ‘†æ”¾éƒ½ä¸å¥½çœ‹ã€‚å¥½ä¸å®¹æ˜“è°ƒè¯•å¥½äº†ï¼Œæˆ‘çªç„¶å‘ç°å…¶å®æˆ‘ä¸éœ€è¦ç»™ç”¨æˆ·æä¾›è¿™ä¸ªåŠŸèƒ½ï¼Œå› ä¸ºå¼¹å‡ºç¿»è¯‘æ¡†å¹¶ä¸å½±å“ç”¨æˆ·çš„å¤åˆ¶ã€‚</p><p>æ‰€ä»¥æœ€ç»ˆæˆ‘æ²¡æœ‰ç»™å¤åˆ¶çš„é€‰é¡¹ã€‚</p><h3 id="è°ƒè¯•"><a href="#è°ƒè¯•" class="headerlink" title="è°ƒè¯•"></a>è°ƒè¯•</h3><p>popupè„šæœ¬â€”&gt;å³é”®ç‚¹å‡»æ’ä»¶ï¼Œé€‰æ‹©æ£€æŸ¥ï¼Œå°±å¯ä»¥æ‰“å¼€è°ƒè¯•æ§åˆ¶å°<br>contentè„šæœ¬â€”&gt;æ‰“å¼€æµè§ˆå™¨å¼€å‘è€…é¢æ¿ï¼Œå°±å¯ä»¥çœ‹åˆ°<br>backgroundè„šæœ¬â€”&gt;åœ¨æ’ä»¶ç®¡ç†ä¸­ï¼Œç‚¹å‡»æœåŠ¡å·¥ä½œè¿›ç¨‹ï¼Œå¯ä»¥æ‰“å¼€åå°çš„è°ƒè¯•æ§åˆ¶å°</p><h3 id="ç†è§£å‰ç«¯"><a href="#ç†è§£å‰ç«¯" class="headerlink" title="ç†è§£å‰ç«¯"></a>ç†è§£å‰ç«¯</h3><p>å‰ç«¯å°±ç±»ä¼¼åšIDesignè®¾è®¡ï¼Œç”±å„ç§æ¡†ç»„æˆï¼Œå¤§æ¡†å¥—å°æ¡†ï¼Œå‰åå±‚å å…³ç³»ç±»ä¼¼å›¾å±‚çš„æ¦‚å¿µã€‚æ¯ä¸€å¯¹å°–æ‹¬å·å°±æ˜¯ä¸€ä¸ªæ¡†ã€‚</p><p>é‚£ä¹ˆ<strong>å…ˆæŠŠæ‰€æœ‰çš„æ¡†æ˜¾ç¤ºå‡ºæ¥ï¼Œå°±å¯ä»¥çœ‹åˆ°å„ä¸ªé¡µé¢çš„åŒ…å«å…³ç³»</strong>ã€‚</p><p>åŒæ ·ï¼Œåœ¨å‰ç«¯è°ƒè¯•ç•Œé¢ï¼Œå¯ä»¥çœ‹åˆ°æ¯ä¸€ä¸ªæ¡†çš„ä»£ç ã€‚å¦‚æœå‘ˆç°å‡ºæ¥çš„ç”»é¢ä¸æ˜¯è‡ªå·±æƒ³è¦çš„é‚£æ ·ï¼Œå¯ä»¥å»ç•Œé¢ä¸Šè°ƒè¯•ï¼Œæ¥æŸ¥çœ‹æ˜¯å“ªä¸€å—çš„ä»£ç å‡ºç°äº†é—®é¢˜ã€‚</p><h4 id="å¦‚ä½•å»è®¾è®¡è¿™äº›æ¡†ï¼Ÿ"><a href="#å¦‚ä½•å»è®¾è®¡è¿™äº›æ¡†ï¼Ÿ" class="headerlink" title="å¦‚ä½•å»è®¾è®¡è¿™äº›æ¡†ï¼Ÿ"></a>å¦‚ä½•å»è®¾è®¡è¿™äº›æ¡†ï¼Ÿ</h4><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span> æ–°æ¡†<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;&quot;</span>&gt;</span>å±äºå“ªä¸€ç±»<span class="tag">&lt;/<span class="name">div</span>&gt;</span>  classå¯ä»¥è¢«csså’Œjsç”¨æ¥è®¿é—®å’Œæ“ä½œå…ƒç´ </span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">label</span>&gt;</span>å¯ä»¥æœ‰ä¸åŒçš„æ ‡ç­¾<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">id</span>=<span class="string">&quot;auto-translate&quot;</span> <span class="attr">checked</span>&gt;</span>å¯ä»¥äº¤äº’</span><br></pre></td></tr></table></figure><p><code>.css</code>æ–‡ä»¶å¯ä»¥å®šä¹‰æ¡†çš„å±æ€§ï¼Œæ¡†å†…å…ƒç´ çš„å‘ˆç°ã€‚æ¯”å¦‚ï¼š</p><ul><li>paddingï¼šå†…éƒ¨å…ƒç´ ä¸æ¡†çš„è·ç¦»ã€‚padding-left</li><li>marginï¼šå†…éƒ¨æ¡†ä¸å¤–éƒ¨æ¡†çš„è·ç¦»ã€‚margin-left</li></ul><h4 id="å¦‚ä½•ä¸ç”¨æˆ·äº¤äº’"><a href="#å¦‚ä½•ä¸ç”¨æˆ·äº¤äº’" class="headerlink" title="å¦‚ä½•ä¸ç”¨æˆ·äº¤äº’"></a>å¦‚ä½•ä¸ç”¨æˆ·äº¤äº’</h4><p>å½“ç”¨æˆ·æ”¹å˜å‰ç«¯ç•Œé¢æ—¶ï¼Œå‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿ</p><p>æ¯”å¦‚å½“ç”¨æˆ·ç‚¹å‡»äº†ä¸€ä¸ªå¤é€‰æ¡†ï¼Œé‚£ä¹ˆè¿™æ¡ä¿¡æ¯ä¼ åˆ°å“ªé‡Œï¼Ÿå¯¹åå°æœ‰ä»€ä¹ˆå½±å“ï¼Ÿ</p><p>è¿™äº›äº¤äº’éƒ½å¯ä»¥åœ¨jsè„šæœ¬ä¸­å®šä¹‰ã€‚å†™jsè„šæœ¬å’Œå†™å…¶ä»–çš„ç¼–ç¨‹è¯­è¨€æ›´åƒï¼Œéƒ½æ˜¯å†™ä¸€ä¸ªåˆä¸€ä¸ªçš„å‡½æ•°å»å®ç°å„ç§å„æ ·çš„åŠŸèƒ½ã€‚</p><h2 id="å°¾å£°"><a href="#å°¾å£°" class="headerlink" title="å°¾å£°"></a>å°¾å£°</h2><p>æ•´ä¸ªæ’ä»¶å¼€å‘çš„æœ‰æ•ˆå·¥ä½œæ—¶é—´å¤§æ¦‚æ˜¯4å¤©ï¼Œè¿™ä¸ªè¿‡ç¨‹AIå¸®æˆ‘å†™äº†å¤§éƒ¨ä»½ä»£ç ï¼Œæˆ‘åªæ˜¯åœ¨åŠªåŠ›debugã€‚ä¹‹å‰çš„å¼€å‘debugå°±æ˜¯æ‰“æ–­ç‚¹ï¼Œçœ‹å˜é‡ä¿¡æ¯ï¼Œè€Œåœ¨æµè§ˆå™¨ä¸Šè°ƒè¯•å°±æ˜¯ç”¨ç¬¨åŠæ³•ï¼Œåœ¨æ¯ä¸€ä¸ªå‡½æ•°å…¥å£éƒ½è¾“å‡ºæ—¥å¿—ï¼Œç„¶åå»çœ‹æ˜¯å“ªé‡Œå‡ºç°äº†é—®é¢˜ã€‚</p><p>æ•´ä¸ªè¿‡ç¨‹è€—è´¹æ—¶é—´çš„ç‚¹ï¼š</p><ul><li>å„ä¸ªè„šæœ¬ä¹‹é—´çš„é€šä¿¡</li><li>æµè§ˆå™¨API</li><li>ç•Œé¢è°ƒè¯•</li></ul><p>åœ¨ç•Œé¢è°ƒè¯•æ—¶ï¼Œé‡åˆ°äº†å‡ ä¸ªæˆ‘å®åœ¨æ˜¯è§£å†³ä¸äº†çš„bugï¼Œè¯·å¤–æ´å¸®å¿™è§£å†³çš„ã€‚æ˜“ç”¨æ€§å’ŒUIä¸ŠåŒé—¨ä»¬ä¹Ÿéƒ½ç»™è¿‡å»ºè®®ã€‚</p><p>å¦‚æœè§‰å¾—æœ‰ç”¨ï¼Œå¯ä»¥åœ¨GitHubä¸Šå¸®å¿™ç‚¹ä¸ªstarã€‚æ„Ÿè°¢ã€‚<a href="https://github.com/kelinkong/Input-Translation.git">https://github.com/kelinkong/Input-Translation.git</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;éœ€æ±‚æ•´ç†&quot;&gt;&lt;a href=&quot;#éœ€æ±‚æ•´ç†&quot; class=&quot;headerlink&quot; title=&quot;éœ€æ±‚æ•´ç†&quot;&gt;&lt;/a&gt;éœ€æ±‚æ•´ç†&lt;/h2&gt;&lt;p&gt;&lt;strong&gt;popup.htmlï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æ˜¯å¦å¼€å¯åˆ’è¯ç¿»è¯‘&lt;/li&gt;
&lt;li&gt;é€‰æ‹©</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title>input-translationå¼€å‘æ—¥å¿—ï¼ˆä¸Šï¼‰</title>
    <link href="http://example.com/2024/03/05/input-translation%E5%BC%80%E5%8F%91%E6%97%A5%E5%BF%97%EF%BC%88%E4%B8%8A%EF%BC%89/"/>
    <id>http://example.com/2024/03/05/input-translation%E5%BC%80%E5%8F%91%E6%97%A5%E5%BF%97%EF%BC%88%E4%B8%8A%EF%BC%89/</id>
    <published>2024-03-05T09:07:30.000Z</published>
    <updated>2024-03-30T12:55:52.394Z</updated>
    
    <content type="html"><![CDATA[<p><strong>æœ¬äººæ˜¯å‰ç«¯å°ç™½ï¼Œå†™è¿™ä¸ªæ•™ç¨‹åªæ˜¯ä¸ºäº†å›é¡¾ç”¨ï¼Œå¯èƒ½ä¼šæœ‰é”™è¯¯çš„ç†è§£ï¼Œè¯·å‹¿å®Œå…¨ä¿¡ä»»ã€‚</strong></p><h3 id="ç›®çš„"><a href="#ç›®çš„" class="headerlink" title="ç›®çš„"></a>ç›®çš„</h3><p>åœ¨æ£€ç´¢å†…å®¹æ—¶ï¼Œå¾ˆå¤šæ—¶å€™éœ€è¦æ£€ç´¢è‹±æ–‡å†…å®¹ï¼Œä½†æ˜¯ç°æœ‰çš„ç¿»è¯‘æ’ä»¶éƒ½éœ€è¦å…ˆå¤åˆ¶ä¸­æ–‡ç¿»è¯‘åå†å¤åˆ¶å›æœç´¢æ¡†ï¼Œè¦ä¹ˆå°±æ˜¯å°†è¾“å…¥æ¡†ç¿»è¯‘ä½œä¸ºä»˜è´¹é¡¹ç›®ï¼Œäºæ˜¯å°±æƒ³è‡ªå·±å¼€å‘ä¸€æ¬¾æ’ä»¶æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚</p><p>åŒæ—¶åœ¨æµè§ˆç½‘é¡µæ—¶éš¾å…ä¼šé‡åˆ°ä¸è®¤è¯†çš„å•è¯ï¼Œæ‰€ä»¥æƒ³èå…¥ä¸€ä¸ªåˆ’è¯ç¿»è¯‘çš„åŠŸèƒ½ï¼Œå°±ä¸éœ€è¦å†é¢å¤–å®‰è£…æ’ä»¶ã€‚</p><h3 id="åŠŸèƒ½"><a href="#åŠŸèƒ½" class="headerlink" title="åŠŸèƒ½"></a>åŠŸèƒ½</h3><ul><li>åœ¨è¾“å…¥æ¡†ä¸­è¾“å…¥æ£€ç´¢å†…å®¹åï¼ŒåŠ ä¸Šå°¾ç¼€å¯è‡ªåŠ¨ç¿»è¯‘ä¸ºå¯¹åº”è¯­è¨€ï¼Œç›®å‰æ”¯æŒ<code>/en /zh /fr /de</code><ul><li>å¦‚<code>æµ‹è¯•/en ---&gt; test</code></li></ul></li><li>åˆ’è¯ç¿»è¯‘ï¼ˆå¼€å‘ä¸­ï¼Œæš‚ä¸æ”¯æŒï¼‰</li></ul><h3 id="å¼€å‘æ•™ç¨‹"><a href="#å¼€å‘æ•™ç¨‹" class="headerlink" title="å¼€å‘æ•™ç¨‹"></a>å¼€å‘æ•™ç¨‹</h3><h4 id="åŸºäºMV3çš„é¡¹ç›®ç»“æ„"><a href="#åŸºäºMV3çš„é¡¹ç›®ç»“æ„" class="headerlink" title="åŸºäºMV3çš„é¡¹ç›®ç»“æ„"></a>åŸºäºMV3çš„é¡¹ç›®ç»“æ„</h4><figure class="highlight css"><table><tr><td class="code"><pre><span class="line">my-extension/</span><br><span class="line">â”‚</span><br><span class="line">â”œâ”€â”€ manifest<span class="selector-class">.json</span>  // é…ç½®æ–‡ä»¶</span><br><span class="line">â”‚</span><br><span class="line">â”œâ”€â”€ icons/</span><br><span class="line">â”‚   â””â”€â”€ icon16<span class="selector-class">.png</span></span><br><span class="line">â”‚</span><br><span class="line">â”œâ”€â”€ scripts/</span><br><span class="line">â”‚   â”œâ”€â”€ <span class="attribute">content</span><span class="selector-class">.js</span> // å†…å®¹è„šæœ¬ï¼Œå‘è®¿é—®çš„ç½‘é¡µæ³¨å…¥jsä»£ç çš„ä¸€ç§æ–¹å¼</span><br><span class="line">â”‚   â”œâ”€â”€ <span class="attribute">background</span><span class="selector-class">.js</span> // åå°è„šæœ¬ï¼Œå¯ä»¥è®¿é—®æµè§ˆå™¨çš„æ‰€æœ‰API</span><br><span class="line">â”‚   â””â”€â”€ popup<span class="selector-class">.js</span></span><br><span class="line">â”‚</span><br><span class="line">â”œâ”€â”€ pages/</span><br><span class="line">â””â”€â”€ â””â”€â”€ popup<span class="selector-class">.html</span> // å¼¹å‡ºçª—å£æ ·å¼</span><br></pre></td></tr></table></figure><h5 id="manifest-json"><a href="#manifest-json" class="headerlink" title="manifest.json"></a>manifest.json</h5><figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line"><span class="attr">&quot;manifest_version&quot;</span><span class="punctuation">:</span> <span class="number">3</span><span class="punctuation">,</span>  <span class="comment">// è¿™æ˜¯manifestæ–‡ä»¶çš„ç‰ˆæœ¬ï¼Œå½“å‰ç‰ˆæœ¬æ˜¯3ã€‚</span></span><br><span class="line"><span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Input Translation&quot;</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;version&quot;</span><span class="punctuation">:</span> <span class="string">&quot;1.0&quot;</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;description&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Translate text input and selected words.&quot;</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;permissions&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span>  <span class="comment">//è¿™é‡Œé…ç½®ä¸€äº›ç›¸å…³æƒé™ï¼Œå¦‚è¯¥è„šæœ¬åœ¨é‚£äº›ç½‘ç«™ä¸Šå¯ä»¥è¿è¡Œ</span></span><br><span class="line"><span class="string">&quot;*://*/*&quot;</span><span class="punctuation">,</span></span><br><span class="line"><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;action&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span> <span class="comment">// å®šä¹‰äº†æ‰©å±•çš„æµè§ˆå™¨åŠ¨ä½œï¼ŒåŒ…æ‹¬é»˜è®¤çš„å¼¹å‡ºçª—å£å’Œé»˜è®¤çš„å›¾æ ‡ã€‚</span></span><br><span class="line"><span class="attr">&quot;default_popup&quot;</span><span class="punctuation">:</span> <span class="string">&quot;popup/popup.html&quot;</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;default_icon&quot;</span><span class="punctuation">:</span> <span class="string">&quot;images/icon-16.png&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;icons&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line"><span class="attr">&quot;16&quot;</span><span class="punctuation">:</span> <span class="string">&quot;images/icon-16.png&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;background&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span>  <span class="comment">// å®šä¹‰äº†æ‰©å±•çš„åå°é¡µé¢ï¼Œè¿™é‡Œä½¿ç”¨äº†ä¸€ä¸ªæœåŠ¡å·¥ä½œçº¿ç¨‹ã€‚</span></span><br><span class="line"><span class="attr">&quot;service_worker&quot;</span><span class="punctuation">:</span> <span class="string">&quot;background.js&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;content_scripts&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span>  <span class="comment">// å®šä¹‰äº†æ‰©å±•çš„å†…å®¹è„šæœ¬ï¼ŒåŒ…æ‹¬è¦æ³¨å…¥çš„JSæ–‡ä»¶å’ŒåŒ¹é…çš„ç½‘é¡µURLã€‚</span></span><br><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line"><span class="attr">&quot;js&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span>   <span class="comment">// å¦‚æœcontent.jsè„šæœ¬è¦å¼•ç”¨å…¶ä»–è„šæœ¬ï¼Œå¯ä»¥å†™åœ¨è¿™é‡Œ</span></span><br><span class="line"><span class="string">&quot;scripts/content.js&quot;</span></span><br><span class="line"><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;matches&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line"><span class="string">&quot;&lt;all_urls&gt;&quot;</span></span><br><span class="line"><span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p><strong>å„ä¸ªè„šæœ¬çš„æƒé™ï¼š</strong></p><p><img src="/../imgs/image-46.png" alt="alt text"></p><p>åœ¨è°ƒç”¨ç™¾åº¦ç¿»è¯‘çš„APIæ—¶ï¼Œç”±äºcontentè„šæœ¬ä¸æ”¯æŒç›´æ¥è·¨åŸŸï¼Œæ‰€ä»¥è¦å…ˆå°†è¾“å…¥æ¡†çš„ä¿¡æ¯å‘é€åˆ°backgroundè„šæœ¬ï¼Œå†ç”±backgroundè„šæœ¬å‘é€ï¼Œæ‰€ä»¥è¿™é‡Œæ¶‰åŠåˆ°ä¸¤ä¸ªè„šæœ¬çš„é€šä¿¡ã€‚</p><p>è„šæœ¬é€šä¿¡çš„æ•™ç¨‹å‚è€ƒï¼š</p><p><a href="https://juejin.cn/post/6844903985711677453">backgroundã€contentã€popupçš„é€šä¿¡ - æ˜é‡‘ (juejin.cn)</a></p><h4 id="popup"><a href="#popup" class="headerlink" title="popup"></a>popup</h4><p>popupå°±æ˜¯ç‚¹å‡»æ‰©å±•å›¾æ ‡å¼¹å‡ºæ¥çš„æ¡†ï¼Œè¾“å…¥æ¡†ç¿»è¯‘è¿™ä¸ªåŠŸèƒ½å¹¶ä¸éœ€è¦è¿™ä¸ªï¼Œæ‰€ä»¥ç•™åˆ°ä¸‹ç¯‡å†å†™ã€‚</p><h4 id="content-js"><a href="#content-js" class="headerlink" title="content.js"></a>content.js</h4><p>è¿™ä¸ªè„šæœ¬çš„åŠŸèƒ½æ˜¯ï¼š</p><ul><li>ç›‘æµ‹ç”¨æˆ·è¾“å…¥æ¡†ï¼Œåˆ¤æ–­ç”¨æˆ·æ˜¯å¦è¾“å…¥äº†ç›¸å…³åç¼€ï¼Œå¦‚æœæ£€æµ‹åˆ°ç”¨æˆ·è¾“å…¥ç›¸å…³åç¼€ï¼Œå°±å°†è¾“å…¥çš„å†…å®¹å’Œåç¼€å‘é€è‡³backgroundè„šæœ¬ã€‚</li><li>æ¥æ”¶åˆ°ä¿¡æ¯åï¼Œæ›¿æ¢åŸæœ¬è¾“å…¥æ¡†ä¸­çš„å†…å®¹</li></ul><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> match = text.<span class="title function_">match</span>(<span class="regexp">/(.*)(\/en|\/zh|\/fr|\/de)$/</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (match) &#123; </span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;start to translate&quot;</span>);</span><br><span class="line"><span class="keyword">var</span> textToTranslate = match[<span class="number">1</span>]; <span class="comment">// åŒ¹é…åˆ°çš„æ–‡æœ¬ï¼Œä¸åŒ…æ‹¬è¯­è¨€ä»£ç </span></span><br><span class="line"><span class="keyword">var</span> languageCode = match[<span class="number">2</span>].<span class="title function_">slice</span>(<span class="number">1</span>); <span class="comment">// åŒ¹é…åˆ°çš„è¯­è¨€ä»£ç </span></span><br><span class="line">chrome.<span class="property">runtime</span>.<span class="title function_">sendMessage</span>(&#123; <span class="attr">text</span>: textToTranslate, <span class="attr">lang</span>: languageCode &#125;, <span class="keyword">function</span> (<span class="params">response</span>) &#123; </span><br><span class="line"><span class="keyword">if</span> (chrome.<span class="property">runtime</span>.<span class="property">lastError</span>) &#123;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">error</span>(chrome.<span class="property">runtime</span>.<span class="property">lastError</span>);</span><br><span class="line"><span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(response.<span class="property">data</span>);</span><br><span class="line">event.<span class="property">target</span>.<span class="property">value</span> = response.<span class="property">data</span>.<span class="property">trans_result</span>[<span class="number">0</span>].<span class="property">dst</span>;</span><br><span class="line">&#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™é‡Œä½¿ç”¨çš„æ˜¯<code>chrome.runtime.sendMessage</code>é€šä¿¡æ–¹å¼ï¼Œå°†è¾“å…¥çš„æ–‡æœ¬å’Œè¯­è¨€å‘é€è‡³backgroundè„šæœ¬ã€‚</p><p>å¦å¤–ï¼Œå•ç‹¬æ£€æµ‹ç”¨æˆ·è¾“å…¥æ¡†ï¼Œä¼šå¯¼è‡´ç”¨æˆ·æ­£åœ¨è¾“å…¥<code>/en</code>æ—¶ï¼Œå°±ä¼šè¢«ç¿»è¯‘ï¼Œæ­¤æ—¶å†æŒ‰anteré”®ï¼Œå°±ä¼šå¯¼è‡´ç¿»è¯‘åçš„æ–‡æœ¬å¤šä¸€ä¸ª<code>/en</code>ï¼Œå¦‚<br><code>æµ‹è¯•/en  ----&gt; test/en</code><br>è¿™å¾ˆä¸ä¼˜é›…ï¼Œæ‰€ä»¥è¿™é‡Œçš„ç›‘å¬äº‹ä»¶è®¾ç½®ä¸º<code>keyup</code>ï¼Œä¸”è®¾ç½®äº†1sçš„å»¶è¿Ÿã€‚<br><code>document.addEventListener(&#39;keyup&#39;, function (event)</code></p><h4 id="background-js"><a href="#background-js" class="headerlink" title="background.js"></a>background.js</h4><p>è¿™ä¸ªè„šæœ¬çš„åŠŸèƒ½æ˜¯ï¼šæ¥å—contentè„šæœ¬å‘æ¥çš„ä¿¡æ¯ï¼Œè°ƒç”¨ç™¾åº¦ç¿»è¯‘APIï¼Œå°†ç¿»è¯‘å®Œæˆçš„ä¿¡æ¯å‘é€ç»™contentè„šæœ¬ã€‚</p><p>å› ä¸ºç™¾åº¦ç¿»è¯‘APIæ¥å—çš„å†…å®¹éœ€è¦ä½¿ç”¨md5ç®—æ³•åŠ å¯†ï¼Œæ‰€ä»¥è¿™é‡Œè¦å¼•å…¥md5ç®—æ³•ã€‚</p><p><strong>ä½†æ˜¯åœ¨mv3ç‰ˆæœ¬ä¸­ï¼Œä¸æ”¯æŒç›´æ¥åœ¨é…ç½®æ–‡ä»¶ä¸­å¼•å…¥è„šæœ¬ï¼Œæ‰€ä»¥è¿™é‡Œè¦ä½¿ç”¨importçš„æ–¹å¼ã€‚</strong></p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">importScripts(<span class="string">&#x27;scripts/lib/md5.js&#x27;</span>);</span><br><span class="line">&#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">error</span>(e);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™é‡Œå‘é€ä¿¡æ¯å›contentè„šæœ¬æœ‰ä¸€ä¸ªé—®é¢˜è¦æ³¨æ„ï¼Œå› ä¸ºbackgroundè„šæœ¬å¯èƒ½åŒæ—¶ä¼šå’Œå¾ˆå¤šè„šæœ¬é€šä¿¡ï¼Œæ‰€ä»¥è¦ä½¿ç”¨tabçš„æ–¹å¼è¿›è¡Œé€šä¿¡ã€‚</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">chrome.<span class="property">runtime</span>.<span class="property">onMessage</span>.<span class="title function_">addListener</span>(<span class="function">(<span class="params">request, sender, sendResponse</span>) =&gt;</span> &#123;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Message received in content script:&#x27;</span>, request);</span><br><span class="line"><span class="title function_">translateText</span>(request.<span class="property">text</span>, request.<span class="property">lang</span>, <span class="function"><span class="params">data</span> =&gt;</span> &#123;</span><br><span class="line">chrome.<span class="property">tabs</span>.<span class="title function_">query</span>(&#123; <span class="attr">active</span>: <span class="literal">true</span>, <span class="attr">currentWindow</span>: <span class="literal">true</span> &#125;, <span class="keyword">function</span> (<span class="params">tabs</span>) &#123;</span><br><span class="line">chrome.<span class="property">tabs</span>.<span class="title function_">sendMessage</span>(tabs[<span class="number">0</span>].<span class="property">id</span>, &#123; <span class="attr">data</span>: data &#125;);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="title function_">sendResponse</span>(&#123; <span class="attr">data</span>: data &#125;);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h3 id="é¡¹ç›®åœ°å€"><a href="#é¡¹ç›®åœ°å€" class="headerlink" title="é¡¹ç›®åœ°å€"></a>é¡¹ç›®åœ°å€</h3><p><a href="https://github.com/kelinkong/input-translate">kelinkong&#x2F;input-translate (github.com)</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;&lt;strong&gt;æœ¬äººæ˜¯å‰ç«¯å°ç™½ï¼Œå†™è¿™ä¸ªæ•™ç¨‹åªæ˜¯ä¸ºäº†å›é¡¾ç”¨ï¼Œå¯èƒ½ä¼šæœ‰é”™è¯¯çš„ç†è§£ï¼Œè¯·å‹¿å®Œå…¨ä¿¡ä»»ã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;h3 id=&quot;ç›®çš„&quot;&gt;&lt;a href=&quot;#ç›®çš„&quot; class=&quot;headerlink&quot; title=&quot;ç›®çš„&quot;&gt;&lt;/a&gt;ç›®çš„&lt;/h3&gt;&lt;p&gt;åœ¨æ£€ç´¢å†…å®¹æ—¶ï¼Œ</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title>æ‰˜ç®¡åšå®¢æºç </title>
    <link href="http://example.com/2024/01/31/%E6%89%98%E7%AE%A1%E5%8D%9A%E5%AE%A2%E6%BA%90%E7%A0%81/"/>
    <id>http://example.com/2024/01/31/%E6%89%98%E7%AE%A1%E5%8D%9A%E5%AE%A2%E6%BA%90%E7%A0%81/</id>
    <published>2024-01-31T03:14:41.000Z</published>
    <updated>2024-03-30T03:53:01.642Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>ä½¿ç”¨hexoåœ¨GitHubéƒ¨ç½²é™æ€åšå®¢æ—¶ï¼Œä¸Šä¼ åˆ°ä»“åº“çš„æ˜¯bianryæ–‡ä»¶ï¼ˆåœ¨.deploy_gitä¸­ï¼‰ï¼Œæ— æ³•ç›´æ¥æŸ¥çœ‹æºç ã€‚è¿™é‡Œä»‹ç»ä¸€ç§æ–¹æ³•ï¼Œå°†æºç ä¹Ÿä¸Šä¼ åˆ°ä»“åº“ï¼Œæ–¹ä¾¿æŸ¥çœ‹ã€‚</p><h2 id="ä½¿ç”¨å¤šåˆ†æ”¯ç®¡ç†"><a href="#ä½¿ç”¨å¤šåˆ†æ”¯ç®¡ç†" class="headerlink" title="ä½¿ç”¨å¤šåˆ†æ”¯ç®¡ç†"></a>ä½¿ç”¨å¤šåˆ†æ”¯ç®¡ç†</h2><ol><li><p>åœ¨GitHubåˆ›å»ºä¸€ä¸ªhexoåˆ†æ”¯ï¼Œå¹¶å°†å…¶è®¾ç½®ä¸ºé»˜è®¤åˆ†æ”¯ï¼›</p></li><li><p>å°†å…¶cloneåˆ°æœ¬åœ°ï¼Œé»˜è®¤cloneçš„æ˜¯hexoåˆ†æ”¯å†…å®¹ï¼Œæ­¤æ—¶ä¼šåŒ…å«ä¸€ä¸ª.gitæ–‡ä»¶å¤¹ï¼Œè¿˜æœ‰åŸæœ¬ä»“åº“ä¸­æœ‰çš„ç¼–è¯‘åçš„æ–‡ä»¶ï¼›</p></li><li><p>å°†åŸæœ¬ä»“åº“ä¸­çš„å†…å®¹åˆ é™¤ï¼Œåªä¿ç•™.gitæ–‡ä»¶å¤¹ï¼›</p></li><li><p>å°†åŸæœ¬çš„æ–‡ä»¶é™¤äº†.deploy_gitæ–‡ä»¶å¤¹å¤åˆ¶åˆ°æœ¬åœ°ä»“åº“ä¸­ï¼›</p></li><li><p>åœ¨.gitignoreæ–‡ä»¶ä¸­æ·»åŠ </p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">.DS_Store</span><br><span class="line">Thumbs.db</span><br><span class="line">db.json</span><br><span class="line">*.log</span><br><span class="line">node_modules/</span><br><span class="line">public/</span><br><span class="line">.deploy*/</span><br></pre></td></tr></table></figure><p><strong>å¦‚æœcloneè¿‡ä¸»é¢˜æ–‡ä»¶ï¼Œéœ€è¦æŠŠä¸»é¢˜æ–‡ä»¶å¤¹ä¸­çš„.gitæ–‡ä»¶å¤¹åˆ é™¤ï¼Œå› ä¸ºä¸èƒ½åµŒå¥—clone</strong></p></li><li><p>å°†cloneçš„æ–‡ä»¶æäº¤åˆ°hexoåˆ†æ”¯ä¸­ï¼›</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">git add .</span><br><span class="line">git commit â€“m add_branch</span><br><span class="line">git push</span><br></pre></td></tr></table></figure></li></ol><p><strong>ä¹‹åç½‘ç«™æ›´æ–°åˆ°mainåˆ†æ”¯ï¼Œæºä»£ç æ›´æ–°åˆ°hexoåˆ†æ”¯ã€‚</strong></p><h2 id="è§£å†³GitHubæ— æ³•ä¸Šä¼ é—®é¢˜"><a href="#è§£å†³GitHubæ— æ³•ä¸Šä¼ é—®é¢˜" class="headerlink" title="è§£å†³GitHubæ— æ³•ä¸Šä¼ é—®é¢˜"></a>è§£å†³GitHubæ— æ³•ä¸Šä¼ é—®é¢˜</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">kex_exchange_identification: Connection closed by remote host</span><br><span class="line">Connection closed by 127.0.0.1 port 7890</span><br><span class="line">fatal: Could not <span class="built_in">read</span> from remote repository.</span><br></pre></td></tr></table></figure><ul><li>ä½¿ç”¨ä»£ç†æˆ–è€…ä¸ä½¿ç”¨éƒ½ä¼šæç¤ºè¯¥é—®é¢˜</li><li>ä¹‹å‰ä½¿ç”¨æ­£å¸¸</li></ul><p>å‚è€ƒè¿™ä¸ªé—®é¢˜ï¼š<br><a href="https://github.com/orgs/community/discussions/55269">https://github.com/orgs/community/discussions/55269</a></p><p>æœ€ç»ˆè§£å†³æ–¹æ¡ˆï¼š<br>åœ¨<code>~/.ssh/config</code>ä¸­æ·»åŠ </p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Host github.com</span><br><span class="line">  Hostname 20.200.245.248</span><br><span class="line">  Port 443</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;å‰è¨€&quot;&gt;&lt;a href=&quot;#å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;å‰è¨€&quot;&gt;&lt;/a&gt;å‰è¨€&lt;/h2&gt;&lt;p&gt;ä½¿ç”¨hexoåœ¨GitHubéƒ¨ç½²é™æ€åšå®¢æ—¶ï¼Œä¸Šä¼ åˆ°ä»“åº“çš„æ˜¯bianryæ–‡ä»¶ï¼ˆåœ¨.deploy_gitä¸­ï¼‰ï¼Œæ— æ³•ç›´æ¥æŸ¥çœ‹æºç ã€‚è¿™é‡Œä»‹ç»ä¸€ç§æ–¹æ³•ï¼Œ</summary>
      
    
    
    
    <category term="Frontend" scheme="http://example.com/categories/Frontend/"/>
    
    
    <category term="hexo" scheme="http://example.com/tags/hexo/"/>
    
  </entry>
  
  <entry>
    <title>åˆ©ç”¨hexoå’Œgithubæ­å»ºé™æ€åšå®¢</title>
    <link href="http://example.com/2023/12/05/%E6%90%AD%E5%BB%BA%E9%9D%99%E6%80%81%E5%8D%9A%E5%AE%A2/"/>
    <id>http://example.com/2023/12/05/%E6%90%AD%E5%BB%BA%E9%9D%99%E6%80%81%E5%8D%9A%E5%AE%A2/</id>
    <published>2023-12-05T04:29:14.479Z</published>
    <updated>2024-03-30T03:51:23.044Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å®‰è£…nodejs"><a href="#å®‰è£…nodejs" class="headerlink" title="å®‰è£…nodejs"></a>å®‰è£…nodejs</h2><ol><li>ä»å®˜ç½‘ä¸‹è½½å®‰è£…</li><li>ä½¿ç”¨nvm<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">nvm install node # å®‰è£…æœ€æ–°ç‰ˆæœ¬</span><br><span class="line">nvm use node # ä½¿ç”¨æœ€æ–°ç‰ˆæœ¬</span><br></pre></td></tr></table></figure></li><li>ä½¿ç”¨ curl æ–¹å¼å®‰è£…æœ€æ–°ç‰ˆæœ¬<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">curl -sL https://deb.nodesource.com/setup_current.x | sudo -E bash -</span><br><span class="line">sudo apt-get install -y nodejs</span><br></pre></td></tr></table></figure></li></ol><h2 id="è®¾ç½®hexo"><a href="#è®¾ç½®hexo" class="headerlink" title="è®¾ç½®hexo"></a>è®¾ç½®hexo</h2><ol><li>å®‰è£…<br><code>npm install -g hexo-cli</code></li><li>åˆå§‹åŒ–<br><code>hexo init &lt;folder&gt;</code></li></ol><h2 id="è®¾ç½®Github"><a href="#è®¾ç½®Github" class="headerlink" title="è®¾ç½®Github"></a>è®¾ç½®Github</h2><ol><li><p>åˆ›å»ºä¸€ä¸ªåŒåä»“åº“ã€‚ä¾‹å¦‚æˆ‘çš„GitHubåå­—æ˜¯kelinkongï¼Œæ–°å»ºä¸€ä¸ªä»“åº“<code>kelinkong.github.io</code></p></li><li><p>å°†åœ°å€è®¾ç½®åˆ°delpoy</p><p> åœ°å€æ ¼å¼: <code>git@github.com:username/username.github.io.git</code></p><p> é»˜è®¤åˆ†æ”¯: <code>main</code></p></li><li><p>éƒ¨ç½²ä¹‹å‰éœ€è¦å®‰è£…<code>npm install hexo-deployer-git --save</code></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">deploy:</span><br><span class="line">type: git</span><br><span class="line">repository: git@github.com:kelinkong/kelinkong.github.io.git</span><br><span class="line">branch: main</span><br></pre></td></tr></table></figure></li></ol><h2 id="æ›´æ¢ä¸»é¢˜"><a href="#æ›´æ¢ä¸»é¢˜" class="headerlink" title="æ›´æ¢ä¸»é¢˜"></a>æ›´æ¢ä¸»é¢˜</h2><p>æˆ‘è¿™é‡Œä½¿ç”¨çš„æ˜¯maupassantä¸»é¢˜ã€‚åœ°å€:<a href="https://github.com/tufu9441/maupassant-hexo">https://github.com/tufu9441/maupassant-hexo</a></p><p>è®¾ç½®æ­¥éª¤ï¼š</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">git clone https://github.com/tufu9441/maupassant-hexo.git themes/maupassant</span><br><span class="line">npm install hexo-renderer-pug --save</span><br><span class="line">npm install hexo-renderer-sass-next --save</span><br></pre></td></tr></table></figure><p>åœ¨é¡¹ç›®çš„_config.yamlè®¾ç½®ä¸­ï¼Œå°†themesæ”¹ä¸ºmaupassant</p><h2 id="éƒ¨ç½²å’Œé¢„è§ˆ"><a href="#éƒ¨ç½²å’Œé¢„è§ˆ" class="headerlink" title="éƒ¨ç½²å’Œé¢„è§ˆ"></a>éƒ¨ç½²å’Œé¢„è§ˆ</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">hexo c &amp;&amp; hexo g</span><br><span class="line">hexo s # æœ¬åœ°é¢„è§ˆ</span><br><span class="line">hexo d # å‘å¸ƒåˆ°github</span><br></pre></td></tr></table></figure><h2 id="hexoå¸¸ç”¨å‘½ä»¤"><a href="#hexoå¸¸ç”¨å‘½ä»¤" class="headerlink" title="hexoå¸¸ç”¨å‘½ä»¤"></a>hexoå¸¸ç”¨å‘½ä»¤</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">hexo init &lt;folder&gt; <span class="comment">#åˆå§‹åŒ–æ–‡ä»¶å¤¹</span></span><br><span class="line"></span><br><span class="line">hexo new &lt;title&gt; <span class="comment">#æ–°å»ºæ–‡ç« </span></span><br><span class="line"></span><br><span class="line">hexo server (hexo s)  <span class="comment"># å¯åŠ¨æœ¬åœ°æœåŠ¡å™¨,ç”¨äºåšå®¢é¢„è§ˆ</span></span><br><span class="line"></span><br><span class="line">hexo deploy (hexo d)  <span class="comment"># éƒ¨ç½²åšå®¢åˆ°GitHubç­‰æ‰˜ç®¡å¹³å°</span></span><br><span class="line"></span><br><span class="line">hexo clean  <span class="comment"># æ¸…é™¤ç¼“å­˜å’Œå·²ç”Ÿæˆçš„é™æ€æ–‡ä»¶</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ç»„åˆå‘½ä»¤</span></span><br><span class="line">hexo d -g <span class="comment">#ç”Ÿæˆéƒ¨ç½²</span></span><br><span class="line">hexo s -g <span class="comment">#ç”Ÿæˆé¢„è§ˆ</span></span><br><span class="line"></span><br><span class="line">hexo list &lt;<span class="built_in">type</span>&gt;   <span class="comment"># æŸ¥çœ‹æ–‡ç« åˆ—è¡¨</span></span><br><span class="line"></span><br><span class="line">hexo new page categories <span class="comment"># æ–°å»ºåˆ†ç±»</span></span><br><span class="line"></span><br><span class="line">hexo new page tags <span class="comment"># æ–°å»ºtag</span></span><br></pre></td></tr></table></figure><p>æ³¨æ„ï¼šæ¯ä¸€ä¸ªåˆ†ç±»å’Œtagéƒ½éœ€è¦å»ºç«‹å¯¹åº”çš„æ–°ç›®å½•å’Œindex.mdæ–‡ä»¶</p><p><strong>æ–‡ç« æ ‡è¯†ï¼š</strong></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">title: æ–‡ç« æ ‡é¢˜</span><br><span class="line">date: 2020-01-01 12:00:00  </span><br><span class="line">categories: åˆ†ç±»1  </span><br><span class="line">tags: [æ ‡ç­¾1, æ ‡ç­¾2]</span><br></pre></td></tr></table></figure><h2 id="é’ˆå¯¹maupassantä¸»é¢˜"><a href="#é’ˆå¯¹maupassantä¸»é¢˜" class="headerlink" title="é’ˆå¯¹maupassantä¸»é¢˜"></a>é’ˆå¯¹maupassantä¸»é¢˜</h2><ol><li>ä¿®æ”¹logoï¼šåœ¨ä¸»é¢˜çš„é…ç½®æ–‡ä»¶ä¸­ï¼Œä¿®æ”¹<code>avatar: /img/logo.jpg</code></li><li>å¦‚æœéœ€è¦è¯†åˆ«Latexæ ¼å¼çš„å…¬å¼ï¼Œåœ¨æ–‡ç« indexæ·»åŠ <code>mathjax: true  </code></li></ol><h2 id="tips"><a href="#tips" class="headerlink" title="tips"></a>tips</h2><h3 id="å¦‚ä½•åœ¨vscodeä¸­å¿«é€Ÿç²˜è´´å›¾ç‰‡åˆ°markdownæ–‡æ¡£ï¼Ÿ"><a href="#å¦‚ä½•åœ¨vscodeä¸­å¿«é€Ÿç²˜è´´å›¾ç‰‡åˆ°markdownæ–‡æ¡£ï¼Ÿ" class="headerlink" title="å¦‚ä½•åœ¨vscodeä¸­å¿«é€Ÿç²˜è´´å›¾ç‰‡åˆ°markdownæ–‡æ¡£ï¼Ÿ"></a>å¦‚ä½•åœ¨vscodeä¸­å¿«é€Ÿç²˜è´´å›¾ç‰‡åˆ°markdownæ–‡æ¡£ï¼Ÿ</h3><p>å‚è€ƒè¿æ¥: <a href="https://juejin.cn/post/7244809769794289721">https://juejin.cn/post/7244809769794289721</a></p><p>æ‰“å¼€<code>markdown.copyFiles.destination</code>è®¾ç½®ï¼Œæˆ‘è¿™é‡Œæ˜¯åœ¨<code>_posts</code>æ–‡ä»¶å¤¹ä¸‹æ–°å»ºäº†ä¸€ä¸ª<code>img</code>æ–‡ä»¶å¤¹ä¸“é—¨ç”¨æ¥å­˜å‚¨å›¾ç‰‡ã€‚å¯¹åº”è®¾ç½®å¦‚ä¸‹:<br><img src="/../imgs/image.png"><br>è¯¥é…ç½®æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œkey ä½¿ç”¨ Glob è¯­æ³•ï¼Œè¡¨ç¤ºåŒ¹é…çš„ Markdown æ–‡æ¡£ï¼›value åˆ™è¡¨ç¤ºæ‰€åŒ¹é…çš„è¿™äº› Markdown æ–‡æ¡£ï¼Œå®ƒä»¬çš„å›¾ç‰‡æ–‡ä»¶å­˜æ”¾ç›®å½•ï¼Œå¯ä»¥ä½¿ç”¨ä¸€äº›ç®€å•çš„å˜é‡ã€‚</p><h3 id="å¦‚ä½•è®¾ç½®about-me"><a href="#å¦‚ä½•è®¾ç½®about-me" class="headerlink" title="å¦‚ä½•è®¾ç½®about me"></a>å¦‚ä½•è®¾ç½®about me</h3><p><code>hexo new page about</code></p><h3 id="å¦‚ä½•è®¾ç½®rssè®¢é˜…"><a href="#å¦‚ä½•è®¾ç½®rssè®¢é˜…" class="headerlink" title="å¦‚ä½•è®¾ç½®rssè®¢é˜…"></a>å¦‚ä½•è®¾ç½®rssè®¢é˜…</h3><p><code>npm install hexo-generator-feed --save</code></p><h3 id="å›¾ç‰‡æ— æ³•æ˜¾ç¤º"><a href="#å›¾ç‰‡æ— æ³•æ˜¾ç¤º" class="headerlink" title="å›¾ç‰‡æ— æ³•æ˜¾ç¤º"></a>å›¾ç‰‡æ— æ³•æ˜¾ç¤º</h3><p>åœ¨vscodeä¸­é¢„è§ˆæ˜¯æœ‰å›¾ç‰‡çš„ï¼Œç”Ÿæˆå’Œå‘å¸ƒä¹‹åæ— æ³•æ˜¾ç¤ºå›¾ç‰‡ã€‚<br><img src="/../imgs/image-4.png"></p><p>å› ä¸ºåœ¨æºæ–‡ä»¶çš„ post ç›®å½•ä¸‹æ–°å»ºäº† img å­ç›®å½•,ç„¶ååœ¨ markdown ä¸­ä½¿ç”¨ç›¸å¯¹è·¯å¾„å¼•ç”¨å›¾ç‰‡ã€‚</p><p>è¿™åœ¨æœ¬åœ°é¢„è§ˆæ—¶å¯ä»¥æ­£å¸¸æ˜¾ç¤º,ä½†æ˜¯éƒ¨ç½²åä¼šå‡ºé”™ã€‚</p><p>å› ä¸º Hexo åœ¨ç”Ÿæˆæ—¶,ä¼šå°† post ä¸­çš„ markdown å’Œèµ„æºæ–‡ä»¶ä¸€èµ·å¤åˆ¶åˆ° public ç›®å½•,ç›¸å¯¹ä½ç½®ä¸å˜ã€‚</p><p>ä½†æ˜¯ img å­ç›®å½•ä¸ä¼šè‡ªåŠ¨å¤åˆ¶è¿‡å»ã€‚æ‰€ä»¥ public ä¸­æ‰¾ä¸åˆ° img ä¸­çš„å›¾ç‰‡,å¯¼è‡´æ— æ³•æ˜¾ç¤ºã€‚</p><p><strong>è§£å†³æ–¹æ³•ï¼š</strong> å°†imgé‡å‘½åä¸ºimgs(å› ä¸ºä¼šå’Œä¸»é¢˜çš„imgæ–‡ä»¶å¤¹å‘½åå†²çª)ï¼Œç„¶åå°†æ–‡ä»¶å¤¹ç§»åŠ¨åˆ°<code>source</code>ç›®å½•ä¸‹ï¼Œè€Œä¸æ˜¯æ”¾åœ¨<code>_posts</code>ç›®å½•ä¸‹ï¼Œæ³¨æ„ç²˜è´´çš„è®¾ç½®ä¹Ÿéœ€è¦ä¿®æ”¹ä¸ºimgsã€‚</p><p><img src="/../imgs/image-6.png"></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;å®‰è£…nodejs&quot;&gt;&lt;a href=&quot;#å®‰è£…nodejs&quot; class=&quot;headerlink&quot; title=&quot;å®‰è£…nodejs&quot;&gt;&lt;/a&gt;å®‰è£…nodejs&lt;/h2&gt;&lt;ol&gt;
&lt;li&gt;ä»å®˜ç½‘ä¸‹è½½å®‰è£…&lt;/li&gt;
&lt;li&gt;ä½¿ç”¨nvm&lt;figure class=&quot;hig</summary>
      
    
    
    
    <category term="Frontend" scheme="http://example.com/categories/Frontend/"/>
    
    
    <category term="hexo" scheme="http://example.com/tags/hexo/"/>
    
  </entry>
  
  <entry>
    <title>å‰ç«¯åŸºç¡€å­¦ä¹ </title>
    <link href="http://example.com/2023/10/18/%E5%89%8D%E7%AB%AF%E5%9F%BA%E7%A1%80%E5%AD%A6%E4%B9%A0/"/>
    <id>http://example.com/2023/10/18/%E5%89%8D%E7%AB%AF%E5%9F%BA%E7%A1%80%E5%AD%A6%E4%B9%A0/</id>
    <published>2023-10-17T21:54:32.000Z</published>
    <updated>2024-03-30T03:52:47.492Z</updated>
    
    <content type="html"><![CDATA[<ol><li>htmlå®šä¹‰äº†ç½‘é¡µå†…å®¹</li><li>cssæè¿°äº†ç½‘é¡µçš„å¸ƒå±€</li><li>jsæ§åˆ¶äº†ç½‘é¡µçš„è¡Œä¸º(é€šè¿‡å‡½æ•°)</li></ol><h2 id="HTML"><a href="#HTML" class="headerlink" title="HTML"></a>HTML</h2><p><strong>HTML:</strong> è¶…æ–‡æœ¬æ ‡è®°è¯­è¨€ï¼Œè¿è¡Œåœ¨æµè§ˆå™¨ä¸Šï¼Œç”±æµè§ˆå™¨æ¥è§£æã€‚æ–‡ä»¶ååç¼€ä¸º<code>.html</code>ã€‚</p><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span> <span class="comment">&lt;!-- å£°æ˜æ–‡æ¡£ç±»å‹ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span> <span class="comment">&lt;!-- å¤´éƒ¨å…ƒç´  --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span> <span class="comment">&lt;!-- å¯è§å†…å®¹ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>æ ‡é¢˜<span class="tag">&lt;/<span class="name">h1</span>&gt;</span> <span class="comment">&lt;!-- å®šä¹‰ä¸€ä¸ªå¤§æ ‡é¢˜ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>æ®µè½<span class="tag">&lt;/<span class="name">p</span>&gt;</span> <span class="comment">&lt;!-- å®šä¹‰ä¸€ä¸ªæ®µè½ --&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="ä»€ä¹ˆæ˜¯htmlï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯htmlï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯htmlï¼Ÿ"></a>ä»€ä¹ˆæ˜¯htmlï¼Ÿ</h3><ul><li>htmlæ˜¯ä¸€ç§æ ‡è®°è¯­è¨€ï¼ˆæ ‡è®°æ ‡ç­¾ï¼‰</li><li>ä½¿ç”¨æ ‡è®°æ ‡ç­¾æ¥æè¿°ç½‘é¡µ</li><li>htmlæ–‡æ¡£åŒ…å«äº†htmlæ ‡ç­¾åŠæ–‡æœ¬å†…å®¹</li></ul><p><strong>htmlçš„æ ‡ç­¾ï¼š</strong> </p><ul><li>ç”±å°–æ‹¬å·åŒ…å›´çš„å…³é”®è¯ï¼Œå¦‚<code>&lt;html&gt;</code></li><li>æ ‡ç­¾é€šå¸¸æ˜¯æˆå¯¹å‡ºç°çš„ï¼Œå¦‚<code>&lt;html&gt;&lt;/html&gt;</code></li><li>æ ‡ç­¾å¯¹ä¸­çš„ç¬¬ä¸€ä¸ªæ ‡ç­¾æ˜¯å¼€å§‹æ ‡ç­¾ï¼Œç¬¬äºŒä¸ªæ ‡ç­¾æ˜¯ç»“æŸæ ‡ç­¾</li><li>å¼€å§‹æ ‡ç­¾å’Œç»“æŸæ ‡ç­¾ä¹Ÿè¢«ç§°ä¸ºå¼€æ”¾æ ‡ç­¾å’Œé—­åˆæ ‡ç­¾ <code>&lt;æ ‡ç­¾&gt;å†…å®¹&lt;/æ ‡ç­¾&gt;</code></li></ul><h3 id="åŸºç¡€è¯­æ³•"><a href="#åŸºç¡€è¯­æ³•" class="headerlink" title="åŸºç¡€è¯­æ³•"></a>åŸºç¡€è¯­æ³•</h3><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- æ³¨é‡Š --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>æ ‡é¢˜<span class="tag">&lt;/<span class="name">h1</span>&gt;</span> <span class="comment">&lt;!-- æ ‡é¢˜ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>æ®µè½<span class="tag">&lt;/<span class="name">p</span>&gt;</span> <span class="comment">&lt;!-- æ®µè½ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;https://www.baidu.com&quot;</span>&gt;</span>ç™¾åº¦<span class="tag">&lt;/<span class="name">a</span>&gt;</span> <span class="comment">&lt;!-- è¶…é“¾æ¥ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">decoding</span>=<span class="string">&quot;async&quot;</span> <span class="attr">src</span>=<span class="string">&quot;/images/logo.png&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;ç™¾åº¦logo&quot;</span> <span class="attr">width</span>=<span class="string">&quot;258&quot;</span>&gt;</span> <span class="comment">&lt;!-- å›¾ç‰‡ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">br</span>&gt;</span> <span class="comment">&lt;!-- æ¢è¡Œ --&gt;</span></span><br></pre></td></tr></table></figure><h3 id="tips"><a href="#tips" class="headerlink" title="tips"></a>tips</h3><ol><li>å¯¹äºä¸­æ–‡ç½‘é¡µéœ€è¦ä½¿ç”¨<code>&lt;meta charset=&quot;utf-8&quot;&gt;</code>æ¥æŒ‡å®šç¼–ç æ ¼å¼ï¼Œå¦åˆ™ä¼šå‡ºç°ä¹±ç ã€‚</li></ol><h2 id="CSS"><a href="#CSS" class="headerlink" title="CSS"></a>CSS</h2><p><strong>CSS:</strong> å±‚å æ ·å¼è¡¨ï¼Œç”¨äºè®¾ç½®HTMLå…ƒç´ çš„æ ·å¼ï¼Œå¦‚é¢œè‰²ã€å­—ä½“ã€å¤§å°ã€é—´è·ã€è¾¹æ¡†ç­‰ã€‚æ–‡ä»¶ååç¼€ä¸º<code>.css</code>ã€‚</p><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-tag">body</span>&#123;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="number">#f3f3f3</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">h1</span>&#123;</span><br><span class="line">    <span class="attribute">color</span>: red;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">p</span>&#123;</span><br><span class="line">    <span class="attribute">color</span>: blue;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="è¯­æ³•"><a href="#è¯­æ³•" class="headerlink" title="è¯­æ³•"></a>è¯­æ³•</h3><ul><li>é€‰æ‹©å™¨ï¼šè¦æ”¹å˜æ ·å¼çš„htmlå…ƒç´ </li><li>å£°æ˜å—ï¼šç”±<code>&#123;&#125;</code>åŒ…å›´çš„ä¸€æ¡æˆ–å¤šæ¡å£°æ˜ï¼Œå¦‚<code>color: red;</code>ï¼Œæ€»æ˜¯ä»¥åˆ†å·ç»“å°¾ï¼Œç”¨å¤§æ‹¬å·æ‹¬èµ·æ¥</li><li>æ³¨é‡Šï¼š<code>/* */</code>ï¼Œä¸ä¼šè¢«æµè§ˆå™¨è¯»å–ï¼Œå¯ä»¥æé«˜ä»£ç å¯è¯»æ€§</li></ul><h3 id="idå’Œclassé€‰æ‹©å™¨"><a href="#idå’Œclassé€‰æ‹©å™¨" class="headerlink" title="idå’Œclassé€‰æ‹©å™¨"></a>idå’Œclassé€‰æ‹©å™¨</h3><p><strong>idï¼š</strong></p><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span>èœé¸Ÿæ•™ç¨‹(runoob.com)<span class="tag">&lt;/<span class="name">title</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">    <span class="selector-id">#para1</span></span></span><br><span class="line"><span class="language-css">    &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">text-align</span>:center;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">color</span>:red;</span></span><br><span class="line"><span class="language-css">    &#125; </span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">&quot;para1&quot;</span>&gt;</span>Hello World!<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>è¿™ä¸ªæ®µè½ä¸å—è¯¥æ ·å¼çš„å½±å“ã€‚<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p><strong>classï¼š</strong><br>classç”¨äºæè¿°ä¸€ç»„å…ƒç´ çš„æ ·å¼ï¼Œå¯ä»¥åœ¨å¤šä¸ªå…ƒç´ ä¸­ä½¿ç”¨</p><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span>èœé¸Ÿæ•™ç¨‹(runoob.com)<span class="tag">&lt;/<span class="name">title</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.center</span></span></span><br><span class="line"><span class="language-css">    &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">text-align</span>:center;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span> <span class="attr">class</span>=<span class="string">&quot;center&quot;</span>&gt;</span>æ ‡é¢˜å±…ä¸­<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">&quot;center&quot;</span>&gt;</span>æ®µè½å±…ä¸­ã€‚<span class="tag">&lt;/<span class="name">p</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>idé€‰æ‹©å™¨ç”¨äºå”¯ä¸€çš„å…ƒç´ </li><li>classé€‰æ‹©å™¨é€šå¸¸å…·æœ‰é‡ç”¨æ€§</li></ul><h3 id="tips-1"><a href="#tips-1" class="headerlink" title="tips"></a>tips</h3><ul><li>idä¸è¦ä»¥æ•°å­—å¼€å¤´</li></ul><h3 id="å¤–éƒ¨æ ·å¼è¡¨"><a href="#å¤–éƒ¨æ ·å¼è¡¨" class="headerlink" title="å¤–éƒ¨æ ·å¼è¡¨"></a>å¤–éƒ¨æ ·å¼è¡¨</h3><p>æ¯ä¸ªé¡µé¢ä½¿ç”¨<code>&lt;link&gt;</code>æ ‡ç­¾é“¾æ¥åˆ°å¤–éƒ¨æ ·å¼è¡¨ï¼Œå¤–éƒ¨æ ·å¼è¡¨é€šå¸¸å­˜å‚¨åœ¨<code>.css</code>æ–‡ä»¶ä¸­ã€‚</p><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">type</span>=<span class="string">&quot;text/css&quot;</span> <span class="attr">href</span>=<span class="string">&quot;mystyle.css&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>This is a heading<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>This is a paragraph.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p>æµè§ˆå™¨ä¼šä»æ–‡ä»¶<code>mystyle.css</code>ä¸­è¯»å–æ ·å¼ä¿¡æ¯ï¼Œç„¶åå°†å…¶åº”ç”¨åˆ°å½“å‰çš„æ–‡æ¡£ä¸Šã€‚</p><h3 id="å†…éƒ¨æ ·å¼è¡¨"><a href="#å†…éƒ¨æ ·å¼è¡¨" class="headerlink" title="å†…éƒ¨æ ·å¼è¡¨"></a>å†…éƒ¨æ ·å¼è¡¨</h3><p>å‚è€ƒä¸Šé¢çš„å†™æ³•ã€‚</p><p>ä¼˜å…ˆçº§ï¼šå†…è”æ ·å¼ ã€‹ å†…éƒ¨æ ·å¼ ã€‹ å¤–éƒ¨æ ·å¼</p><h3 id="æ ·å¼"><a href="#æ ·å¼" class="headerlink" title="æ ·å¼"></a>æ ·å¼</h3><p>ä¸è¿‡å¤šèµ˜è¿°ï¼Œéœ€è¦æ—¶å†æŸ¥é˜…ã€‚</p><h2 id="JavaScript"><a href="#JavaScript" class="headerlink" title="JavaScript"></a>JavaScript</h2><p><strong>JavaScript:</strong> ä¸€ç§è½»é‡çº§çš„ç¼–ç¨‹è¯­è¨€ï¼Œå¯ç”¨äºåˆ›å»ºåŠ¨æ€ç½‘é¡µã€‚æ–‡ä»¶ååç¼€ä¸º<code>.js</code>ã€‚</p><p>ç¼–ç¨‹è¯­è¨€è¯­æ³•ä¸åšè¿‡å¤šèµ˜è¿°ï¼Œä¸»è¦å…³æ³¨JavsScriptæ˜¯å¦‚ä½•å’ŒHTMLäº¤äº’çš„ã€‚</p><h3 id="jsèƒ½å¤Ÿç›´æ¥å†™å…¥htmlè¾“å‡ºæµä¸­"><a href="#jsèƒ½å¤Ÿç›´æ¥å†™å…¥htmlè¾“å‡ºæµä¸­" class="headerlink" title="jsèƒ½å¤Ÿç›´æ¥å†™å…¥htmlè¾“å‡ºæµä¸­"></a>jsèƒ½å¤Ÿç›´æ¥å†™å…¥htmlè¾“å‡ºæµä¸­</h3><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="variable language_">document</span>.<span class="title function_">write</span>(<span class="string">&quot;&lt;h1&gt;This is a heading&lt;/h1&gt;&quot;</span>);</span></span><br><span class="line"><span class="language-javascript"><span class="variable language_">document</span>.<span class="title function_">write</span>(<span class="string">&quot;&lt;p&gt;This is a paragraph.&lt;/p&gt;&quot;</span>);</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="jså¯¹äº‹ä»¶çš„ååº”"><a href="#jså¯¹äº‹ä»¶çš„ååº”" class="headerlink" title="jså¯¹äº‹ä»¶çš„ååº”"></a>jså¯¹äº‹ä»¶çš„ååº”</h3><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">onclick</span>=<span class="string">&quot;alert(&#x27;Welcome!&#x27;)&quot;</span>&gt;</span>ç‚¹å‡»è¿™é‡Œ<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="æ”¹å˜htmlå†…å®¹"><a href="#æ”¹å˜htmlå†…å®¹" class="headerlink" title="æ”¹å˜htmlå†…å®¹"></a>æ”¹å˜htmlå†…å®¹</h3><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>æˆ‘çš„ç¬¬ä¸€æ®µ JavaScript<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">&quot;demo&quot;</span>&gt;</span></span><br><span class="line">JavaScript èƒ½æ”¹å˜ HTML å…ƒç´ </span><br><span class="line"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">function</span> <span class="title function_">myFunction</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="language-javascript">&#123;</span></span><br><span class="line"><span class="language-javascript">x=<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;demo&quot;</span>);  <span class="comment">// æ‰¾åˆ°å…ƒç´ </span></span></span><br><span class="line"><span class="language-javascript">x.<span class="property">innerHTML</span>=<span class="string">&quot;Hello JavaScript!&quot;</span>;    <span class="comment">// æ”¹å˜å†…å®¹</span></span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">onclick</span>=<span class="string">&quot;myFunction()&quot;</span>&gt;</span>ç‚¹å‡»è¿™é‡Œ<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="ç”¨æ³•"><a href="#ç”¨æ³•" class="headerlink" title="ç”¨æ³•"></a>ç”¨æ³•</h3><p>HTMLä¸­çš„JavaScriptä»£ç å¿…é¡»ä½äº<code>&lt;script&gt;</code>å’Œ<code>&lt;/script&gt;</code>æ ‡ç­¾ä¹‹é—´ã€‚æ”¾ç½®åˆ°<code>&lt;body&gt;</code>å’Œ<code>&lt;head&gt;</code>æ ‡ç­¾ä¸­éƒ½å¯ä»¥ã€‚</p><p>é€šå¸¸çš„åšæ³•æ˜¯æŠŠå‡½æ•°æ”¾å…¥åˆ°<code>&lt;head&gt;</code>æ ‡ç­¾ä¸­ï¼Œç„¶ååœ¨<code>&lt;body&gt;</code>æ ‡ç­¾ä¸­è°ƒç”¨å‡½æ•°ã€‚æˆ–è€…æ˜¯æ”¾ç½®åˆ°åº•éƒ¨ã€‚</p><h4 id="å¤–éƒ¨çš„JavaScript"><a href="#å¤–éƒ¨çš„JavaScript" class="headerlink" title="å¤–éƒ¨çš„JavaScript"></a>å¤–éƒ¨çš„JavaScript</h4><p>å¦‚æœéœ€è¦ä½¿ç”¨å¤–éƒ¨æ–‡ä»¶ï¼Œåœ¨<code>&lt;script&gt;</code>æ ‡ç­¾çš„srcå±æ€§ä¸­è®¾ç½®è¯¥æ–‡ä»¶ï¼š</p><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;myScript.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="è¯­æ³•-1"><a href="#è¯­æ³•-1" class="headerlink" title="è¯­æ³•"></a>è¯­æ³•</h3><p><strong>è¾“å‡ºï¼š</strong></p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">document</span>.<span class="title function_">write</span>(<span class="string">&quot;Hello World!&quot;</span>);</span><br><span class="line"><span class="variable language_">window</span>.<span class="title function_">alert</span>(<span class="string">&quot;Hello World!&quot;</span>); <span class="comment">// å¼¹å‡ºè­¦å‘Šæ¡†</span></span><br><span class="line">innerHTML <span class="comment">// å†…å®¹</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>() <span class="comment">// æ§åˆ¶å°</span></span><br></pre></td></tr></table></figure><p><strong>å˜é‡ï¼š</strong><br>Number\String\Array\Object\Function</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> x, length;</span><br><span class="line">x = <span class="number">1.2</span>;</span><br><span class="line">length = <span class="number">5</span>;</span><br><span class="line"><span class="keyword">var</span> person = &#123;<span class="attr">firstName</span>:<span class="string">&quot;John&quot;</span>, <span class="attr">lastName</span>:<span class="string">&quot;Doe&quot;</span>&#125;;  <span class="comment">// Object é€šè¿‡å¯¹è±¡å­—é¢é‡èµ‹å€¼</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">myFunction</span>(<span class="params">a, b</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> a * b;                                <span class="comment">// è¿”å› a ä¹˜ä»¥ b çš„ç»“æœ</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ä¸€äº›äº¤äº’ç¤ºä¾‹"><a href="#ä¸€äº›äº¤äº’ç¤ºä¾‹" class="headerlink" title="ä¸€äº›äº¤äº’ç¤ºä¾‹"></a>ä¸€äº›äº¤äº’ç¤ºä¾‹</h3><ul><li>JavaScriptå¯ä»¥é™„åŠ åˆ°HTMLå…ƒç´ ä¸Šçš„äº‹ä»¶å¤„ç†ç¨‹åºï¼Œä¾‹å¦‚ç‚¹å‡»äº‹ä»¶ã€é¼ æ ‡ç§»åŠ¨äº‹ä»¶ã€é”®- ç›˜äº‹ä»¶ç­‰ã€‚<br>å½“äº‹ä»¶å‘ç”Ÿæ—¶ï¼Œä¸è¯¥äº‹ä»¶ç›¸å…³çš„JavaScriptä»£ç å°†è¢«æ‰§è¡Œï¼Œä»¥å“åº”ç”¨æˆ·çš„æ“ä½œã€‚</li></ul><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">&quot;myButton&quot;</span>&gt;</span>ç‚¹å‡»æˆ‘<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> button = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;myButton&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">    button.<span class="title function_">addEventListener</span>(<span class="string">&quot;click&quot;</span>, <span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">alert</span>(<span class="string">&quot;æŒ‰é’®è¢«ç‚¹å‡»äº†ï¼&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">    &#125;);</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><ul><li>JavaScriptå¯ä»¥è®¿é—®å’Œæ“ä½œæ–‡æ¡£å¯¹è±¡æ¨¡å‹ï¼ˆDOMï¼‰ï¼Œè¿™æ˜¯HTMLé¡µé¢çš„è¡¨ç¤ºã€‚</li><li>é€šè¿‡JavaScriptï¼Œæ‚¨å¯ä»¥åˆ›å»ºã€ä¿®æ”¹ã€åˆ é™¤HTMLå…ƒç´ ï¼Œä»¥åŠæ”¹å˜å…ƒç´ çš„æ ·å¼å’Œå†…å®¹ã€‚</li></ul><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;myDiv&quot;</span>&gt;</span>è¿™æ˜¯ä¸€ä¸ª<span class="tag">&lt;<span class="name">div</span>&gt;</span>å…ƒç´ <span class="tag">&lt;/<span class="name">div</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> myDiv = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;myDiv&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">    myDiv.<span class="property">innerHTML</span> = <span class="string">&quot;ç°åœ¨æˆ‘è¢«JavaScriptä¿®æ”¹äº†ï¼&quot;</span>;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>JavaScriptå¯ä»¥ç”¨äºéªŒè¯è¡¨å•æ•°æ®ã€æäº¤è¡¨å•ã€ä»¥åŠå¤„ç†è¡¨å•çš„è¾“å…¥ã€‚</li><li>å¯ä»¥ä½¿ç”¨JavaScriptæ¥éªŒè¯ç”¨æˆ·è¾“å…¥æ˜¯å¦æœ‰æ•ˆï¼Œç„¶åæ ¹æ®éªŒè¯ç»“æœé‡‡å–ç›¸åº”çš„è¡ŒåŠ¨ã€‚</li></ul><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">id</span>=<span class="string">&quot;myForm&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">id</span>=<span class="string">&quot;name&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;å§“å&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;æäº¤&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> form = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;myForm&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">    form.<span class="title function_">addEventListener</span>(<span class="string">&quot;submit&quot;</span>, <span class="keyword">function</span>(<span class="params">event</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">const</span> nameInput = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;name&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">if</span> (nameInput.<span class="property">value</span> === <span class="string">&quot;&quot;</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="title function_">alert</span>(<span class="string">&quot;è¯·è¾“å…¥æ‚¨çš„å§“åï¼&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">            event.<span class="title function_">preventDefault</span>(); <span class="comment">// é˜»æ­¢è¡¨å•æäº¤</span></span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;);</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;ol&gt;
&lt;li&gt;htmlå®šä¹‰äº†ç½‘é¡µå†…å®¹&lt;/li&gt;
&lt;li&gt;cssæè¿°äº†ç½‘é¡µçš„å¸ƒå±€&lt;/li&gt;
&lt;li&gt;jsæ§åˆ¶äº†ç½‘é¡µçš„è¡Œä¸º(é€šè¿‡å‡½æ•°)&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&quot;HTML&quot;&gt;&lt;a href=&quot;#HTML&quot; class=&quot;headerlink&quot; title=&quot;HTML&quot;</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title>C++ä»£ç è°ƒè¯•</title>
    <link href="http://example.com/2023/10/10/%E3%80%90c++%E3%80%91%E4%BB%A3%E7%A0%81%E8%B0%83%E8%AF%95/"/>
    <id>http://example.com/2023/10/10/%E3%80%90c++%E3%80%91%E4%BB%A3%E7%A0%81%E8%B0%83%E8%AF%95/</id>
    <published>2023-10-10T00:15:48.000Z</published>
    <updated>2024-03-30T03:51:52.826Z</updated>
    
    <content type="html"><![CDATA[<h2 id="GCC-å·¥ä½œæµç¨‹"><a href="#GCC-å·¥ä½œæµç¨‹" class="headerlink" title="GCC å·¥ä½œæµç¨‹"></a>GCC å·¥ä½œæµç¨‹</h2><table><thead><tr><th>è¯´æ˜</th><th>æ–‡ä»¶åç¼€</th><th>å‚æ•°</th></tr></thead><tbody><tr><td>é¢„å¤„ç†</td><td>.c</td><td>-</td></tr><tr><td>ç¼–è¯‘</td><td>.i</td><td>-E</td></tr><tr><td>æ±‡ç¼–</td><td>.s</td><td>-S</td></tr><tr><td>é“¾æ¥</td><td>.o</td><td>-c</td></tr></tbody></table><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># é¢„å¤„ç†ã€‚ -o å‚æ•°æ˜¯ä¸ºäº†æŒ‡å®šç¼–è¯‘åçš„æ–‡ä»¶å</span></span><br><span class="line">gcc -E test.c -o test.i</span><br><span class="line"><span class="comment"># ç¼–è¯‘</span></span><br><span class="line">gcc -S test.i -o test.s </span><br><span class="line"><span class="comment"># æ±‡ç¼–</span></span><br><span class="line">gcc -c test.s -o test.o</span><br><span class="line"><span class="comment">#é“¾æ¥</span></span><br><span class="line">gcc test.o -o <span class="built_in">test</span></span><br></pre></td></tr></table></figure><table><thead><tr><th>gccç¼–è¯‘é€‰é¡¹</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>-g</td><td>ç”Ÿæˆè°ƒè¯•ä¿¡æ¯ï¼Œå³å¯è°ƒè¯•</td></tr><tr><td>-D</td><td>æŒ‡å®šä¸€ä¸ªå®</td></tr><tr><td>-l</td><td>æŒ‡å®šé“¾æ¥åº“</td></tr><tr><td>-std</td><td>æŒ‡å®šC++ç‰ˆæœ¬</td></tr><tr><td>-I</td><td>æŒ‡å®šå¤´æ–‡ä»¶è·¯å¾„</td></tr><tr><td>-Wall</td><td>æ‰“å¼€æ‰€æœ‰è­¦å‘Šä¿¡æ¯</td></tr></tbody></table><p><strong><code>-D</code>å‚æ•°åº”ç”¨åœºæ™¯ï¼š</strong><br>åœ¨å‘å¸ƒç¨‹åºçš„æ—¶å€™ï¼Œä¸€èˆ¬ä¼šå°†æ‰€æœ‰logè¾“å‡ºå»æ‰ï¼Œå¦‚æœä¸å»æ‰ä¼šå½±å“ç¨‹åºçš„æ‰§è¡Œæ•ˆç‡ã€‚è¿™æ—¶å€™å¯ä»¥åœ¨ç¼–è¯‘çš„æ—¶å€™åŠ ä¸Š<code>-D</code>å‚æ•°ï¼Œå®šä¹‰ä¸€ä¸ªå®ï¼Œç„¶ååœ¨ç¨‹åºä¸­ä½¿ç”¨è¿™ä¸ªå®ï¼Œå¦‚æœæ˜¯å‘å¸ƒç¨‹åºï¼Œå°±ä¸å®šä¹‰è¿™ä¸ªå®ï¼Œè¿™æ ·å°±å¯ä»¥åœ¨ç¼–è¯‘çš„æ—¶å€™å»æ‰æ‰€æœ‰çš„logè¾“å‡ºã€‚</p><h3 id="å¤šæ–‡ä»¶ç¼–è¯‘"><a href="#å¤šæ–‡ä»¶ç¼–è¯‘" class="headerlink" title="å¤šæ–‡ä»¶ç¼–è¯‘"></a>å¤šæ–‡ä»¶ç¼–è¯‘</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">gcc -o <span class="built_in">test</span> string.c main.c</span><br></pre></td></tr></table></figure><h3 id="gccå’Œg"><a href="#gccå’Œg" class="headerlink" title="gccå’Œg++"></a>gccå’Œg++</h3><p><strong>åœ¨ç¼–è¯‘é˜¶æ®µï¼š</strong></p><ul><li>åç¼€ä¸º.cçš„æ–‡ä»¶ï¼Œgccä¼šå°†å…¶å½“åšCè¯­è¨€æºæ–‡ä»¶ï¼Œg++ä¼šå°†å…¶å½“åšC++è¯­è¨€æºæ–‡ä»¶ã€‚</li><li>åç¼€ä¸º.cppçš„æ–‡ä»¶ï¼Œä¸¤è€…éƒ½ä¼šå°†å…¶å½“åšC++è¯­è¨€æºæ–‡ä»¶ã€‚</li><li>g++ä¼šè°ƒç”¨gccï¼Œå¯¹äºC++ä»£ç ï¼Œä¸¤è€…æ˜¯ç­‰ä»·çš„ï¼Œä¹Ÿå°±æ˜¯è¯´gccå’Œg++éƒ½å¯ä»¥ç¼–è¯‘C&#x2F;C++ä»£ç </li></ul><p><strong>åœ¨é“¾æ¥é˜¶æ®µï¼š</strong></p><ul><li>gccå’Œg++éƒ½å¯ä»¥è‡ªåŠ¨è¿æ¥åˆ°æ ‡å‡†Cåº“</li><li>g++ä¼šè‡ªåŠ¨è¿æ¥åˆ°æ ‡å‡†C++åº“ï¼Œgccå¦‚æœè¦é“¾æ¥åˆ°æ ‡å‡†C++åº“éœ€è¦åŠ å‚æ•°<code>-lstdc++</code></li></ul><h2 id="gdbè°ƒè¯•"><a href="#gdbè°ƒè¯•" class="headerlink" title="gdbè°ƒè¯•"></a>gdbè°ƒè¯•</h2><p><strong>gdbè°ƒè¯•çš„ä»£ç å¿…é¡»æ·»åŠ -gå‚æ•°ï¼Œ-gçš„ä½œç”¨æ˜¯åœ¨å¯æ‰§è¡Œæ–‡ä»¶ä¸­åŠ å…¥æºä»£ç çš„ä¿¡æ¯ï¼Œæ¯”å¦‚å¯æ‰§è¡Œæ–‡ä»¶ä¸­ç¬¬å‡ æ¡æœºå™¨æŒ‡ä»¤å¯¹åº”æºä»£ç çš„ç¬¬å‡ è¡Œã€‚</strong></p><p><em>ä½¿ç”¨CMakeç¼–è¯‘çš„ï¼Œæ·»åŠ <code>-DCMAKE_BUILD_TYPE=Debug</code>å‚æ•°</em>ã€‚</p><h3 id="å¯åŠ¨å’Œé€€å‡ºgdb"><a href="#å¯åŠ¨å’Œé€€å‡ºgdb" class="headerlink" title="å¯åŠ¨å’Œé€€å‡ºgdb"></a>å¯åŠ¨å’Œé€€å‡ºgdb</h3><p><strong>gdbè¿›ç¨‹å¯åŠ¨ä¹‹åï¼Œéœ€è¦è¢«è°ƒè¯•çš„åº”ç”¨ç¨‹åºæ˜¯æ²¡æœ‰æ‰§è¡Œçš„ã€‚</strong></p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">gdb &lt;program&gt; <span class="comment"># å¯åŠ¨</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">set</span> args &lt;arg1&gt; &lt;arg2&gt; <span class="comment"># è®¾ç½®å‚æ•°,å¯åŠ¨åº”ç”¨ç¨‹åºä¹‹å‰å¯èƒ½éœ€è¦ä¼ å‚</span></span><br><span class="line"></span><br><span class="line">show args <span class="comment"># æŸ¥çœ‹å‚æ•°</span></span><br></pre></td></tr></table></figure><p><strong>åœ¨gdbä¸­å¯åŠ¨ç¨‹åºï¼š</strong></p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">(gdb) run</span><br><span class="line">(gdb) start <span class="comment"># ä¼šé˜»å¡åˆ°mainå‡½æ•°ç¬¬ä¸€è¡Œ</span></span><br></pre></td></tr></table></figure><h3 id="å¸¸ç”¨å‚æ•°"><a href="#å¸¸ç”¨å‚æ•°" class="headerlink" title="å¸¸ç”¨å‚æ•°"></a>å¸¸ç”¨å‚æ•°</h3><table><thead><tr><th>å‚æ•°</th><th>è¯´æ˜</th><th>ç¤ºä¾‹</th></tr></thead><tbody><tr><td>run</td><td>å¯åŠ¨ç¨‹åº</td><td></td></tr><tr><td>continue &#x3D; c</td><td>ç»§ç»­æ‰§è¡Œç¨‹åº</td><td></td></tr><tr><td>quit &#x3D;&#x3D; q</td><td>é€€å‡ºgdb</td><td></td></tr><tr><td>list &#x3D;&#x3D; l</td><td>åˆ—å‡ºæºä»£ç </td><td>l è¡Œå·, l å‡½æ•°åï¼Œ l æ–‡ä»¶åï¼šè¡Œå·</td></tr><tr><td>break &#x3D;&#x3D; b</td><td>è®¾ç½®æ–­ç‚¹</td><td>b è¡Œå·, b å‡½æ•°åï¼Œ b æ–‡ä»¶åï¼šè¡Œå·ï¼Œ b è¡Œæ•° if å˜é‡å&#x3D;æŸä¸ªå€¼</td></tr><tr><td>info &#x3D;&#x3D; i</td><td>æŸ¥çœ‹ä¿¡æ¯</td><td>i breakpoints, i locals, i args</td></tr><tr><td>delete &#x3D; del &#x3D; d</td><td>åˆ é™¤æ–­ç‚¹</td><td>d æ–­ç‚¹å·</td></tr><tr><td>disable &#x3D; dis</td><td>ç¦ç”¨æ–­ç‚¹</td><td>disable æ–­ç‚¹å·</td></tr><tr><td>enable &#x3D; ena</td><td>å¯ç”¨æ–­ç‚¹</td><td>enable æ–­ç‚¹å·</td></tr><tr><td>print &#x3D; p</td><td>æ‰“å°å˜é‡</td><td>p å˜é‡å</td></tr><tr><td>ptype</td><td>æ‰“å°å˜é‡ç±»å‹</td><td>ptype å˜é‡å</td></tr><tr><td>display</td><td>è·Ÿè¸ªæŸ¥çœ‹å˜é‡</td><td>display å˜é‡å</td></tr><tr><td>step &#x3D; s</td><td>å•æ­¥æ‰§è¡Œï¼Œè¿›å…¥å‡½æ•°</td><td></td></tr><tr><td>finish</td><td>æ‰§è¡Œåˆ°å½“å‰å‡½æ•°è¿”å›ä¸ºæ­¢</td><td></td></tr><tr><td>next &#x3D; n</td><td>å•æ­¥æ‰§è¡Œï¼Œä¸è¿›å…¥å‡½æ•°</td><td></td></tr><tr><td>until</td><td>è·³å‡ºå¾ªç¯</td><td></td></tr><tr><td>set</td><td>ä¿®æ”¹å˜é‡å€¼</td><td>set å˜é‡å&#x3D;å€¼</td></tr></tbody></table><h2 id="CMake"><a href="#CMake" class="headerlink" title="CMake"></a>CMake</h2><p>å‚è€ƒ<a href="https://www.hahack.com/codes/cmake/">Cmakeå¿«é€Ÿå…¥é—¨</a></p><p>cmakeçš„åŸºæœ¬è¯­æ³•ï¼š</p><figure class="highlight cmake"><table><tr><td class="code"><pre><span class="line">cmake &lt;<span class="keyword">option</span>&gt; &lt;path&gt;</span><br><span class="line">cmake -DCMAKE_BUILD_TYPE=Debug ..</span><br></pre></td></tr></table></figure><h3 id="æŒ‡ä»¤"><a href="#æŒ‡ä»¤" class="headerlink" title="æŒ‡ä»¤"></a>æŒ‡ä»¤</h3><table><thead><tr><th>å«ä¹‰</th><th>æŒ‡ä»¤</th></tr></thead><tbody><tr><td>ç¼–è¯‘</td><td>cmake <code>&lt;path&gt;</code>, å½“å‰ç›®å½•ä¸º<code>.</code>,ä¸Šä¸€çº§ç›®å½•ä¸º<code>..</code></td></tr><tr><td>æ¸…ç†cmakeç¼“å­˜</td><td><code>rm -rf CMakeFiles/ CMakeCache.txt cmake_install.cmake Makefile</code></td></tr></tbody></table><h3 id="æ³¨æ„äº‹é¡¹"><a href="#æ³¨æ„äº‹é¡¹" class="headerlink" title="æ³¨æ„äº‹é¡¹"></a>æ³¨æ„äº‹é¡¹</h3><ul><li>æ¯ä¸€ä¸ªå±‚çº§éƒ½éœ€è¦å†™CMakeLists.txtæ–‡ä»¶</li><li>éœ€è¦åœ¨çˆ¶å±‚çº§æ·»åŠ å­å±‚çº§çš„ç›®å½•</li><li>éœ€è¦åœ¨çˆ¶å±‚çº§æ·»åŠ å­å±‚çº§çš„åº“&#x2F;å­ç›®å½•åŒ…å«å¯æ‰§è¡Œæ–‡ä»¶</li></ul><h3 id="ç¤ºä¾‹"><a href="#ç¤ºä¾‹" class="headerlink" title="ç¤ºä¾‹"></a>ç¤ºä¾‹</h3><p><strong>æ–‡ä»¶ç»“æ„ï¼š</strong></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">â”œâ”€â”€ cmake_notes</span><br><span class="line">â”‚   â”œâ”€â”€ build</span><br><span class="line">â”‚   â””â”€â”€ math</span><br><span class="line">â”‚       â”œâ”€â”€ CMakeLists.txt</span><br><span class="line">|       â”œâ”€â”€ myfunction.h</span><br><span class="line">â”‚       â””â”€â”€ myfunction.cpp</span><br><span class="line">â”œâ”€â”€ CMakeLists.txt</span><br><span class="line">â””â”€â”€ main.txt</span><br></pre></td></tr></table></figure><p>ç¬¬ä¸€å±‚çº§çš„CMakeLists.txtï¼š</p><figure class="highlight cmake"><table><tr><td class="code"><pre><span class="line"><span class="keyword">cmake_minimum_required</span>(VERSION <span class="number">3.1</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># é¡¹ç›®åç§°</span></span><br><span class="line"><span class="keyword">project</span>(Demo)</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ˜¯å¦ç”¨è‡ªå·±çš„ MathFunctionsåº“</span></span><br><span class="line"><span class="keyword">option</span>(USE_MYMATH <span class="string">&quot;Use provided math implementation&quot;</span> <span class="keyword">OFF</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ·»åŠ è‡ªå·±çš„ MathFunctionsåº“</span></span><br><span class="line"><span class="keyword">add_definitions</span>(-DUSE_MYMATH)</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ˜¯å¦åŠ å…¥MathFunctionsåº“</span></span><br><span class="line"><span class="keyword">if</span> (USE_MYMATH)</span><br><span class="line">    <span class="keyword">include_directories</span>(<span class="string">&quot;$&#123;PROJECT_SOURCE_DIR&#125;/math&quot;</span>)</span><br><span class="line">    <span class="keyword">add_subdirectory</span>(<span class="keyword">math</span>)</span><br><span class="line"><span class="keyword">endif</span> (USE_MYMATH)</span><br><span class="line"></span><br><span class="line"><span class="comment"># add_executable(Demo main.cpp print.cpp)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æŸ¥æ‰¾å½“å‰ç›®å½•ä¸‹çš„æ‰€æœ‰æºæ–‡ä»¶ï¼Œä¿å­˜åˆ°DIR_SRCSå˜é‡ä¸­</span></span><br><span class="line"><span class="keyword">aux_source_directory</span>(. DIR_SRCS)</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç”ŸæˆæŒ‡å®šç›®æ ‡</span></span><br><span class="line"><span class="keyword">add_executable</span>(Demo <span class="variable">$&#123;DIR_SRCS&#125;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ·»åŠ å­ç›®å½•</span></span><br><span class="line"><span class="comment"># add_subdirectory(math)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># é“¾æ¥åˆ°åº“</span></span><br><span class="line"><span class="keyword">if</span> (USE_MYMATH)</span><br><span class="line">    <span class="keyword">target_link_libraries</span>(Demo MathFunctions)</span><br><span class="line"><span class="keyword">endif</span> (USE_MYMATH)</span><br><span class="line"></span><br><span class="line"><span class="keyword">target_link_libraries</span>(Demo -lpthread)</span><br></pre></td></tr></table></figure><p><strong>åœ¨æºä»£ç ä¸­ä½¿ç”¨ï¼š</strong></p><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">ifdef</span> USE_MYMATH</span></span><br><span class="line">    cout&lt;&lt;<span class="string">&quot;use my math&quot;</span>&lt;&lt;endl;</span><br><span class="line"><span class="meta">#<span class="keyword">else</span></span></span><br><span class="line">    cout&lt;&lt;<span class="string">&quot;use system math&quot;</span>&lt;&lt;endl;</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span> <span class="comment">// USE_MYMATH</span></span></span><br></pre></td></tr></table></figure><p><strong>å­ç›®å½•çš„CMakeListsæ–‡æ¡£ï¼Œéœ€è¦add_executableå—?</strong></p><p>å­ç›®å½•åŒ…å«å¯æ‰§è¡Œæ–‡ä»¶ï¼š</p><figure class="highlight cmake"><table><tr><td class="code"><pre><span class="line"><span class="comment"># åœ¨å­ç›®å½•çš„ CMakeLists.txt ä¸­</span></span><br><span class="line"><span class="keyword">add_executable</span>(my_executable main.cpp other_source.cpp)</span><br></pre></td></tr></table></figure><p>å­ç›®å½•åªåŒ…å«åº“ä»£ç ï¼š</p><figure class="highlight cmake"><table><tr><td class="code"><pre><span class="line"><span class="comment"># åœ¨å­ç›®å½•çš„ CMakeLists.txt ä¸­</span></span><br><span class="line"><span class="keyword">add_library</span>(my_library my_source.cpp)</span><br></pre></td></tr></table></figure><p>è¿™å°†åˆ›å»ºä¸€ä¸ªåº“ç›®æ ‡è€Œä¸æ˜¯å¯æ‰§è¡Œæ–‡ä»¶ï¼Œä»¥ä¾¿åœ¨ä¸»ç›®å½•çš„CMakeLists.txtæ–‡ä»¶ä¸­æˆ–å…¶ä»–å­ç›®å½•ä¸­ä½¿ç”¨ã€‚</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;GCC-å·¥ä½œæµç¨‹&quot;&gt;&lt;a href=&quot;#GCC-å·¥ä½œæµç¨‹&quot; class=&quot;headerlink&quot; title=&quot;GCC å·¥ä½œæµç¨‹&quot;&gt;&lt;/a&gt;GCC å·¥ä½œæµç¨‹&lt;/h2&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;è¯´æ˜&lt;/th&gt;
&lt;th&gt;æ–‡ä»¶åç¼€&lt;/th&gt;
&lt;t</summary>
      
    
    
    
    <category term="CPP" scheme="http://example.com/categories/CPP/"/>
    
    
    <category term="CPP" scheme="http://example.com/tags/CPP/"/>
    
  </entry>
  
  <entry>
    <title>C++å¤šçº¿ç¨‹æ¨¡å‹</title>
    <link href="http://example.com/2023/10/10/%E3%80%90c++%E3%80%91-threads/"/>
    <id>http://example.com/2023/10/10/%E3%80%90c++%E3%80%91-threads/</id>
    <published>2023-10-09T22:47:41.000Z</published>
    <updated>2024-03-30T03:51:58.827Z</updated>
    
    <content type="html"><![CDATA[<h2 id="çº¿ç¨‹åŒæ­¥å’Œçº¿ç¨‹é€šä¿¡"><a href="#çº¿ç¨‹åŒæ­¥å’Œçº¿ç¨‹é€šä¿¡" class="headerlink" title="çº¿ç¨‹åŒæ­¥å’Œçº¿ç¨‹é€šä¿¡"></a>çº¿ç¨‹åŒæ­¥å’Œçº¿ç¨‹é€šä¿¡</h2><h3 id="çº¿ç¨‹åŒæ­¥"><a href="#çº¿ç¨‹åŒæ­¥" class="headerlink" title="çº¿ç¨‹åŒæ­¥"></a>çº¿ç¨‹åŒæ­¥</h3><ol><li>äº’æ–¥é”</li><li>æ¡ä»¶å˜é‡</li><li>äº’æ–¥é‡</li><li>ä¿¡å·é‡</li></ol><h3 id="çº¿ç¨‹é€šä¿¡"><a href="#çº¿ç¨‹é€šä¿¡" class="headerlink" title="çº¿ç¨‹é€šä¿¡"></a>çº¿ç¨‹é€šä¿¡</h3><ol><li>æ¡ä»¶å˜é‡</li><li>é˜Ÿåˆ—</li><li>åŸå­æ“ä½œ</li><li>æ¡ä»¶å˜é‡å’Œå®šæ—¶å™¨</li></ol><h2 id="C-æ ‡å‡†åº“æä¾›äº†å“ªäº›é”ï¼Ÿ"><a href="#C-æ ‡å‡†åº“æä¾›äº†å“ªäº›é”ï¼Ÿ" class="headerlink" title="C++æ ‡å‡†åº“æä¾›äº†å“ªäº›é”ï¼Ÿ"></a>C++æ ‡å‡†åº“æä¾›äº†å“ªäº›é”ï¼Ÿ</h2><p><code>std::mutex</code>ï¼šäº’æ–¥é”æ˜¯æœ€åŸºæœ¬çš„é”ç±»å‹ï¼Œç”¨äºç¡®ä¿ä¸€æ¬¡åªæœ‰ä¸€ä¸ªçº¿ç¨‹å¯ä»¥è®¿é—®å…±äº«èµ„æºã€‚ä½ å¯ä»¥ä½¿ç”¨ std::mutex æ¥åˆ›å»ºä¸€ä¸ªäº’æ–¥é”å¯¹è±¡ï¼Œç„¶åä½¿ç”¨ lock() å’Œ unlock() æ–¹æ³•æ¥æ‰‹åŠ¨é”å®šå’Œè§£é”ã€‚</p><p><code>std::unique_lockï¼š</code>std::unique_lock æ˜¯ä¸€ä¸ªæ›´åŠ çµæ´»çš„äº’æ–¥é”åŒ…è£…å™¨ï¼Œå®ƒå…è®¸ä½ åœ¨éœ€è¦æ—¶æ‰‹åŠ¨é”å®šå’Œè§£é”ï¼Œä¹Ÿå¯ä»¥åœ¨æ„é€ å‡½æ•°å’Œææ„å‡½æ•°ä¸­è‡ªåŠ¨é”å®šå’Œè§£é”ã€‚</p><p><code>std::lock_guardï¼š</code>std::lock_guard æ˜¯å¦ä¸€ä¸ªäº’æ–¥é”åŒ…è£…å™¨ï¼Œä½†å®ƒåªæ”¯æŒè‡ªåŠ¨é”å®šå’Œè§£é”ã€‚ä¸€æ—¦ std::lock_guard å¯¹è±¡è¢«åˆ›å»ºï¼Œå®ƒä¼šè‡ªåŠ¨é”å®šäº’æ–¥é”ï¼Œå¹¶åœ¨å…¶ç”Ÿå‘½å‘¨æœŸç»“æŸæ—¶è‡ªåŠ¨è§£é”ã€‚</p><p><code>std::recursive_mutexï¼š</code>é€’å½’äº’æ–¥é”å…è®¸åŒä¸€çº¿ç¨‹å¤šæ¬¡è·å¾—é”ã€‚è¿™å¯¹äºæŸäº›ç‰¹å®šçš„æƒ…å†µå¾ˆæœ‰ç”¨ï¼Œä½†è¦å°å¿ƒé¿å…æ­»é”ã€‚</p><p><code>std::shared_mutexï¼š</code>å…±äº«äº’æ–¥é”ï¼ˆC++17å¼•å…¥ï¼‰å…è®¸å¤šä¸ªçº¿ç¨‹åŒæ—¶è¯»å–å…±äº«èµ„æºï¼Œä½†åªæœ‰ä¸€ä¸ªçº¿ç¨‹å¯ä»¥å†™å…¥èµ„æºã€‚è¿™æœ‰åŠ©äºæé«˜å¹¶å‘æ€§èƒ½ã€‚</p><p><code>std::condition_variableï¼š</code>æ¡ä»¶å˜é‡ç”¨äºçº¿ç¨‹ä¹‹é—´çš„åŒæ­¥å’Œé€šä¿¡ã€‚å®ƒä»¬å…è®¸ä¸€ä¸ªçº¿ç¨‹ç­‰å¾…æŸä¸ªæ¡ä»¶æˆç«‹ï¼Œç„¶åå¦ä¸€ä¸ªçº¿ç¨‹å‘å‡ºä¿¡å·ä»¥é€šçŸ¥ç­‰å¾…çº¿ç¨‹ã€‚</p><h2 id="å®ç°çº¿ç¨‹çš„äº¤æ›¿æ‰“å°ï¼š"><a href="#å®ç°çº¿ç¨‹çš„äº¤æ›¿æ‰“å°ï¼š" class="headerlink" title="å®ç°çº¿ç¨‹çš„äº¤æ›¿æ‰“å°ï¼š"></a>å®ç°çº¿ç¨‹çš„äº¤æ›¿æ‰“å°ï¼š</h2><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;condition_variable&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;mutex&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;thread&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> NUM_THREADS = <span class="number">3</span>;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> NUM_ITERATTIONS = <span class="number">5</span>;</span><br><span class="line"></span><br><span class="line">std::mutex mtx; <span class="comment">// é”ï¼Œç”¨äºçº¿ç¨‹åŒæ­¥</span></span><br><span class="line">std::condition_variable cv; <span class="comment">// æ¡ä»¶å˜é‡ï¼Œç”¨äºçº¿ç¨‹é€šä¿¡</span></span><br><span class="line"><span class="type">int</span> current_thread = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">print</span><span class="params">(<span class="type">int</span> thread_num, <span class="type">const</span> std::string&amp; messages)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; NUM_ITERATTIONS; ++i) &#123;</span><br><span class="line">        <span class="comment">// è·å–é”ï¼Œè¿›å…¥ä¸´ç•ŒåŒº</span></span><br><span class="line">        <span class="function">std::unique_lock&lt;std::mutex&gt; <span class="title">lock</span><span class="params">(mtx)</span></span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// å¦‚æœä¸æ˜¯å½“å‰çº¿ç¨‹ï¼Œå°±ç­‰å¾…</span></span><br><span class="line">        <span class="keyword">while</span> (current_thread != thread_num) &#123;</span><br><span class="line">            cv.<span class="built_in">wait</span>(lock); <span class="comment">// é‡Šæ”¾é”ï¼Œå…è®¸å…¶ä»–çº¿ç¨‹è¿›å…¥ä¸´ç•ŒåŒº</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// æ‰“å°ä¿¡æ¯</span></span><br><span class="line">        std::cout &lt;&lt; messages &lt;&lt; std::endl;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// æ›´æ”¹å½“å‰çº¿ç¨‹çš„ç¼–å·</span></span><br><span class="line">        current_thread = (current_thread + <span class="number">1</span>) % NUM_THREADS;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// é€šçŸ¥ä¸‹ä¸€ä¸ªçº¿ç¨‹å¼€å§‹æ‰“å°</span></span><br><span class="line">        cv.<span class="built_in">notify_all</span>(); <span class="comment">// è¿™é‡Œå¹¶æ²¡æœ‰é‡Šæ”¾é”ï¼Œå½“å‰çº¿ç¨‹ä»ç„¶æŒæœ‰é”</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    std::thread threads[NUM_THREADS];</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; NUM_THREADS; ++i) &#123;</span><br><span class="line">        threads[i] = std::<span class="built_in">thread</span>(print, i, <span class="string">&quot;Thread &quot;</span> + std::<span class="built_in">to_string</span>(i));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; NUM_THREADS; ++i) &#123;</span><br><span class="line">        threads[i].<span class="built_in">join</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">g++ test.cpp -o <span class="built_in">test</span> -pthread</span><br></pre></td></tr></table></figure><h2 id="é—®é¢˜"><a href="#é—®é¢˜" class="headerlink" title="é—®é¢˜"></a>é—®é¢˜</h2><h3 id="ä¸ºä»€ä¹ˆä½¿ç”¨æ¡ä»¶å˜é‡å”¤é†’çš„æ—¶å€™è¦ç”¨whileè€Œä¸ç”¨ifï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆä½¿ç”¨æ¡ä»¶å˜é‡å”¤é†’çš„æ—¶å€™è¦ç”¨whileè€Œä¸ç”¨ifï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆä½¿ç”¨æ¡ä»¶å˜é‡å”¤é†’çš„æ—¶å€™è¦ç”¨whileè€Œä¸ç”¨ifï¼Ÿ"></a>ä¸ºä»€ä¹ˆä½¿ç”¨æ¡ä»¶å˜é‡å”¤é†’çš„æ—¶å€™è¦ç”¨whileè€Œä¸ç”¨ifï¼Ÿ</h3><p>æ¡ä»¶å˜é‡åœ¨ç­‰å¾…æœŸé—´å¯èƒ½ä¼šæ”¶åˆ°è™šå‡å”¤é†’ï¼ˆspurious wakeupsï¼‰ï¼Œä¹Ÿå°±æ˜¯åœ¨æ¡ä»¶å°šæœªæ»¡è¶³æ—¶ï¼Œçº¿ç¨‹è¢«å”¤é†’ã€‚</p><p>è™šå‡å”¤é†’æ˜¯ç”±äºæ“ä½œç³»ç»Ÿæˆ–åº•å±‚çº¿ç¨‹åº“çš„å®ç°ç»†èŠ‚å¼•èµ·çš„ï¼Œä»–ä»¬å¯èƒ½ä¼šå¶å°”å¯¼è‡´æ¡ä»¶å˜é‡çš„ä¿¡å·é‡è¢«é”™è¯¯å”¤é†’ã€‚æ‰€ä»¥è¦å¾ªç¯æ£€æŸ¥ï¼Œç›´åˆ°æ¡ä»¶ä¸æ»¡è¶³ã€‚</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;çº¿ç¨‹åŒæ­¥å’Œçº¿ç¨‹é€šä¿¡&quot;&gt;&lt;a href=&quot;#çº¿ç¨‹åŒæ­¥å’Œçº¿ç¨‹é€šä¿¡&quot; class=&quot;headerlink&quot; title=&quot;çº¿ç¨‹åŒæ­¥å’Œçº¿ç¨‹é€šä¿¡&quot;&gt;&lt;/a&gt;çº¿ç¨‹åŒæ­¥å’Œçº¿ç¨‹é€šä¿¡&lt;/h2&gt;&lt;h3 id=&quot;çº¿ç¨‹åŒæ­¥&quot;&gt;&lt;a href=&quot;#çº¿ç¨‹åŒæ­¥&quot; class=&quot;headerli</summary>
      
    
    
    
    <category term="CPP" scheme="http://example.com/categories/CPP/"/>
    
    
    <category term="CPP" scheme="http://example.com/tags/CPP/"/>
    
  </entry>
  
  <entry>
    <title>CS50è¯¾ç¨‹å­¦ä¹ ç¬”è®°</title>
    <link href="http://example.com/2023/10/08/cs50/"/>
    <id>http://example.com/2023/10/08/cs50/</id>
    <published>2023-10-07T19:26:51.000Z</published>
    <updated>2024-03-30T03:54:37.960Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Background"><a href="#Background" class="headerlink" title="Background"></a>Background</h2><h3 id="Computational-Thinking"><a href="#Computational-Thinking" class="headerlink" title="Computational Thinking"></a>Computational Thinking</h3><ul><li>input â€“&gt; black box â€“&gt; output</li><li>binary&#x2F;bit: A bit is a zero or one</li><li>text: using ASCII</li><li>Emojis: Unicode</li><li>RGB: three numbers</li><li>Images, Video and Sound are simply collections of RGB values</li></ul><h3 id="Algorithms"><a href="#Algorithms" class="headerlink" title="Algorithms"></a>Algorithms</h3><ul><li>Problem-solving is central to computer science and computer programming</li></ul><h3 id="Pseudocode"><a href="#Pseudocode" class="headerlink" title="Pseudocode"></a>Pseudocode</h3><ul><li>functionï¼špick up</li><li>conditionsï¼šif elseif</li><li>Boolean expression</li><li>loopsï¼šfor&#x2F;while</li></ul><h2 id="C"><a href="#C" class="headerlink" title="C"></a>C</h2><h3 id="compiler"><a href="#compiler" class="headerlink" title="compiler"></a>compiler</h3><p><strong>command line interface</strong>ï¼šCLIï¼Œ send commands to the computer</p><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;hello world\n&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">make hello</span><br><span class="line">./hello</span><br></pre></td></tr></table></figure><p><em>è¿™é‡Œå¹¶æ²¡æœ‰å†™makefileæ–‡ä»¶ï¼Œä¸ºä»€ä¹ˆå¯ä»¥ç›´æ¥ç¼–è¯‘å‘¢ï¼Ÿ</em><br><em>makeç¨‹åºé»˜è®¤ä¼šæ ¹æ®æºä»£ç æ–‡ä»¶çš„åç¼€åï¼Œè‡ªåŠ¨ç”Ÿæˆå¹¶ä½¿ç”¨ä¸€ä¸ªé»˜è®¤çš„Makefileè§„åˆ™è¿›è¡Œç¼–è¯‘ã€‚å¯¹äºcè¯­è¨€çš„æºä»£ç ï¼Œä¼šæœ‰ä¸€ä¸ªé»˜è®¤è§„åˆ™ï¼Œç±»ä¼¼å¦‚ä¸‹ï¼š</em></p><figure class="highlight makefile"><table><tr><td class="code"><pre><span class="line">%.o : %.c <span class="comment"># % æ˜¯é€šé…ç¬¦ï¼ŒåŒ¹é…ä»»æ„å­—ç¬¦ä¸²ï¼ŒåŒ¹é…æ‰€æœ‰.cç»“å°¾çš„æ–‡ä»¶ï¼Œç”Ÿæˆä»¥.oç»“å°¾çš„ç›®æ ‡æ–‡ä»¶</span></span><br><span class="line">    <span class="variable">$(CC)</span> <span class="variable">$(CFLAGS)</span> -c <span class="variable">$&lt;</span> -o <span class="variable">$@</span> <span class="comment"># $(CC) å˜é‡ï¼Œä½¿ç”¨CCç¼–è¯‘å™¨ã€‚ $(CFLAGS)ç¼–è¯‘å‚æ•°ï¼Œ -cè¡¨ç¤ºè¿›è¡Œç¼–è¯‘è€Œä¸é“¾æ¥ï¼Œ $&lt; å–å‡ºç¬¬ä¸€ä¸ªå‰ç½®æ–‡ä»¶çš„åå­—ï¼Œå³.cæ–‡ä»¶ï¼Œ-oæŒ‡å®šè¾“å‡ºç›®æ ‡æ–‡ä»¶ï¼Œ&amp;@ å–å‡ºç›®æ ‡æ–‡ä»¶çš„åå­—ï¼Œæ—¢.oæ–‡ä»¶</span></span><br></pre></td></tr></table></figure><p>è¿™é‡Œæåˆ°ä¸€ä¸ªè¿›è¡Œç¼–è¯‘è€Œä¸é“¾æ¥ã€‚å›é¡¾ä¸€ä¸‹cè¯­è¨€ç¼–è¯‘çš„è¿‡ç¨‹</p><ol><li>é¢„å¤„ç†ï¼Œç”Ÿæˆæ‰©å±•åçš„.iæ–‡ä»¶ã€‚åˆ é™¤æ‰€æœ‰æ³¨é‡Šã€#define å®å±•å¼€ã€æ–‡ä»¶åŒ…å« #include&lt;æ–‡ä»¶å&gt;</li><li>ç¼–è¯‘ï¼Œæ±‡ç¼–ä»£ç æ–‡ä»¶.sã€‚ä¼šè¿›è¡Œè¯­æ³•æ£€æŸ¥</li><li>ç»„è£…ã€‚å°†æ±‡ç¼–æ–‡ä»¶è½¬åŒ–ä¸ºæœºå™¨ç ã€‚ç”Ÿæˆ.oæ–‡ä»¶</li><li>é“¾æ¥ã€‚é“¾æ¥æ˜¯å°†åº“æ–‡ä»¶åŒ…å«åœ¨æˆ‘ä»¬çš„ç¨‹åºä¸­çš„è¿‡ç¨‹ã€‚ç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶.out</li></ol><p><strong>é™æ€æˆå‘˜å˜é‡æ˜¯åœ¨å“ªä¸€ä¸ªé˜¶æ®µè¢«åˆå§‹åŒ–çš„å‘¢ï¼Ÿ</strong></p><p><em>æˆ‘ä»¬éƒ½çŸ¥é“é™æ€æˆå‘˜å˜é‡æ˜¯åœ¨è¿è¡Œ<code>main</code>å‡½æ•°å‰åˆå§‹åŒ–ï¼Œé‚£ä¹ˆç©¶ç«Ÿæ˜¯åœ¨ç¼–è¯‘çš„å“ªä¸€ä¸ªé˜¶æ®µå‘¢ï¼Ÿ</em></p><ol><li>å®šä¹‰åœ¨ç±»å†…éƒ¨çš„é™æ€æˆå‘˜å˜é‡,å…¶åˆå§‹åŒ–æ˜¯åœ¨ç¼–è¯‘æœŸåˆæœŸå®Œæˆçš„ã€‚</li><li>å®šä¹‰åœ¨ç±»å¤–éƒ¨çš„é™æ€æˆå‘˜å˜é‡,å…¶åˆå§‹åŒ–æ˜¯åœ¨é“¾æ¥é˜¶æ®µå®Œæˆçš„ã€‚</li></ol><p>åŒºåˆ«åœ¨äº:</p><p>å¯¹äºç±»å†…éƒ¨å®šä¹‰çš„é™æ€æˆå‘˜å˜é‡,ç¼–è¯‘å™¨å¯ä»¥åœ¨ç¼–è¯‘å½“å‰ç±»çš„å®šä¹‰æ—¶ç›´æ¥åˆå§‹åŒ–å®ƒã€‚</p><p>è€Œå¯¹äºç±»å¤–éƒ¨å®šä¹‰çš„é™æ€æˆå‘˜å˜é‡,éœ€è¦åˆ°é“¾æ¥é˜¶æ®µä¸åŒçš„ç›®æ ‡æ–‡ä»¶åˆå¹¶æ—¶,ç”±é“¾æ¥å™¨å®Œæˆåˆå§‹åŒ–æ“ä½œã€‚</p><p><strong>é¢„ç¼–è¯‘é˜¶æ®µï¼Œç¼–è¯‘å™¨ä¼šæŠŠ#includeåŒ…å«çš„å¤´æ–‡ä»¶å†…å®¹å±•å¼€Inlineï¼Œä½†æ˜¯å¯¹äºlibåº“çš„å¼•ç”¨åˆ™ä¸ä¼šå±•å¼€ï¼Œè€Œæ˜¯ä¿ç•™è¯¥å¼•ç”¨ã€‚çœŸæ­£ä½¿ç”¨åº“é‡Œçš„ç›®æ ‡æ–‡ä»¶æ˜¯åœ¨é“¾æ¥é˜¶æ®µã€‚ç”±é“¾æ¥å™¨è§£æå¼•ç”¨ï¼Œå¹¶ä»å¤–éƒ¨åº“è·å–ç›®æ ‡ä»£ç è¿›è¡Œè¿æ¥ã€‚</strong></p><h2 id="Algorithm"><a href="#Algorithm" class="headerlink" title="Algorithm"></a>Algorithm</h2><ul><li>linear and binary search</li><li>data structures</li><li>sorting</li><li>recursion</li></ul><h2 id="Memory"><a href="#Memory" class="headerlink" title="Memory"></a>Memory</h2><p><strong>å†…å­˜åœ°å€ä¸ºä»€ä¹ˆç”¨16è¿›åˆ¶å­˜æ”¾ï¼Ÿ</strong></p><ol><li>ç´§å‡‘è¡¨ç¤ºï¼šä½¿ç”¨å°½å¯èƒ½å°‘çš„æ•°å­—æ¥è¡¨ç¤ºè¾ƒå¤§çš„å†…å­˜ç©ºé—´</li><li>ä¸CPUå¯»å€åŒ¹é…ï¼š CPUä½¿ç”¨æ€»çº¿åœ°å€çº¿è¡¨ç¤ºå†…å­˜åœ°å€ï¼Œåœ°å€çº¿æ•°é‡æ˜¯2çš„æŒ‡æ•°å€ï¼ˆå¦‚8æ¡ã€16æ¡ï¼‰ï¼Œè¿™ä¸16è¿›åˆ¶è¡¨ç¤ºæ˜¯åŒ¹é…çš„</li><li>è½¬æ¢ä¸ºäºŒè¿›åˆ¶æ–¹ä¾¿ï¼Œ16è¿›åˆ¶ä¸­çš„æ¯ä¸€ä¸ªæ°å¥½å¯¹åº”2è¿›åˆ¶ä¸­çš„4ä½ï¼Œå¯ä»¥éå¸¸æ–¹ä¾¿çš„è½¬æ¢ä¸ºäºŒè¿›åˆ¶æ•°ã€‚</li></ol><h3 id="pointer"><a href="#pointer" class="headerlink" title="pointer"></a>pointer</h3><p>æŒ‡é’ˆçš„æœ¬è´¨å°±æ˜¯ä¸€ä¸ªåœ°å€å˜é‡ã€‚æŒ‡å‘çš„æ˜¯æ“ä½œç³»ç»Ÿç»™æ¨¡æ‹Ÿå‡ºæ¥çš„è™šæ‹Ÿå†…å­˜ç©ºé—´çš„åœ°å€ã€‚</p><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span> a = <span class="number">50</span>;</span><br><span class="line"><span class="type">int</span> *p = &amp;a; <span class="comment">// pæ˜¯ä¸€ä¸ªæŒ‡é’ˆï¼Œ(*p)è¡¨ç¤ºè·å–æŒ‡é’ˆæ‰€æŒ‡å‘çš„å€¼ï¼Œ&amp;ç¬¦åˆä»£è¡¨å–åœ°å€</span></span><br></pre></td></tr></table></figure><p>åœ¨cè¯­è¨€ä¸­<br><code>string</code>ç±»å‹æœ¬è´¨å°±æ˜¯ä¸€ä¸ªæŒ‡é’ˆï¼Œä»¥<code>&#39;\0&#39;</code>ä½æ ‡è¯†ç¬¦ç»“å°¾ã€‚</p><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">char</span> *s = <span class="string">&quot;HI!&quot;</span>;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%c\n&quot;</span>,s[<span class="number">0</span>]); <span class="comment">// H</span></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%c\n&quot;</span>,s[<span class="number">1</span>]); <span class="comment">// I</span></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%c\n&quot;</span>,s[<span class="number">2</span>]); <span class="comment">// !</span></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%c\n&quot;</span>,s[<span class="number">3</span>]); <span class="comment">// </span></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;%c\n&quot;</span>,s[<span class="number">4</span>]); <span class="comment">// %</span></span><br></pre></td></tr></table></figure><p>ä¸ºä»€ä¹ˆæ²¡æœ‰æç¤ºæ•°ç»„è¶Šç•Œå‘¢ï¼Ÿ</p><p><em>åœ¨cè¯­è¨€ä¸­æ•°ç»„è¾¹ç•Œæ£€æŸ¥å¹¶ä¸æ˜¯å¼ºåˆ¶çš„ã€‚æ‰€ä»¥è¿™è®¿é—®è¶Šç•Œå¹¶æ²¡æœ‰æŠ¥é”™ï¼Œä½†æ˜¯å¯èƒ½ä¼šå¯¼è‡´å…¶ä»–é—®é¢˜ã€‚å½“è®¿é—®s[3]ä¹‹åçš„å€¼æ—¶ï¼Œè¯»å–çš„æ˜¯åƒåœ¾å†…å­˜çš„å€¼ã€‚</em></p><h3 id="Valgrind"><a href="#Valgrind" class="headerlink" title="Valgrind"></a>Valgrind</h3><p>valgrindæ˜¯ä¸€ä¸ªæ£€æŸ¥æ˜¯å¦æœ‰å†…å­˜æ³„æ¼çš„å·¥å…·ï¼Œæ¯”å¦‚ä½¿ç”¨mallocä½†æ˜¯æ²¡æœ‰ä½¿ç”¨freeã€‚</p><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">(<span class="type">void</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> *x = <span class="built_in">malloc</span>(<span class="number">3</span> * <span class="keyword">sizeof</span>(<span class="type">int</span>));</span><br><span class="line">    x[<span class="number">0</span>] = <span class="number">72</span>;</span><br><span class="line">    x[<span class="number">1</span>] = <span class="number">73</span>;</span><br><span class="line">    x[<span class="number">2</span>] = <span class="number">33</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>make test</code></p><p><code>valgrind --leak-check=full ./test</code></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">==61782== HEAP SUMMARY:</span><br><span class="line">==61782==     in use at exit: 12 bytes in 1 blocks</span><br><span class="line">==61782==   total heap usage: 1 allocs, 0 frees, 12 bytes allocated</span><br><span class="line">==61782== </span><br><span class="line">==61782== 12 bytes in 1 blocks are definitely lost in loss record 1 of 1</span><br><span class="line">==61782==    at 0x483B7F3: malloc (in /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_memcheck-amd64-linux.so)</span><br><span class="line">==61782==    by 0x10915E: main (in /home/kelin/cs50/test)</span><br></pre></td></tr></table></figure><p><strong>valgindå¯ä»¥æ£€æŸ¥å“ªäº›ç±»å‹çš„é”™è¯¯å‘¢ï¼Ÿ</strong></p><ol><li>å†…å­˜ç®¡ç†é”™è¯¯ï¼šè®¿é—®è¶Šç•Œã€æœªé‡Šæ”¾ã€è®¿é—®æœªåˆå§‹åŒ–çš„å†…å­˜ç­‰</li><li>çº¿ç¨‹é”™è¯¯ï¼šç¨‹åºæœªæ­£ç¡®joinçº¿ç¨‹ã€çº¿ç¨‹åŒæ­¥é”™è¯¯ï¼ˆå¤šä¸ªçº¿ç¨‹äº‰ç”¨èµ„æºæœªåŠ é”ï¼‰</li><li>I&#x2F;Oæ“ä½œé”™è¯¯ï¼šæ–‡ä»¶æè¿°ç¬¦æ³„æ¼ã€socketä½¿ç”¨é”™è¯¯</li><li>æœªå®šä¹‰è¡Œä¸ºï¼šè®¿é—®æœªåˆå§‹åŒ–çš„å˜é‡</li></ol><h3 id="åœ¨cè¯­è¨€ä¸­ï¼Œæ‰“å¼€æ–‡ä»¶æ˜¯å¦‚ä½•å®ç°çš„ï¼Ÿ"><a href="#åœ¨cè¯­è¨€ä¸­ï¼Œæ‰“å¼€æ–‡ä»¶æ˜¯å¦‚ä½•å®ç°çš„ï¼Ÿ" class="headerlink" title="åœ¨cè¯­è¨€ä¸­ï¼Œæ‰“å¼€æ–‡ä»¶æ˜¯å¦‚ä½•å®ç°çš„ï¼Ÿ"></a>åœ¨cè¯­è¨€ä¸­ï¼Œæ‰“å¼€æ–‡ä»¶æ˜¯å¦‚ä½•å®ç°çš„ï¼Ÿ</h3><ol><li>openç³»ç»Ÿè°ƒç”¨</li><li>åˆ†é…æ–‡ä»¶æè¿°ç¬¦ï¼šæ–‡ä»¶æè¿°ç¬¦æ˜¯å†…æ ¸ç”¨æ¥æ ‡è¯†è¿™ä¸ªæ–‡ä»¶æ‰“å¼€çŠ¶æ€çš„æ•´æ•°</li><li>æ›´æ–°æ–‡ä»¶è¡¨ï¼šå°†æ–‡ä»¶æè¿°ç¬¦æ”¾å…¥è¿›ç¨‹çš„æ–‡ä»¶æè¿°ç¬¦è¡¨ï¼Œè¯¥è¡¨ç»´æŠ¤äº†è¿›ç¨‹æ‰“å¼€æ–‡ä»¶çš„çŠ¶æ€</li><li>è¿”å›æ–‡ä»¶æè¿°ç¬¦ï¼šopenç³»ç»Ÿè°ƒç”¨è¿”å›æ–‡ä»¶æè¿°ç¬¦ç»™åº”ç”¨ç¨‹åº</li><li>read&#x2F;writeè°ƒç”¨</li><li>å…³é—­</li></ol><h2 id="network"><a href="#network" class="headerlink" title="network"></a>network</h2><p><strong><code>curl</code></strong></p><p>curlç”¨æ¥å‘é€å„ç§HTTPè¯·æ±‚ï¼Œè·å–æˆ–ä¼ è¾“æ•°æ®ã€‚</p><table><thead><tr><th>å‚æ•°</th><th>ä½œç”¨</th><th>ä¾‹å­</th></tr></thead><tbody><tr><td>-X</td><td>æŒ‡å®šhttpè¯·æ±‚çš„æ–¹æ³•</td><td>-X GET</td></tr><tr><td>-d</td><td>æŒ‡å®šå‘é€çš„æ•°æ®ä½“</td><td>-d â€˜data&#x3D;testâ€™</td></tr><tr><td>-I</td><td>åªæ˜¾ç¤ºå“åº”å¤´ä¿¡æ¯ï¼Œä¸æ˜¾ç¤ºå“åº”å†…å®¹</td><td></td></tr><tr><td>-w</td><td>å°†å“åº”å¤´ä¿¡æ¯ä¿å­˜åˆ°æ–‡ä»¶</td><td></td></tr><tr><td>-O</td><td>å°†æœåŠ¡å™¨è®¿é—®ä¿å­˜ä¸ºæ–‡ä»¶</td><td>curl -O example.com&#x2F;file1.zip</td></tr></tbody></table>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;Background&quot;&gt;&lt;a href=&quot;#Background&quot; class=&quot;headerlink&quot; title=&quot;Background&quot;&gt;&lt;/a&gt;Background&lt;/h2&gt;&lt;h3 id=&quot;Computational-Thinking&quot;&gt;&lt;a href=&quot;</summary>
      
    
    
    
    <category term="Operating System" scheme="http://example.com/categories/Operating-System/"/>
    
    
    <category term="note" scheme="http://example.com/tags/note/"/>
    
  </entry>
  
  <entry>
    <title>æ‰§è¡Œä¸€ä¸ªç¨‹åºçš„è¿‡ç¨‹</title>
    <link href="http://example.com/2023/08/25/exec-program/"/>
    <id>http://example.com/2023/08/25/exec-program/</id>
    <published>2023-08-25T02:09:26.000Z</published>
    <updated>2024-03-30T03:54:50.300Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å†¯è¯ºä¾æ›¼æ¨¡å‹"><a href="#å†¯è¯ºä¾æ›¼æ¨¡å‹" class="headerlink" title="å†¯è¯ºä¾æ›¼æ¨¡å‹"></a>å†¯è¯ºä¾æ›¼æ¨¡å‹</h2><ul><li>è¿ç®—å™¨</li><li>æ§åˆ¶å™¨</li><li>å­˜å‚¨å™¨</li><li>è¾“å…¥è®¾å¤‡</li><li>è¾“å‡ºè®¾å¤‡</li></ul><p><img src="/../imgs/image-44.png" alt="å›¾æ¥æºäºå°æ—coding"></p><h3 id="å†…å­˜"><a href="#å†…å­˜" class="headerlink" title="å†…å­˜"></a>å†…å­˜</h3><p>ç¨‹åºå’Œæ•°æ®éƒ½æ˜¯å­˜å‚¨åœ¨å†…å­˜ä¸­ï¼Œå­˜å‚¨çš„åŒºåŸŸæ˜¯çº¿æ€§çš„ã€‚å­˜å‚¨æ•°æ®çš„åŸºæœ¬å•ä½æ˜¯<strong>å­—èŠ‚ï¼ˆbyteï¼‰</strong>ï¼Œä¸€å­—èŠ‚ç­‰äº8ä½ï¼ˆbitï¼‰ï¼Œæ¯ä¸€ä¸ªå­—èŠ‚å¯¹åº”ç€ä¸€ä¸ªå†…å­˜åœ°å€ã€‚</p><h3 id="ä¸­å¤®å¤„ç†å™¨CPU"><a href="#ä¸­å¤®å¤„ç†å™¨CPU" class="headerlink" title="ä¸­å¤®å¤„ç†å™¨CPU"></a>ä¸­å¤®å¤„ç†å™¨CPU</h3><p>32ä½å’Œ64ä½CPUæœ€ä¸»è¦åŒºåˆ«åœ¨äºä¸€æ¬¡èƒ½è®¡ç®—å¤šå°‘å­—èŠ‚çš„æ•°æ®</p><ul><li>32ä½ä¸€æ¬¡èƒ½è®¡ç®—4ä¸ªå­—èŠ‚ï¼Œè™šæ‹Ÿå†…å­˜ç©ºé—´å¤§å°ä¸º$2^{32}$ï¼Œ4G</li><li>64ä½ä¸€æ¬¡èƒ½è®¡ç®—8ä¸ªå­—èŠ‚</li></ul><h4 id="å¯„å­˜å™¨"><a href="#å¯„å­˜å™¨" class="headerlink" title="å¯„å­˜å™¨"></a>å¯„å­˜å™¨</h4><ul><li>é€šç”¨å¯„å­˜å™¨ï¼šç”¨æ¥å­˜æ”¾éœ€è¦è¿›è¡Œè¿ç®—çš„æ•°æ®(æ‰§è¡Œå•å…ƒ)</li><li>ç¨‹åºè®¡æ•°å™¨ï¼šç”¨æ¥å­˜å‚¨CPUè¦æ‰§è¡Œä¸‹ä¸€æ¡æŒ‡ä»¤æ‰€åœ¨çš„å†…å­˜åœ°å€ï¼ˆæ­¤æ—¶æŒ‡ä»¤ä»ç„¶åœ¨å†…å­˜ä¸­ï¼‰ï¼ˆæ§åˆ¶å•å…ƒï¼‰</li><li>æŒ‡ä»¤å¯„å­˜å™¨ï¼šç”¨æ¥å­˜æ”¾æ­£åœ¨æ‰§è¡Œçš„æŒ‡ä»¤ï¼ˆæ§åˆ¶å•å…ƒï¼‰</li></ul><h3 id="å­˜å‚¨å™¨æ¥å£-Memory-Interface"><a href="#å­˜å‚¨å™¨æ¥å£-Memory-Interface" class="headerlink" title="å­˜å‚¨å™¨æ¥å£(Memory Interface)"></a>å­˜å‚¨å™¨æ¥å£(Memory Interface)</h3><p>ä¸å†…å­˜äº¤äº’,è¯»å†™æ•°æ®ã€‚</p><h4 id="æ§åˆ¶å•å…ƒ"><a href="#æ§åˆ¶å•å…ƒ" class="headerlink" title="æ§åˆ¶å•å…ƒ"></a>æ§åˆ¶å•å…ƒ</h4><p>æå–æŒ‡ä»¤ã€è§£ææŒ‡ä»¤ã€äº§ç”Ÿæ§åˆ¶ä¿¡å·ã€‚</p><h4 id="æ‰§è¡Œå•å…ƒ-Execution-Unit"><a href="#æ‰§è¡Œå•å…ƒ-Execution-Unit" class="headerlink" title="æ‰§è¡Œå•å…ƒ(Execution Unit)"></a>æ‰§è¡Œå•å…ƒ(Execution Unit)</h4><p>åŒ…å«ç®—æœ¯é€»è¾‘å•å…ƒALUå’Œé€šç”¨å¯„å­˜å™¨ç»„,æ‰§è¡Œå„ç§è¿ç®—å’Œæ•°æ®å¤„ç†ã€‚</p><h3 id="æ€»çº¿"><a href="#æ€»çº¿" class="headerlink" title="æ€»çº¿"></a>æ€»çº¿</h3><ul><li>åœ°å€æ€»çº¿ï¼šç”¨äºæŒ‡å®šCPUå°†è¦æ“ä½œçš„å†…å­˜åœ°å€</li><li>æ•°æ®æ€»çº¿ï¼šç”¨äºè¯»å†™å†…å­˜çš„æ•°æ®</li><li>æ§åˆ¶æ€»çº¿ï¼šç”¨äºå‘é€å’Œæ¥æ”¶ä¿¡å·</li></ul><p>é€šè¿‡åœ°å€æ€»çº¿æ¥æŒ‡å®šå†…å­˜å†…å­˜çš„åœ°å€â€“&gt;é€šè¿‡æ§åˆ¶æ€»çº¿æ§åˆ¶æ˜¯è¯»æˆ–å†™å‘½ä»¤â€“&gt;é€šè¿‡æ•°æ®æ€»çº¿ä¼ è¾“æ•°æ®ã€‚</p><h2 id="ç¨‹åºæ˜¯å¦‚ä½•æ‰§è¡Œçš„ï¼Ÿ"><a href="#ç¨‹åºæ˜¯å¦‚ä½•æ‰§è¡Œçš„ï¼Ÿ" class="headerlink" title="ç¨‹åºæ˜¯å¦‚ä½•æ‰§è¡Œçš„ï¼Ÿ"></a>ç¨‹åºæ˜¯å¦‚ä½•æ‰§è¡Œçš„ï¼Ÿ</h2><p><img src="/../imgs/image-45.png"></p><p>æŒ‡ä»¤ï¼šä¸€ä¸²äºŒè¿›åˆ¶æ•°å­—çš„æœºå™¨ç ï¼Œä¸åŒçš„CPUæœ‰ä¸åŒçš„æŒ‡ä»¤é›†</p><p><strong>æŒ‡ä»¤æ˜¯å­˜æ”¾åœ¨è™šæ‹Ÿå†…å­˜é‡Œè¿˜æ˜¯ç‰©ç†å†…å­˜ä¸­ï¼Ÿ</strong></p><p>è™šæ‹Ÿå†…å­˜ä¸ºæ¯ä¸ªè¿›ç¨‹æä¾›ä¸€ç‰‡è¿ç»­çš„è™šæ‹Ÿåœ°å€ç©ºé—´ï¼Œå„è¿›ç¨‹çš„è™šæ‹Ÿåœ°å€ç©ºé—´æ˜¯ç‹¬ç«‹çš„ï¼ŒæŒ‡ä»¤ä¸æ•°æ®ä½äºä¸åŒè¿›ç¨‹çš„è™šæ‹Ÿåœ°å€ç©ºé—´ä¸­ï¼Œå› æ­¤å¤šä¸ªè¿›ç¨‹å…±åŒæ‰§è¡Œæ—¶ï¼Œä»–ä»¬çš„æŒ‡ä»¤é›†ä¸ä¼šäº¤å‰ã€‚</p><p><strong>é‚£ä¹ˆç¨‹åºè®¡æ•°å™¨åŠ 1çš„æ—¶å€™ï¼Œæ˜¯åŠ çš„è™šæ‹Ÿå†…å­˜è¿˜æ˜¯å®é™…å†…å­˜ï¼ŸCPUç›´æ¥æ“ä½œçš„æ˜¯å®é™…å†…å­˜è¿˜æ˜¯è™šæ‹Ÿå†…å­˜ï¼Ÿ</strong></p><p>ç¨‹åºè®¡æ•°å™¨åŠ 1æ—¶,å®ƒåŠ çš„éƒ½æ˜¯è™šæ‹Ÿåœ°å€ã€‚CPUåœ¨æ‰§è¡Œç¨‹åºæ—¶,ç›´æ¥æ“ä½œå’Œè®¿é—®çš„ä¹Ÿéƒ½æ˜¯è™šæ‹Ÿåœ°å€,è€Œä¸æ˜¯å®é™…ç‰©ç†åœ°å€ã€‚</p><ol><li>CPUé€å‡ºçš„ä¸‹ä¸€æ¡æŒ‡ä»¤è™šæ‹Ÿåœ°å€åˆ°MMU</li><li>MMUæ ¹æ®é¡µè¡¨æŸ¥æ‰¾è™šæ‹Ÿåœ°å€åˆ°ç‰©ç†åœ°å€çš„æ˜ å°„</li><li>è‹¥å¯¹åº”é¡µä¸åœ¨ç‰©ç†å†…å­˜ï¼Œåˆ™è§¦å‘ç¼ºé¡µä¸­æ–­ï¼Œoså°†å…¶ä»ç£ç›˜æ¢å…¥</li><li>MMUæœ€ç»ˆå°†è™šæ‹Ÿåœ°å€ç¿»è¯‘ä¸ºç‰©ç†åœ°å€ï¼Œä»ç‰©ç†åœ°å€ä¸­è¯»å–æŒ‡ä»¤åï¼Œå°†æŒ‡ä»¤å‘é€è‡³CPU</li><li>CPUæ‰§è¡Œè¯¥æŒ‡ä»¤</li><li>ç¨‹åºè®¡æ•°å™¨ä¸­çš„è™šæ‹Ÿåœ°å€+1</li></ol><h3 id="å¯¹äºä¸€ä¸ªC-ç¨‹åºè€Œè¨€ï¼Œæ˜¯å¦‚ä½•æŠŠä»£ç å˜æˆæŒ‡ä»¤é›†çš„ï¼Ÿ"><a href="#å¯¹äºä¸€ä¸ªC-ç¨‹åºè€Œè¨€ï¼Œæ˜¯å¦‚ä½•æŠŠä»£ç å˜æˆæŒ‡ä»¤é›†çš„ï¼Ÿ" class="headerlink" title="å¯¹äºä¸€ä¸ªC++ç¨‹åºè€Œè¨€ï¼Œæ˜¯å¦‚ä½•æŠŠä»£ç å˜æˆæŒ‡ä»¤é›†çš„ï¼Ÿ"></a>å¯¹äºä¸€ä¸ªC++ç¨‹åºè€Œè¨€ï¼Œæ˜¯å¦‚ä½•æŠŠä»£ç å˜æˆæŒ‡ä»¤é›†çš„ï¼Ÿ</h3><h4 id="é¢„å¤„ç†-Preprocessing"><a href="#é¢„å¤„ç†-Preprocessing" class="headerlink" title="é¢„å¤„ç†(Preprocessing)"></a>é¢„å¤„ç†(Preprocessing)</h4><p>é¢„ç¼–è¯‘å™¨å¤„ç†å¤´æ–‡ä»¶åŒ…å«ã€å®å®šä¹‰å±•å¼€ç­‰é¢„å¤„ç†å·¥ä½œ,ç”Ÿæˆæ‰©å±•åçš„æºä»£ç ã€‚<code>#define</code></p><h4 id="ç¼–è¯‘-Compilation"><a href="#ç¼–è¯‘-Compilation" class="headerlink" title="ç¼–è¯‘(Compilation)"></a>ç¼–è¯‘(Compilation)</h4><p>ç¼–è¯‘å™¨å°†é¢„å¤„ç†åçš„C++æºä»£ç ç¼–è¯‘æˆæ±‡ç¼–è¯­è¨€ã€‚è¿™ä¸ªè¿‡ç¨‹åŒ…æ‹¬è¯æ³•åˆ†æã€è¯­æ³•åˆ†æã€è¯­ä¹‰åˆ†æã€ä¸­é—´ä»£ç ç”Ÿæˆã€ç›®æ ‡ä»£ç ç”Ÿæˆç­‰æ­¥éª¤ã€‚å†…è”å‡½æ•°ä¼šè¢«ç›´æ¥æ’å…¥åˆ°æ¯ä¸€ä¸ªè°ƒç”¨ç‚¹ï¼Œçœå»äº†å‡½æ•°è°ƒç”¨çš„è¿‡ç¨‹ã€‚</p><h4 id="æ±‡ç¼–-Assembly"><a href="#æ±‡ç¼–-Assembly" class="headerlink" title="æ±‡ç¼–(Assembly)"></a>æ±‡ç¼–(Assembly)</h4><p>æ±‡ç¼–ç¨‹åºå°†æ±‡ç¼–è¯­è¨€è½¬æ¢æˆæœºå™¨è¯­è¨€,ç”Ÿæˆç›®æ ‡æ–‡ä»¶ã€‚</p><h4 id="é“¾æ¥-Linking"><a href="#é“¾æ¥-Linking" class="headerlink" title="é“¾æ¥(Linking)"></a>é“¾æ¥(Linking)</h4><p>é“¾æ¥å™¨å°†å¤šä¸ªç›®æ ‡æ–‡ä»¶å’Œç³»ç»Ÿåº“é“¾æ¥ç”Ÿæˆå®Œæ•´çš„å¯æ‰§è¡Œç¨‹åºã€‚</p><p>åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­,C++æºä»£ç ç»è¿‡ç¼–è¯‘å™¨çš„ç¼–è¯‘å’Œæ±‡ç¼–ç¨‹åºçš„æ±‡ç¼–,æœ€ç»ˆè¢«è½¬æ¢æˆæœºå™¨æŒ‡ä»¤,è¿™äº›æŒ‡ä»¤ä¿å­˜åœ¨å¯æ‰§è¡Œæ–‡ä»¶çš„ä»£ç æ®µ,å¯ä»¥ç›´æ¥è¢«CPUæ‰§è¡Œã€‚</p><h3 id="ç¼–è¯‘å‰å’Œç¼–è¯‘åä»£ç æ˜¯å­˜æ”¾åœ¨å“ªé‡Œï¼Ÿ"><a href="#ç¼–è¯‘å‰å’Œç¼–è¯‘åä»£ç æ˜¯å­˜æ”¾åœ¨å“ªé‡Œï¼Ÿ" class="headerlink" title="ç¼–è¯‘å‰å’Œç¼–è¯‘åä»£ç æ˜¯å­˜æ”¾åœ¨å“ªé‡Œï¼Ÿ"></a>ç¼–è¯‘å‰å’Œç¼–è¯‘åä»£ç æ˜¯å­˜æ”¾åœ¨å“ªé‡Œï¼Ÿ</h3><h4 id="ç¼–è¯‘å‰"><a href="#ç¼–è¯‘å‰" class="headerlink" title="ç¼–è¯‘å‰:"></a>ç¼–è¯‘å‰:</h4><p>æºä»£ç ä»¥æ–‡æœ¬æ–‡ä»¶çš„å½¢å¼å­˜å‚¨åœ¨æ–‡ä»¶ç³»ç»Ÿä¸­,ä½¿ç”¨é«˜çº§è¯­è¨€ç¼–å†™,å¯¹äººæ›´å‹å¥½ã€‚</p><p>æºä»£ç åŒ…å«äº†æ•°æ®ç»“æ„å®šä¹‰ã€ç®—æ³•æµç¨‹ã€ç¨‹åºé€»è¾‘ç­‰ä¿¡æ¯ã€‚ä½†ä¸èƒ½ç›´æ¥è¢«è®¡ç®—æœºæ‰§è¡Œã€‚</p><h4 id="ç¼–è¯‘åï¼š"><a href="#ç¼–è¯‘åï¼š" class="headerlink" title="ç¼–è¯‘åï¼š"></a>ç¼–è¯‘åï¼š</h4><p>ç»è¿‡ç¼–è¯‘å™¨ç¼–è¯‘å,ä¼šç”Ÿæˆæœºå™¨ä»£ç ,å­˜æ”¾åœ¨å¯æ‰§è¡Œæ–‡ä»¶çš„ä»£ç æ®µä¸­ã€‚</p><p>æœºå™¨ä»£ç ä½¿ç”¨æœºå™¨æŒ‡ä»¤ç»„æˆ,å¯ä»¥ç›´æ¥è¢«CPUæ‰§è¡Œã€‚</p><p>ä¸¾ä¸ªä¾‹å­ï¼šå½“æˆ‘è°ƒç”¨<code>new</code>å…³é”®å­—å»ä¸ºä¸€ä¸ªå¯¹è±¡åˆ†é…å†…å­˜æ—¶ï¼Œåœ¨ç¼–è¯‘å‰è¿™ä»…ä»…æ˜¯ä¸€ä¸ªæŠ½è±¡çš„æ¦‚å¿µï¼Œ<strong>å†…å­˜åˆ†é…æ˜¯åœ¨è¿è¡Œæ—¶å‘ç”Ÿçš„</strong>ã€‚</p><h3 id="åœ¨ç¼–è¯‘çš„æ—¶å€™ï¼Œç¼–è¯‘é¡ºåºæ˜¯æ€ä¹ˆæ ·çš„ï¼Ÿ"><a href="#åœ¨ç¼–è¯‘çš„æ—¶å€™ï¼Œç¼–è¯‘é¡ºåºæ˜¯æ€ä¹ˆæ ·çš„ï¼Ÿ" class="headerlink" title="åœ¨ç¼–è¯‘çš„æ—¶å€™ï¼Œç¼–è¯‘é¡ºåºæ˜¯æ€ä¹ˆæ ·çš„ï¼Ÿ"></a>åœ¨ç¼–è¯‘çš„æ—¶å€™ï¼Œç¼–è¯‘é¡ºåºæ˜¯æ€ä¹ˆæ ·çš„ï¼Ÿ</h3><p>ä»¥ä¸‹é¢çš„ä»£ç ä¸ºä¾‹ï¼š</p><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span> <span class="comment">// é¢„å¤„ç†é˜¶æ®µ</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Node</span>&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">Node</span>(<span class="type">int</span> val):<span class="built_in">val</span>(val)&#123;&#125; <span class="comment">// æ„é€ å‡½æ•°å’Œææ„å‡½æ•°æœºå™¨ç </span></span><br><span class="line">    ~<span class="built_in">Node</span>()&#123;&#125; <span class="comment">// </span></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">func</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="type">static</span> <span class="title">sFunc</span><span class="params">()</span></span>; <span class="comment">// æ²¡æœ‰thisæŒ‡é’ˆï¼Œæ‰€ä»¥åªèƒ½è°ƒç”¨é™æ€æˆå‘˜å˜é‡</span></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="type">int</span> val;</span><br><span class="line">    <span class="type">const</span> <span class="type">int</span> c_val = <span class="number">1</span>;</span><br><span class="line">    <span class="type">static</span> <span class="type">int</span> s_val = <span class="number">1</span>; <span class="comment">// æ‰€æœ‰å®ä¾‹å…±äº«ï¼Œä¸å±äºç±»</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="function">Node <span class="title">node</span><span class="params">(<span class="number">1</span>)</span></span>;</span><br><span class="line">    Node * node_ptr = <span class="keyword">new</span> <span class="built_in">Node</span>(<span class="number">1</span>);</span><br><span class="line">    node.<span class="built_in">func</span>();</span><br><span class="line">    node_ptr.<span class="built_in">func</span>();</span><br><span class="line">    <span class="keyword">delete</span> node_ptr;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="mainå‡½æ•°æ‰§è¡Œä¹‹å‰ï¼Œéœ€è¦åšä»€ä¹ˆï¼Ÿ"><a href="#mainå‡½æ•°æ‰§è¡Œä¹‹å‰ï¼Œéœ€è¦åšä»€ä¹ˆï¼Ÿ" class="headerlink" title="mainå‡½æ•°æ‰§è¡Œä¹‹å‰ï¼Œéœ€è¦åšä»€ä¹ˆï¼Ÿ"></a>mainå‡½æ•°æ‰§è¡Œä¹‹å‰ï¼Œéœ€è¦åšä»€ä¹ˆï¼Ÿ</h3><ol><li>è®¾ç½®æ ˆæŒ‡é’ˆ</li><li>åˆå§‹åŒ–é™æ€staticå˜é‡å’Œglobalå˜é‡ã€‚é™æ€ç±»çš„æ„é€ å‡½æ•°åœ¨è¿™é‡Œè¢«è°ƒç”¨</li><li>åˆå§‹åŒ–å…¨å±€å˜é‡ï¼Œå…¨å±€å¯¹è±¡çš„æ„é€ å‡½æ•°ä¹Ÿåœ¨mainä¹‹å‰è¢«è°ƒç”¨</li><li>å°†mainå‡½æ•°æ‰€éœ€å‚æ•°ä¼ é€’ç»™mainå‡½æ•°</li></ol><h3 id="åœ¨mainå‡½æ•°ä¹‹åï¼Œéœ€è¦æ‰§è¡Œä»€ä¹ˆï¼Ÿ"><a href="#åœ¨mainå‡½æ•°ä¹‹åï¼Œéœ€è¦æ‰§è¡Œä»€ä¹ˆï¼Ÿ" class="headerlink" title="åœ¨mainå‡½æ•°ä¹‹åï¼Œéœ€è¦æ‰§è¡Œä»€ä¹ˆï¼Ÿ"></a>åœ¨mainå‡½æ•°ä¹‹åï¼Œéœ€è¦æ‰§è¡Œä»€ä¹ˆï¼Ÿ</h3><ol><li>å…¨å±€å¯¹è±¡çš„ææ„å‡½æ•°</li><li>å¯ä»¥ä½¿ç”¨<code>atexit</code>æ³¨å†Œä¸€ä¸ªå‡½æ•°ï¼Œä¼šåœ¨mainä¹‹åæ‰§è¡Œ</li></ol><h3 id="é™æ€æˆå‘˜å‡½æ•°ä¹Ÿæ˜¯æ”¾åœ¨ä»£ç åŒºçš„å—ï¼Ÿ"><a href="#é™æ€æˆå‘˜å‡½æ•°ä¹Ÿæ˜¯æ”¾åœ¨ä»£ç åŒºçš„å—ï¼Ÿ" class="headerlink" title="é™æ€æˆå‘˜å‡½æ•°ä¹Ÿæ˜¯æ”¾åœ¨ä»£ç åŒºçš„å—ï¼Ÿ"></a>é™æ€æˆå‘˜å‡½æ•°ä¹Ÿæ˜¯æ”¾åœ¨ä»£ç åŒºçš„å—ï¼Ÿ</h3><p>æ˜¯çš„ã€‚ç¼–è¯‘å™¨ä¼šä¸ºé™æ€æˆå‘˜å‡½æ•°ç”Ÿæˆå¯¹åº”çš„æœºå™¨ä»£ç ï¼Œä¸éœ€è¦å®ä¾‹åŒ–ç±»å°±å¯ä»¥è°ƒç”¨ï¼Œæœºå™¨ä»£ç ç‹¬ç«‹ç”Ÿæˆï¼Œä¸ä¾èµ–ä»»ä½•å®ä¾‹ã€‚</p><h3 id="å‡½æ•°è°ƒç”¨æ—¶æ˜¯å¦‚ä½•ä¼ é€’å‚æ•°çš„ï¼Ÿ"><a href="#å‡½æ•°è°ƒç”¨æ—¶æ˜¯å¦‚ä½•ä¼ é€’å‚æ•°çš„ï¼Ÿ" class="headerlink" title="å‡½æ•°è°ƒç”¨æ—¶æ˜¯å¦‚ä½•ä¼ é€’å‚æ•°çš„ï¼Ÿ"></a>å‡½æ•°è°ƒç”¨æ—¶æ˜¯å¦‚ä½•ä¼ é€’å‚æ•°çš„ï¼Ÿ</h3><ol><li>æŠŠå‚æ•°çš„å€¼ä»å¯„å­˜å™¨æˆ–å†…å­˜åŠ è½½åˆ°CPUçš„é€šç”¨å¯„å­˜å™¨ä¸­ã€‚</li><li>è°ƒç”¨æŒ‡ä»¤å°†ç¨‹åºæ§åˆ¶æµè·³è½¬åˆ°å‡½æ•°ä»£ç åœ°å€ã€‚</li><li>åœ¨è·³è½¬å‰,è°ƒç”¨æŒ‡ä»¤ä¼šå°†è¿”å›åœ°å€ç­‰å¯„å­˜å™¨ä¿¡æ¯å‹å…¥è°ƒç”¨æ ˆ,ç”¨äºä¿ç•™è°ƒç”¨ç¯å¢ƒã€‚</li><li>è·³è½¬æ‰§è¡Œå‡½æ•°ä»£ç ,å‡½æ•°ä¸­çš„å±€éƒ¨å˜é‡ä¹Ÿå¯èƒ½åœ¨æ ˆä¸Šåˆ†é…ã€‚</li><li>åœ¨å‡½æ•°æ‰§è¡Œå‰,æ ¹æ®è°ƒç”¨çº¦å®šä»å¯„å­˜å™¨æˆ–æ ˆç©ºé—´ä¸­è¯»å–å‚æ•°å€¼ã€‚</li><li>å‡½æ•°æ‰§è¡Œå®Œå,ä½¿ç”¨è¿”å›æŒ‡ä»¤è·³å›è°ƒç”¨ç‚¹ã€‚</li><li>è¿”å›å‰ä¾ç…§è°ƒç”¨çº¦å®šå°†è¿”å›å€¼å†™å…¥å¯„å­˜å™¨æˆ–å†…å­˜ã€‚</li><li>è¿”å›å,è°ƒç”¨æ ˆæ¢å¤,ç»§ç»­æ‰§è¡Œè°ƒç”¨ä»£ç ã€‚</li></ol>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;å†¯è¯ºä¾æ›¼æ¨¡å‹&quot;&gt;&lt;a href=&quot;#å†¯è¯ºä¾æ›¼æ¨¡å‹&quot; class=&quot;headerlink&quot; title=&quot;å†¯è¯ºä¾æ›¼æ¨¡å‹&quot;&gt;&lt;/a&gt;å†¯è¯ºä¾æ›¼æ¨¡å‹&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;è¿ç®—å™¨&lt;/li&gt;
&lt;li&gt;æ§åˆ¶å™¨&lt;/li&gt;
&lt;li&gt;å­˜å‚¨å™¨&lt;/li&gt;
&lt;li&gt;è¾“å…¥è®¾å¤‡&lt;/li&gt;</summary>
      
    
    
    
    <category term="Operating System" scheme="http://example.com/categories/Operating-System/"/>
    
    
  </entry>
  
  <entry>
    <title>CMU15-445 Concurrency Control</title>
    <link href="http://example.com/2023/08/21/Concurrency-Control/"/>
    <id>http://example.com/2023/08/21/Concurrency-Control/</id>
    <published>2023-08-20T20:39:32.000Z</published>
    <updated>2024-03-30T03:53:47.060Z</updated>
    
    <content type="html"><![CDATA[<h2 id="project4éœ€è¦å®ç°çš„å†…å®¹"><a href="#project4éœ€è¦å®ç°çš„å†…å®¹" class="headerlink" title="project4éœ€è¦å®ç°çš„å†…å®¹"></a>project4éœ€è¦å®ç°çš„å†…å®¹</h2><p><a href="https://15445.courses.cs.cmu.edu/fall2022/project4/">projectä»»åŠ¡é“¾æ¥</a></p><h3 id="Lock-Managerï¼š"><a href="#Lock-Managerï¼š" class="headerlink" title="Lock Managerï¼š"></a>Lock Managerï¼š</h3><p><code>src/include/concurrency/lock_manager.h</code></p><p><code>concurrency/lock_manager.cpp</code></p><h4 id="Lock-Managerçš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#Lock-Managerçš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="Lock Managerçš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ"></a>Lock Managerçš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ</h4><p>Lock Manager çš„ä½œç”¨æ˜¯å¤„ç†äº‹åŠ¡å‘é€çš„é”è¯·ã€‚äº‹åŠ¡åœ¨è¢«å…è®¸è®¿é—®æŸä¸ªæ•°æ®é¡¹ä¹‹å‰,éœ€è¦å…ˆå‘é”ç®¡ç†å™¨å‘å‡ºé”è¯·æ±‚ã€‚é”ç®¡ç†å™¨å°†å‘è°ƒç”¨äº‹åŠ¡æˆäºˆé”,é˜»å¡è¯¥äº‹åŠ¡,æˆ–è€…ä¸­æ­¢å®ƒã€‚</p><p>ä¾‹å¦‚æœ‰ä¸€ä¸ª SeqScan ç®—å­éœ€è¦æ‰«ææŸå¼ è¡¨ï¼Œå…¶æ‰€åœ¨äº‹åŠ¡å°±éœ€è¦å¯¹è¿™å¼ è¡¨åŠ  S é”ã€‚è€ŒåŠ è¯»é”è¿™ä¸ªåŠ¨ä½œéœ€è¦ç”± Lock Manager æ¥å®Œæˆã€‚äº‹åŠ¡å…ˆå¯¹å‘ Lock Manager å‘èµ·åŠ  S é”è¯·æ±‚ï¼ŒLock Manager å¯¹è¯·æ±‚è¿›è¡Œå¤„ç†ã€‚å¦‚æœå‘ç°æ­¤æ—¶æ²¡æœ‰å…¶ä»–çš„é”ä¸è¿™ä¸ªè¯·æ±‚å†²çªï¼Œåˆ™æˆäºˆå…¶ S é”å¹¶è¿”å›ã€‚å¦‚æœå­˜åœ¨å†²çªï¼Œä¾‹å¦‚å…¶ä»–äº‹åŠ¡æŒæœ‰è¿™å¼ è¡¨çš„ X é”ï¼Œåˆ™ Lock Manager ä¼šé˜»å¡æ­¤è¯·æ±‚ï¼ˆå³é˜»å¡æ­¤äº‹åŠ¡ï¼‰ï¼Œç›´åˆ°èƒ½å¤Ÿæˆäºˆ S é”ï¼Œå†æˆäºˆå¹¶è¿”å›ã€‚</p><p>æ•´ä¸ªç³»ç»Ÿå°†å…·æœ‰ä¸€ä¸ªå…¨å±€çš„é”ç®¡ç†å™¨(ç±»ä¼¼äºç¼“å†²æ± ç®¡ç†å™¨)ã€‚TableHeapå’ŒExecutorç±»å°†ä½¿ç”¨ä½ å®ç°çš„é”ç®¡ç†å™¨åœ¨äº‹åŠ¡æƒ³è®¿é—®æˆ–ä¿®æ”¹ä¸€ä¸ªå…ƒç»„è®°å½•æ—¶è·å–è¡Œé”(é€šè¿‡è®°å½•ID RID)ã€‚</p><p>è¿™ä¸ªä»»åŠ¡è¦æ±‚å®ç°ä¸€ä¸ªæ”¯æŒä¸‰ç§å¸¸è§éš”ç¦»çº§åˆ«çš„è¡¨çº§é”å’Œè¡Œçº§é”:READ_UNCOMMITTED, READ_COMMITTEDå’ŒREPEATABLE_READã€‚é”ç®¡ç†å™¨åº”è¯¥æ ¹æ®äº‹åŠ¡çš„éš”ç¦»çº§åˆ«æˆäºˆæˆ–é‡Šæ”¾é”ã€‚è¯·å‚è€ƒè¯¾ä»¶å¤ä¹ éš”ç¦»çº§åˆ«ã€‚</p><p>åœ¨ä»£ç åº“ä¸­,æä¾›äº†ä¸€ä¸ªTransactionä¸Šä¸‹æ–‡å¤„ç†(transaction.h),å…¶ä¸­åŒ…å«éš”ç¦»çº§åˆ«å±æ€§å’Œå®ƒæŒæœ‰çš„é”çš„ç›¸å…³ä¿¡æ¯ã€‚é”ç®¡ç†å™¨éœ€è¦æ£€æŸ¥äº‹åŠ¡çš„éš”ç¦»çº§åˆ«å¹¶å…¬å¼€åœ¨é”è¯·æ±‚ä¸Šçš„æ­£ç¡®è¡Œä¸ºã€‚ä»»ä½•å¤±è´¥çš„é”æ“ä½œéƒ½åº”å¯¼è‡´äº‹åŠ¡è¿›å…¥ABORTEDçŠ¶æ€(éšå¼ä¸­æ­¢)å¹¶æŠ›å‡ºå¼‚å¸¸ã€‚äº‹åŠ¡ç®¡ç†å™¨(transaction_manager.h)ä¼šè¿›ä¸€æ­¥æ•è·è¿™ä¸ªå¼‚å¸¸å¹¶å›æ»šäº‹åŠ¡æ‰§è¡Œçš„å†™æ“ä½œã€‚</p><h4 id="ä¸‰ç§éš”ç¦»çº§åˆ«çš„å®ç°"><a href="#ä¸‰ç§éš”ç¦»çº§åˆ«çš„å®ç°" class="headerlink" title="ä¸‰ç§éš”ç¦»çº§åˆ«çš„å®ç°"></a>ä¸‰ç§éš”ç¦»çº§åˆ«çš„å®ç°</h4><ul><li>READ_UNCOMMITEDåªæœ‰åœ¨éœ€è¦æ—¶ä¸Šå†™é”ã€‚</li><li>READ_COMMITTEDè¦è§£å†³è„è¯»çš„é—®é¢˜ï¼Œè§£å†³æ–¹æ¡ˆå°±æ˜¯è¯»æ—¶ä¸Šè¯»é”ï¼Œè¯»å®Œè§£è¯»é”ï¼›å†™æ—¶ä¸Šå†™é”ï¼Œä½†ç­‰åˆ°commitæ—¶æ‰è§£å†™é”ï¼›è¯»æ—¶ä¸Šè¯»é”ï¼Œè¯»å®Œè§£è¯»é”ã€‚è¿™æ ·ï¼Œæ°¸è¿œä¸ä¼šè¯»åˆ°æœªcommitçš„æ•°æ®ï¼Œå› ä¸ºä¸Šé¢æœ‰å†™é”ã€‚</li><li>REPEATABLE_READè¿›ä¸€æ­¥æ‰“é€ å¯é‡å¤è¯»ã€‚åŒä¸€äº‹åŠ¡è¯»ä¸¤æ¬¡æ•°æ®çš„ä¸­é€”ä¸æƒ³è¢«å…¶ä»–äº‹åŠ¡çš„å†™å¹²æ‰°ï¼Œè¿™å°±éœ€è¦ç”¨åˆ°å·§å¦™çš„äºŒæ®µå°é”åè®®ï¼ˆ2PLï¼‰äº†ï¼šäº‹åŠ¡åˆ†ä¸ºä¸¤ä¸ªé˜¶æ®µï¼ˆä¸è€ƒè™‘commit&#x2F;abortï¼‰ï¼Œä¸Šé”é˜¶æ®µ(GROWING)åªä¸Šé”ï¼Œè§£é”é˜¶æ®µ(SHINKING)åªè§£é”ã€‚è¿™æ ·ï¼Œç¬¬äºŒæ¬¡è¯»å–æ—¶ï¼Œå‰ä¸€æ¬¡è¯»å–çš„è¯»é”ä¸€å®šè¿˜åœ¨ï¼Œé¿å…äº†ä¸­é€”è¢«ä¿®æ”¹ã€‚</li></ul><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">REPEATABLE_READ:</span><br><span class="line">   The transaction is required to take all locks.</span><br><span class="line">   All locks are allowed in the GROWING state</span><br><span class="line">   No locks are allowed in the SHRINKING state</span><br><span class="line">   </span><br><span class="line">READ_COMMITTED:</span><br><span class="line">   The transaction is required to take all locks.</span><br><span class="line">   All locks are allowed in the GROWING state</span><br><span class="line">   Only IS, S locks are allowed in the SHRINKING state</span><br><span class="line">   </span><br><span class="line">READ_UNCOMMITTED:</span><br><span class="line">   The transaction is required to take only IX, X locks.</span><br><span class="line">   X, IX locks are allowed in the GROWING state.</span><br><span class="line">   S, IS, SIX locks are never allowed</span><br></pre></td></tr></table></figure><h4 id="å…·ä½“å®ç°"><a href="#å…·ä½“å®ç°" class="headerlink" title="å…·ä½“å®ç°"></a>å…·ä½“å®ç°</h4><p>ç”±äºå¯¹è¡Œæ·»åŠ S&#x2F;Xé”æ—¶ï¼Œéœ€è¦å¯¹åº”çš„å¯¹è¡Œæ‰€åœ¨çš„è¡¨æ·»åŠ IS&#x2F;IXé”ï¼Œæ‰€ä»¥éœ€è¦è®°å½•æ¯ä¸€ä¸ªè¡¨é‡Œæœ‰å“ªäº›è¡Œè¢«åŠ é”ã€‚</p><p>è¿™é‡Œç”¨ä¸€ä¸ªmapæ¥å®ç°å¯¹åº”è¡¨idå’Œè¡Œé›†åˆã€‚</p><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">/** LockManager: the set of row locks held by this transaction. */</span></span><br><span class="line">std::shared_ptr&lt;std::unordered_map&lt;<span class="type">table_oid_t</span>, std::unordered_set&lt;RID&gt;&gt;&gt; s_row_lock_set_;</span><br><span class="line">std::shared_ptr&lt;std::unordered_map&lt;<span class="type">table_oid_t</span>, std::unordered_set&lt;RID&gt;&gt;&gt; x_row_lock_set_;</span><br></pre></td></tr></table></figure><p><img src="/../imgs/image-43.png"></p><p><strong>è·å–è¡¨é”</strong></p><ol><li>åˆ¤æ–­é”è¯·æ±‚æ˜¯å¦åˆç†(å¦‚æœå½“å‰äº‹åŠ¡Abort&#x2F;Commitï¼Œæˆ–è€…åŠ é”ç±»å‹ä¸äº‹åŠ¡éš”ç¦»çº§åˆ«ä¸ç¬¦åˆï¼ŒæŠ›å¼‚å¸¸)</li><li>ä» <code>table_lock_map_</code> ä¸­è·å– table å¯¹åº”çš„ <code>lock request queue</code>ã€‚æ³¨æ„éœ€è¦å¯¹ map åŠ é”ï¼Œå¹¶ä¸”ä¸ºäº†æé«˜å¹¶å‘æ€§ï¼Œåœ¨è·å–åˆ° queue ä¹‹åç«‹å³é‡Šæ”¾ map çš„é”ã€‚è‹¥ queue ä¸å­˜åœ¨åˆ™åˆ›å»ºã€‚</li><li>åˆ¤æ–­ä¹‹å‰è¯¥äº‹åŠ¡æ˜¯å¦å¯¹è¿™ä¸ªè¡¨è¿›è¡ŒåŠ è¿‡é”</li><li>å¦‚æœä¹‹å‰åŠ è¿‡é”ï¼Œå‡çº§è¯¥é”ï¼ˆçº§åˆ«ä¸èƒ½æ¯”å½“å‰çš„é”çš„çº§åˆ«è¦ä½ä¸”ä¸èƒ½æœ‰å¦ä¸€ä¸ªäº‹åŠ¡ä¹Ÿåœ¨å¯¹è¿™ä¸ªè¡¨è¿›è¡Œå‡çº§ï¼‰ï¼Œåˆ›å»ºä¸€ä¸ªæ–°çš„LockRequestï¼ŒåŠ å…¥åˆ°é˜Ÿåˆ—å°¾éƒ¨</li><li>å°è¯•è·å–é”ï¼Œå¦‚æœ<code>GrantLock()</code>ä¸ºçœŸï¼Œå¯ä»¥è·å–é”ï¼Œå¦åˆ™å¾ªç¯ç­‰å¾…ï¼Œè¿™é‡Œä½¿ç”¨æ¡ä»¶å˜é‡<code>queue-&gt;cv_.wait(queue-&gt;latch_);</code>, å½“è¿™ä¸ªé”è¢«é‡Šæ”¾æ—¶ï¼Œä¼šå”¤é†’å½“å‰çº¿ç¨‹ï¼Œåˆ¤æ–­æ˜¯å¦èƒ½è·å–é”ã€‚</li></ol><p><strong>GrantLock()</strong></p><ol><li>åˆ¤æ–­å½“å‰çš„é”è¯·æ±‚æ˜¯å¦ä¸æ‰€æœ‰çš„<code>granted</code>çš„è¯·æ±‚å…¼å®¹</li><li>åˆ¤æ–­ä¼˜å…ˆçº§</li></ol><p>tipsï¼š</p><p>ä½¿ç”¨æ¡ä»¶å˜é‡å»é€šçŸ¥è¯·æ±‚é˜Ÿåˆ—ä¸Šç­‰å¾…çš„çº¿ç¨‹ã€‚</p><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">LockRequestQueue</span> &#123;</span><br><span class="line"> <span class="keyword">public</span>:</span><br><span class="line">  <span class="comment">/** List of lock requests for the same resource (table or row) */</span></span><br><span class="line">  std::list&lt;LockRequest *&gt; request_queue_;</span><br><span class="line">  <span class="comment">/** For notifying blocked transactions on this rid */</span></span><br><span class="line">  std::condition_variable cv_;</span><br><span class="line">  <span class="comment">/** txn_id of an upgrading transaction (if any) */</span></span><br><span class="line">  <span class="type">txn_id_t</span> upgrading_ = INVALID_TXN_ID;</span><br><span class="line">  <span class="comment">/** coordination */</span></span><br><span class="line">  std::mutex latch_;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p><strong>è§£è¡¨é”ï¼š</strong></p><ol><li>åˆ¤æ–­å¯ä»¥ä¸å¯ä»¥è§£é”ï¼šä¹‹å‰æ˜¯å¦åŠ è¿‡é”ï¼Œå¦‚æœæ˜¯è§£é”è¡¨é”ï¼Œè¦æ£€æµ‹è¯¥è¡¨ä¸­æœ‰æ²¡æœ‰è¡Œè¢«åŠ è¿‡é”</li><li>æ£€æŸ¥åœ¨å¯¹åº”éš”ç¦»çº§åˆ«ä¸‹æ˜¯å¦è¦è¿›å…¥ShrinkingçŠ¶æ€</li><li>åˆ é™¤é”</li></ol><p>è¡Œé”ä¸è¡¨é”ç±»ä¼¼ï¼Œè§£é”æ—¶ä¸éœ€è¦æ£€æŸ¥æ˜¯å¦æœ‰è¡¨é”ã€‚</p><h3 id="Deadlock-Detectionï¼š"><a href="#Deadlock-Detectionï¼š" class="headerlink" title="Deadlock Detectionï¼š"></a>Deadlock Detectionï¼š</h3><p>ä½¿ç”¨waits-for graph</p><ul><li>nodeï¼šäº‹åŠ¡</li><li>edgeï¼šTi to Tjè¡¨ç¤ºTiåœ¨ç­‰åˆ°Tjé‡Šæ”¾é”</li></ul><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"> <span class="comment">/** Waits-for graph representation. */</span></span><br><span class="line">std::unordered_map&lt;<span class="type">txn_id_t</span>, std::vector&lt;<span class="type">txn_id_t</span>&gt;&gt; waits_for_;</span><br></pre></td></tr></table></figure><p>å¹¶ä¸éœ€è¦æ—¶åˆ»ç»´æŠ¤wait forå›¾ï¼Œè€Œæ˜¯åœ¨æ­»é”æ£€æµ‹çº¿ç¨‹è¢«å”¤é†’çš„æ—¶å€™ï¼Œæ ¹æ®å½“å‰è¯·æ±‚é˜Ÿåˆ—æ„å»ºçš„wait forå›¾ï¼Œå†é€šè¿‡è¿™ä¸ªå›¾å»åˆ¤æ–­æ˜¯å¦å­˜åœ¨æ­»é”ã€‚</p><ul><li>å½“æ£€æµ‹åˆ°æœ‰åœˆæ—¶ï¼Œè¿™é‡Œé‡‡å–çš„victimç­–ç•¥æ˜¯æ‰¾åˆ°äº‹åŠ¡IDæœ€å¤§çš„è¿”å›ï¼Œå› ä¸ºè¿™ä¸ªäº‹åŠ¡æ˜¯æœ€å¹´è½»çš„ã€‚</li><li>é»˜è®¤çš„æ£€æµ‹æ—¶é—´æ˜¯50ms</li></ul><h3 id="Concurrent-Query-Execution"><a href="#Concurrent-Query-Execution" class="headerlink" title="Concurrent Query Execution"></a>Concurrent Query Execution</h3><p>è¿™é‡Œéœ€è¦ä¿®æ”¹ä¹‹å‰çš„ä¸‰ä¸ªç®—å­ï¼Œé¡ºåºæ‰«æã€æ’å…¥å’Œåˆ é™¤ã€‚</p><p>tipsï¼š</p><ul><li>æ·»åŠ è¡Œé”ä¹‹å‰éœ€è¦å¯¹ç›¸åº”çš„è¡¨æ·»åŠ æ„å‘é”</li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;project4éœ€è¦å®ç°çš„å†…å®¹&quot;&gt;&lt;a href=&quot;#project4éœ€è¦å®ç°çš„å†…å®¹&quot; class=&quot;headerlink&quot; title=&quot;project4éœ€è¦å®ç°çš„å†…å®¹&quot;&gt;&lt;/a&gt;project4éœ€è¦å®ç°çš„å†…å®¹&lt;/h2&gt;&lt;p&gt;&lt;a href=&quot;https://1</summary>
      
    
    
    
    <category term="DataBase" scheme="http://example.com/categories/DataBase/"/>
    
    
    <category term="CMU15-445" scheme="http://example.com/tags/CMU15-445/"/>
    
  </entry>
  
  <entry>
    <title>CMU15-445 Concurrency study note</title>
    <link href="http://example.com/2023/08/21/concurrency_notes/"/>
    <id>http://example.com/2023/08/21/concurrency_notes/</id>
    <published>2023-08-20T20:39:32.000Z</published>
    <updated>2024-03-30T03:53:43.410Z</updated>
    
    <content type="html"><![CDATA[<p>åœ¨åšproject4ä¹‹å‰ï¼Œæœ€å¥½æ˜¯å…ˆå­¦ä¹ è¯¾ä»¶å†…å®¹ã€‚<br><a href="https://15445.courses.cs.cmu.edu/fall2022/slides/15-concurrencycontrol.pdf">è¯¾ä»¶åœ°å€</a></p><p>Concurrency Controlï¼šavoid losting updates</p><p>Recoveryï¼š Durability</p><h2 id="æ¦‚å¿µ"><a href="#æ¦‚å¿µ" class="headerlink" title="æ¦‚å¿µ"></a>æ¦‚å¿µ</h2><h3 id="äº‹åŠ¡"><a href="#äº‹åŠ¡" class="headerlink" title="äº‹åŠ¡"></a>äº‹åŠ¡</h3><p>A transaction is the execution of a sequence of  one or more operations (e.g., SQL queries) on a database to perform some higher-level function.</p><p>Move $100 from Andyâ€™s bank account to his bookieâ€™s account.</p><p>Transaction:</p><ul><li>Check whether Andy has $100.</li><li>Deduct $100 from his account.</li><li>Add $100 to his bookieâ€™s account</li></ul><p>ä¸€ä¸ªäº‹åŠ¡åŒ…å«äº†è®¸å¤šæ“ä½œï¼Œå¦‚æœæ˜¯å¹¶å‘æ‰§è¡Œäº‹åŠ¡æ—¶ï¼Œå°±å¯èƒ½ä¼šå¯¼è‡´å¾ˆå¤šé—®é¢˜ã€‚</p><h4 id="äº‹åŠ¡çŠ¶æ€"><a href="#äº‹åŠ¡çŠ¶æ€" class="headerlink" title="äº‹åŠ¡çŠ¶æ€"></a>äº‹åŠ¡çŠ¶æ€</h4><p>A new txn starts with the <code>BEGIN</code> command.</p><p>The txn stops with either <code>COMMIT</code> or <code>ABORT</code></p><ul><li>If commit, the DBMS either saves all the txnâ€™s changes<br>or aborts it.</li><li>If abort, all changes are undone so that itâ€™s like as if the<br>txn never executed at all.</li></ul><h3 id="äº‹åŠ¡çš„ç‰¹æ€§"><a href="#äº‹åŠ¡çš„ç‰¹æ€§" class="headerlink" title="äº‹åŠ¡çš„ç‰¹æ€§"></a>äº‹åŠ¡çš„ç‰¹æ€§</h3><ul><li>åŸå­æ€§ï¼šæ‰€æœ‰æ“ä½œè¦ä¹ˆå…¨éƒ¨å®Œæˆï¼Œè¦ä¹ˆå…¨éƒ¨ä¸å®Œæˆã€‚undo log(å›æ»šæ—¥å¿—)</li><li>éš”ç¦»æ€§ï¼šå¤šä¸ªäº‹åŠ¡å¹¶å‘ä¿®æ”¹ï¼Œä¸ä¼šäº’ç›¸å¹²æ‰°ã€‚MVCCï¼ˆå¤šç‰ˆæœ¬å¹¶å‘æœºåˆ¶ï¼‰</li><li>æŒä¹…æ€§ï¼šäº‹åŠ¡å¤„ç†ç»“æŸåï¼Œå¯¹äº‹åŠ¡çš„ä¿®æ”¹æ˜¯æ°¸ä¹…çš„ã€‚redo logï¼ˆé‡åšæ—¥å¿—ï¼‰</li><li>ä¸€è‡´æ€§ï¼šäº‹åŠ¡æ“ä½œå‰å’Œæ“ä½œåï¼Œæ•°æ®åº“ä¿æŒä¸€è‡´æ€§</li></ul><h3 id="äº‹åŠ¡éš”ç¦»çº§åˆ«"><a href="#äº‹åŠ¡éš”ç¦»çº§åˆ«" class="headerlink" title="äº‹åŠ¡éš”ç¦»çº§åˆ«"></a>äº‹åŠ¡éš”ç¦»çº§åˆ«</h3><ul><li>è„è¯»ï¼šè¯»å–åˆ°æœªæäº¤çš„</li><li>ä¸å¯é‡å¤è¯»ï¼šåœ¨ä¸€ä¸ªäº‹åŠ¡å†…å¤šæ¬¡è¯»å–åŒä¸€ä¸ªæ•°æ®ï¼Œå‰åè¯»å–çš„æ•°æ®ä¸ä¸€è‡´</li><li>å¹»è¯»ï¼šåœ¨ä¸€ä¸ªäº‹åŠ¡å†…å¤šæ¬¡æŸ¥è¯¢æŸä¸ªç¬¦åˆæŸ¥è¯¢æ¡ä»¶çš„ã€Œè®°å½•æ•°é‡ã€ï¼Œå‰åè¯»å–çš„è®°å½•æ•°é‡ä¸ä¸€è‡´</li></ul><p><strong>éš”ç¦»çº§åˆ«ï¼š</strong></p><ul><li>è¯»æœªæäº¤ï¼ˆread uncommittedï¼‰ï¼ŒæŒ‡ä¸€ä¸ªäº‹åŠ¡è¿˜æ²¡æäº¤æ—¶ï¼Œå®ƒåšçš„å˜æ›´å°±èƒ½è¢«å…¶ä»–äº‹åŠ¡çœ‹åˆ°ï¼›</li><li>è¯»æäº¤ï¼ˆread committedï¼‰ï¼ŒæŒ‡ä¸€ä¸ªäº‹åŠ¡æäº¤ä¹‹åï¼Œå®ƒåšçš„å˜æ›´æ‰èƒ½è¢«å…¶ä»–äº‹åŠ¡çœ‹åˆ°ï¼›â€” è§£å†³è„è¯»é—®é¢˜</li><li>å¯é‡å¤è¯»ï¼ˆrepeatable readï¼‰ï¼ŒæŒ‡ä¸€ä¸ªäº‹åŠ¡æ‰§è¡Œè¿‡ç¨‹ä¸­çœ‹åˆ°çš„æ•°æ®ï¼Œä¸€ç›´è·Ÿè¿™ä¸ªäº‹åŠ¡å¯åŠ¨æ—¶çœ‹åˆ°çš„æ•°æ®æ˜¯ä¸€è‡´çš„ï¼ŒMySQL InnoDB å¼•æ“çš„é»˜è®¤éš”ç¦»çº§åˆ«ï¼› â€” è§£å†³ä¸å¯é‡å¤è¯»é—®é¢˜</li><li>ä¸²è¡ŒåŒ–ï¼ˆserializable ï¼‰ï¼›ä¼šå¯¹è®°å½•åŠ ä¸Šè¯»å†™é”ï¼Œåœ¨å¤šä¸ªäº‹åŠ¡å¯¹è¿™æ¡è®°å½•è¿›è¡Œè¯»å†™æ“ä½œæ—¶ï¼Œå¦‚æœå‘ç”Ÿäº†è¯»å†™å†²çªçš„æ—¶å€™ï¼Œåè®¿é—®çš„äº‹åŠ¡å¿…é¡»ç­‰å‰ä¸€ä¸ªäº‹åŠ¡æ‰§è¡Œå®Œæˆï¼Œæ‰èƒ½ç»§ç»­æ‰§è¡Œï¼› â€” è§£å†³å¹»è¯»é—®é¢˜</li></ul><p><strong>äº”ç§é”ï¼š</strong></p><ul><li>æ„å‘å…±äº«é”(IS):è¡¨ç¤ºäº‹åŠ¡æƒ³è¦è·å¾—å…±äº«é”,ä¸å…¶ä»–æ„å‘é”å…¼å®¹,ä¸æ’å®ƒé”å†²çªã€‚ç”¨å…±äº«é”é”äº†é‡Œé¢çš„æŸäº›è®°å½•</li><li>æ„å‘æ’å®ƒé”(IX):è¡¨ç¤ºäº‹åŠ¡æƒ³è¦è·å¾—æ’å®ƒé”,ä¸å…¶ä»–æ‰€æœ‰é”æ¨¡å¼å†²çªã€‚ç”¨æ’ä»–é”é”äº†è¡¨é‡Œçš„æŸäº›è®°å½•</li><li>å…±äº«é”(S):å…è®¸å¤šä¸ªäº‹åŠ¡åŒæ—¶æŒæœ‰åŒä¸€èµ„æºçš„å…±äº«é”,ç›¸äº’å…¼å®¹ã€‚</li><li>æ’å®ƒé”(X):åªå…è®¸ä¸€ä¸ªäº‹åŠ¡æŒæœ‰æ’å®ƒé”,ä¸æ‰€æœ‰å…¶ä»–é”å†²çªã€‚</li><li>å…±äº«æ„å‘æ’ä»–é”(SIX):è¡¨ç¤ºæŒæœ‰å…±äº«é”çš„åŒæ—¶,æƒ³è¦è·å¾—æ’å®ƒé”,ä¸æ’å®ƒé”å†²çªã€‚ç”¨å…±äº«é”é”äº†æ•´ä¸ªè¡¨ï¼Œç”¨æ’ä»–é”é”äº†é‡Œé¢çš„æŸäº›è®°å½•</li></ul><h3 id="é”ç®¡ç†å™¨"><a href="#é”ç®¡ç†å™¨" class="headerlink" title="é”ç®¡ç†å™¨"></a>é”ç®¡ç†å™¨</h3><p>ç®¡ç†é”çš„è¯·æ±‚<br><img src="/../imgs/image-30.png" alt="Alt text"></p><p><strong>è¿‡ç¨‹ï¼š</strong></p><ol><li>Transactions request locks (or upgrades).</li><li>Lock manager grants or blocks requests.</li><li>Transactions release locks.</li><li>Lock manager updates its internal lock-table.<br> It keeps track of what transactions hold what locks and what transactions are waiting to acquire any locks.</li></ol><h3 id="ä¸¤é˜¶æ®µé”-2PL"><a href="#ä¸¤é˜¶æ®µé”-2PL" class="headerlink" title="ä¸¤é˜¶æ®µé” 2PL"></a>ä¸¤é˜¶æ®µé” 2PL</h3><h4 id="Growing"><a href="#Growing" class="headerlink" title="Growing"></a>Growing</h4><p>åªèƒ½åŠ é”</p><h4 id="Shrinking"><a href="#Shrinking" class="headerlink" title="Shrinking"></a>Shrinking</h4><p>åªèƒ½è§£é”</p><p>ç¤ºæ„å›¾ï¼š</p><p><img src="/../imgs/image-32.png"></p><p>ä½†æ˜¯æ— æ³•é¿å…æ¥è¿å›æ»šé—®é¢˜ï¼šè¿™é‡Œäº‹åŠ¡ä¸€è¿›å…¥Shrinkingé˜¶æ®µåï¼Œå¹¶æ²¡æœ‰æäº¤ï¼Œè€Œæ˜¯ABORTï¼Œæœ€ç»ˆå›æ»šï¼Œç”±äºäº‹åŠ¡äºŒç”¨çš„æ˜¯äº‹åŠ¡ä¸€ä¿®æ”¹åçš„æ•°æ®ï¼Œä¹Ÿéœ€è¦è·Ÿç€å›æ»šã€‚</p><p><img src="/../imgs/image-33.png"></p><p>ç²—æš´çš„è§£å†³æ–¹æ³•ï¼šæ‰€æœ‰çš„é”éƒ½åœ¨commitçš„æ—¶å€™è§£é”ï¼Œèƒ½è§£å†³è„è¯»é—®é¢˜ã€‚</p><p><strong>ä½†æ˜¯å¯èƒ½å‡ºç°æ­»é”ï¼š</strong></p><p><img src="/../imgs/image-34.png"></p><h3 id="æ­»é”æ£€æµ‹"><a href="#æ­»é”æ£€æµ‹" class="headerlink" title="æ­»é”æ£€æµ‹"></a>æ­»é”æ£€æµ‹</h3><p>ä½¿ç”¨waits-for graph</p><ul><li>nodeï¼šäº‹åŠ¡</li><li>edgeï¼šTi to Tjè¡¨ç¤ºTiåœ¨ç­‰åˆ°Tjé‡Šæ”¾é”</li></ul><p>å¦‚æœå›¾ç§äº§ç”Ÿäº†ç¯ï¼Œéœ€è¦è§£å¼€ç¯ã€‚<br><img src="/../imgs/image-35.png"></p><p>è§£å¼€ç¯ï¼šé€‰æ‹©ä¸€ä¸ªäº‹åŠ¡victim(abort or restart)</p><ul><li>æ ¹æ®æ‰§è¡Œæ—¶é—´é€‰æ‹©ï¼ˆæ‰§è¡Œæ—¶é—´çŸ­çš„ï¼‰</li><li>æ‰§è¡Œçš„SQLè¯­å¥çš„å¤šå°‘</li><li>å·²ç»åŠ äº†å¤šå°‘æŠŠé”</li><li>è¢«å›æ»šè¿‡å¤šå°‘æ¬¡</li></ul><p><strong>å›æ»šç­–ç•¥ï¼š</strong> victimå®Œå…¨å›æ»š or å›æ»šæŸäº›è¯­å¥</p><h3 id="æ­»é”é¢„é˜²"><a href="#æ­»é”é¢„é˜²" class="headerlink" title="æ­»é”é¢„é˜²"></a>æ­»é”é¢„é˜²</h3><h4 id="æ­»é”äº§ç”Ÿæ¡ä»¶"><a href="#æ­»é”äº§ç”Ÿæ¡ä»¶" class="headerlink" title="æ­»é”äº§ç”Ÿæ¡ä»¶"></a>æ­»é”äº§ç”Ÿæ¡ä»¶</h4><ul><li>ç‹¬å èµ„æº</li><li>ä¸å¯å‰¥å¤º</li><li>å ç”¨å¹¶ç­‰å¾…</li><li>å¾ªç¯å¼•ç”¨</li></ul><h4 id="ç ´åå…¶ä¸­çš„æŸä¸€æ¡"><a href="#ç ´åå…¶ä¸­çš„æŸä¸€æ¡" class="headerlink" title="ç ´åå…¶ä¸­çš„æŸä¸€æ¡"></a>ç ´åå…¶ä¸­çš„æŸä¸€æ¡</h4><p>Assign priorities based on timestamps:</p><ul><li>Older Timestamp &#x3D; Higher Priority (e.g., T1 &gt; T2)</li></ul><p><img src="/../imgs/image-36.png"></p><p>ä¸¤ä¸ªäº‹åŠ¡ä¸ä¼šäº’ç›¸ç­‰å¾…ã€‚</p><p>ä¸ºäº†é¿å…é¥¥é¥¿ï¼Œæ–°çš„è¢«killæ‰ä¹‹åï¼Œæ—¶é—´æˆ³æ²¿ç”¨ä»¥å‰çš„ã€‚</p><h3 id="é”çš„ç²’åº¦"><a href="#é”çš„ç²’åº¦" class="headerlink" title="é”çš„ç²’åº¦"></a>é”çš„ç²’åº¦</h3><p>è¡Œé”ï¼Ÿè¡¨é”ï¼Ÿé—´éš™é”ï¼Ÿ</p><ul><li>æ›´å°‘çš„é”çš„æ•°é‡ï¼Ÿç²’åº¦å¤§ï¼ŒåŠ é”çš„å¼€é”€</li><li>æ›´å¥½çš„å¹¶å‘ï¼Ÿç²’åº¦å°</li></ul><h3 id="æ„å‘é”"><a href="#æ„å‘é”" class="headerlink" title="æ„å‘é”"></a>æ„å‘é”</h3><p>å¹¶ä¸æ˜¯çœŸçš„é”ï¼Œåªæ˜¯ä¸€ä¸ªæ„å‘ã€‚æ¯”å¦‚è¡¨Aç§æŸä¸€ä¸ªtupleè¢«åŠ äº†é”ï¼Œæ­¤æ—¶éœ€è¦å¯¹è¡¨AåŠ æ„å‘é”ï¼Œè¡¨ç¤ºæ¯”è¡¨Aç²’åº¦æ›´ç»†çš„å†…å®¹è¢«åŠ äº†æ‰€ï¼Œä¸èƒ½å†å¯¹è¡¨AåŠ è¡¨é”ã€‚</p><p><img src="/../imgs/image-38.png"></p><p>ä¾‹å¦‚ï¼šè¦å¯¹Tuple1åŠ Sé”ï¼Œéœ€è¦å…ˆå¯¹Table RåŠ ISé”</p><p><img src="/../imgs/image-39.png"> </p><p>ä¸¤é˜¶æ®µé”æ˜¯æ‚²è§‚é”ã€‚</p><h2 id="ä¹è§‚é”"><a href="#ä¹è§‚é”" class="headerlink" title="ä¹è§‚é”"></a>ä¹è§‚é”</h2><p><a href="https://15445.courses.cs.cmu.edu/fall2022/slides/17-timestampordering.pdf">è¯¾ä»¶åœ°å€</a></p><p>æ ¹æ®æ—¶é—´æˆ³æ’åºï¼Œå¦‚æœAçš„æ—¶é—´æˆ³å°ä¸Bçš„æ—¶é—´æˆ³ï¼Œé‚£ä¹ˆæœ€åæ‰§è¡Œçš„æ•ˆæœç­‰äºAå…ˆæ‰§è¡Œå®ŒBå†å»æ‰§è¡Œã€‚</p><p>æ—¶é—´æˆ³æ¥æºï¼š</p><ul><li>ç³»ç»Ÿæ—¶é’Ÿï¼ˆå¯èƒ½ä¸å‡†ç¡®ï¼‰</li><li>é€»è¾‘è®¡æ•°å™¨ï¼Œæ¯”å¦‚ä»1é€’å¢ï¼Œåˆ†å¸ƒå¼æ ¡å‡†éš¾</li><li>Hybridï¼šç»“åˆ</li></ul><p>æ¯ä¸€ä¸ªè®°å½•Xéƒ½éœ€è¦æœ‰ä¸¤ä¸ªæ—¶é—´æˆ³ï¼š</p><ul><li><code>W-TS(x)</code> - ä¸Šä¸€æ¬¡è¢«å†™çš„æ—¶é—´æˆ³</li><li><code>R-TS(x)</code> - ä¸Šä¸€æ¬¡è¢«è¯»çš„æ—¶é—´æˆ³</li></ul><p>åŸºå‡†ï¼š<strong>ä¸èƒ½æ“ä½œæ¥è‡ªæœªæ¥çš„æ•°æ®</strong></p><p>è¯»æ•°æ®ï¼š</p><p><img src="/../imgs/image-40.png"></p><p>å†™æ•°æ®ï¼šæ•°æ®çš„ä»»ä½•æ“ä½œéƒ½åº”è¯¥å‘ç”Ÿåœ¨è¿‡å»</p><p><img src="/../imgs/image-41.png"></p><h3 id="THOMAS-WRITE-RULE"><a href="#THOMAS-WRITE-RULE" class="headerlink" title="THOMAS WRITE RULE"></a>THOMAS WRITE RULE</h3><p>å¦‚æœæˆ‘ä»¬å½“å‰è¦ä¿®æ”¹çš„æ•°æ®Aå·²ç»è¢«æœªæ¥çš„äº‹åŠ¡æ‰€ä¿®æ”¹ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¿½è§†å†™è¿™ä¸ªæ“ä½œï¼Œå› ä¸ºç°åœ¨å†™äº†ä¸€å®šä¼šè¢«æœªæ¥å†™çš„æ•°æ®æ‰€è¦†ç›–æ‰ã€‚</p><p><img src="/../imgs/image-42.png"></p><ul><li>ä¹è§‚é”ä¸å­˜åœ¨æ­»é”ï¼Œå› ä¸ºæ²¡æœ‰é”ä¹Ÿæ²¡æœ‰ç­‰å¾…</li><li>é•¿äº‹åŠ¡å¯èƒ½ä¼šé¥¥é¥¿ï¼Œå› ä¸ºæœ‰å¯èƒ½ç¢°åˆ°çš„æ‰€æœ‰æ•°æ®éƒ½è¢«æœªæ¥çš„äº‹åŠ¡æ‰€ä¿®æ”¹</li><li>å¿…é¡»è¦ä¿è¯æ‰€æœ‰çš„ä¿®æ”¹éƒ½æ˜¯åœ¨å·²ç»æäº¤çš„åŸºç¡€ä¸Š</li></ul><p>å¯èƒ½ä¼šè¯»å–åˆ°åˆ«äººæœªæäº¤çš„ã€‚</p><h3 id="ä¹è§‚çš„å¹¶å‘"><a href="#ä¹è§‚çš„å¹¶å‘" class="headerlink" title="ä¹è§‚çš„å¹¶å‘"></a>ä¹è§‚çš„å¹¶å‘</h3><p>æ¯ä¸€ä¸ªäº‹åŠ¡éƒ½æœ‰ä¸€ä¸ªworkspaceï¼Œæ‰€æœ‰çš„ä¿®æ”¹éƒ½åœ¨å½“å‰è¿™ä¸ªworkspaceè¿›è¡Œï¼Œå½“äº‹åŠ¡æäº¤æ—¶ï¼ŒDBMSå¯¹æ¯”workspaceå†™é›†åˆï¼ŒæŸ¥çœ‹æ˜¯å¦ä¸å…¶ä»–äº‹åŠ¡å†²çªï¼Œæ²¡æœ‰å†²çªå°±å†™å…¥åŸå§‹æ•°æ®åº“ã€‚</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;åœ¨åšproject4ä¹‹å‰ï¼Œæœ€å¥½æ˜¯å…ˆå­¦ä¹ è¯¾ä»¶å†…å®¹ã€‚&lt;br&gt;&lt;a href=&quot;https://15445.courses.cs.cmu.edu/fall2022/slides/15-concurrencycontrol.pdf&quot;&gt;è¯¾ä»¶åœ°å€&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Concurre</summary>
      
    
    
    
    <category term="DataBase" scheme="http://example.com/categories/DataBase/"/>
    
    
    <category term="CMU15-445" scheme="http://example.com/tags/CMU15-445/"/>
    
  </entry>
  
  <entry>
    <title>CMU15-445 Query_Execution</title>
    <link href="http://example.com/2023/08/17/Query-Execution/"/>
    <id>http://example.com/2023/08/17/Query-Execution/</id>
    <published>2023-08-16T23:50:33.000Z</published>
    <updated>2024-03-30T03:56:28.526Z</updated>
    
    <content type="html"><![CDATA[<h2 id="æ‰§è¡Œå¼•æ“ä»‹ç»"><a href="#æ‰§è¡Œå¼•æ“ä»‹ç»" class="headerlink" title="æ‰§è¡Œå¼•æ“ä»‹ç»"></a>æ‰§è¡Œå¼•æ“ä»‹ç»</h2><p><strong>ä¸€æ¡SQLè¯­å¥è¿›å…¥åˆ°æ•°æ®åº“ä¸­åæ˜¯å¦‚ä½•è¢«æ‰§è¡Œçš„ï¼Ÿ</strong></p><p><img src="/../imgs/image-23.png" alt="æ¥æºäºå°æ—coding"></p><p>å‰ä¸¤ä¸ªprojectå®ç°çš„buffer poolå’Œindexéƒ½æ˜¯å­˜å‚¨å¼•æ“çš„ä¸€éƒ¨åˆ†ã€‚</p><p>æ‰§è¡Œè®¡åˆ’å¯ä»¥çœ‹ä½œä¸€ä¸ªæœ‰å‘æ— ç¯å›¾ï¼Œç”±sourceå¼€å§‹åˆ°sinkç»“æŸï¼Œä¸­é—´æ˜¯ä¸€ä¸ªåˆä¸€ä¸ªçš„ç®—å­ã€‚è¿™ä¸€ä¸ªprojectå®ç°çš„å°±æ˜¯è¿™äº›ç®—å­ã€‚</p><p>è¯¾ä»¶åœ°å€ï¼š<a href="https://15445.courses.cs.cmu.edu/fall2022/slides/10-sorting.pdf">https://15445.courses.cs.cmu.edu/fall2022/slides/10-sorting.pdf</a></p><h2 id="processing-model"><a href="#processing-model" class="headerlink" title="processing model"></a>processing model</h2><p>A DBMSâ€™s processing model defines how the system executes a query plan.</p><p>â†’ Different trade-offs for different workloads.</p><h3 id="Iterator-Model"><a href="#Iterator-Model" class="headerlink" title="Iterator Model"></a>Iterator Model</h3><p>æ¯ä¸ªè¿ç®—ç¬¦å®ç°ä¸€ä¸ªiteratoræ¥å£,äº§ç”Ÿä¸€è¡Œè¾“å‡ºå°±è°ƒç”¨ä¸‹ä¸ªè¿ç®—ç¬¦,é€è¡Œä¼ é€’æ•°æ®ã€‚æˆ– Pipeline Modelï¼Œæˆ–ç«å±±æ¨¡å‹ã€‚æ¯ä¸ªç®—å­éƒ½æœ‰ <code>Init()</code> å’Œ <code>Next()</code> ä¸¤ä¸ªæ–¹æ³•ã€‚<code>Init()</code> å¯¹ç®—å­è¿›è¡Œåˆå§‹åŒ–å·¥ä½œã€‚<code>Next()</code> åˆ™æ˜¯å‘ä¸‹å±‚ç®—å­è¯·æ±‚ä¸‹ä¸€æ¡æ•°æ®ã€‚å½“ <code>Next()</code> è¿”å› false æ—¶ï¼Œåˆ™ä»£è¡¨ä¸‹å±‚ç®—å­å·²ç»æ²¡æœ‰å‰©ä½™æ•°æ®ï¼Œè¿­ä»£ç»“æŸã€‚</p><p>å³æ—¶è¾“å‡ºæŸ¥è¯¢ç»“æœ,ä¸éœ€è¦å­˜å‚¨å’Œè½½å…¥å¤§é‡ä¸­é—´çŠ¶æ€ã€‚<br>æ˜“äºå®ç°,ç±»ä¼¼æ‹‰æ¨¡å¼,ä½†æ‰§è¡Œæ•ˆç‡ä½ã€‚</p><h3 id="Materialization-Model"><a href="#Materialization-Model" class="headerlink" title="Materialization Model"></a>Materialization Model</h3><p>æ¯ä¸ªè¿ç®—ç¬¦å°†ä¸­é—´ç»“æœå®Œå…¨ Materialize äº§ç”Ÿ,å­˜å‚¨åœ¨ä¸´æ—¶è¡¨ä¸­ã€‚<br>ä¸‹ä¸ªè¿ç®—ç¬¦ä»ä¸´æ—¶è¡¨ä¸­è¯»å–è¾“å…¥æ•°æ®ã€‚<br>æ•ˆç‡é«˜,å¯æœ€å¤§åŒ–åˆ©ç”¨æ‰¹å¤„ç†,ä½†éœ€è¦æ›´å¤šå­˜å‚¨ç©ºé—´ã€‚</p><h3 id="Vectorized-Batch-Model"><a href="#Vectorized-Batch-Model" class="headerlink" title="Vectorized&#x2F;Batch Model"></a>Vectorized&#x2F;Batch Model</h3><p>è¿ç®—ç¬¦ä»¥æ‰¹(å‘é‡)ä¸ºå•ä½å¤„ç†æ•°æ®,å‡å°‘è§£é‡Šå™¨è°ƒåº¦å¼€é”€ã€‚<br>è¾“å…¥æ•°æ®å­˜æ”¾åœ¨åˆ—å¼å­˜å‚¨ä¸­,æ˜“äºå‘é‡åŒ–æ“ä½œã€‚<br>å¹¶è¡Œè®¡ç®—æ‰¹æ•°æ®,å¯åˆ©ç”¨ç°ä»£CPUæŒ‡ä»¤é›†ã€‚<br>å…¼å…·Iteratorå’ŒMaterializationæ–¹æ³•çš„ä¼˜ç‚¹ã€‚ç°åœ¨å¤§éƒ¨åˆ†OLAPæ•°æ®åº“ä½¿ç”¨è¿™ç§æ–¹æ³•ã€‚</p><p>åœ¨bustubä¸­ä½¿ç”¨çš„æ˜¯Iterator Modelã€‚</p><p>æ¯”å¦‚è¿™ä¸ªjoinçš„ä¾‹å­ï¼ŒæŸ¥è¯¢æ—¶æ•°æ®è‡ªä¸‹è€Œä¸ŠæµåŠ¨ï¼Œé€šè¿‡çˆ¶èŠ‚ç‚¹è°ƒç”¨å­èŠ‚ç‚¹çš„<code>Next()</code>æ–¹æ³•ã€‚åœ¨æ ¹èŠ‚ç‚¹å¤„å¾—åˆ°æœ€ç»ˆå€¼ã€‚</p><p><img src="/../imgs/image-27.png"></p><h2 id="å…·ä½“å®ç°"><a href="#å…·ä½“å®ç°" class="headerlink" title="å…·ä½“å®ç°"></a>å…·ä½“å®ç°</h2><p>å¯¹äºæ¯ä¸€ä¸ªç®—å­ï¼Œæˆ‘ä»¬éœ€è¦è¡¥å……æ„é€ å‡½æ•°ã€<code>Init()</code>å‡½æ•°å’Œ<code>Next()</code>å‡½æ•°ï¼Œæ³¨æ„<code>Next()</code>å‡½æ•°å¦‚æœè¿”å›å€¼ï¼Œè¿™é‡Œåªè¿”å›ä¸€æ¡ï¼Œé€šè¿‡ä¼ å‡ºå‚æ•°å®ç°ï¼Œè¿”å›<code>Tuple</code>å’Œ<code>rid</code>ã€‚</p><p><strong>è¿™äº›ä¿¡æ¯æ˜¯å¦‚ä½•å¾—åˆ°çš„ï¼Ÿ</strong></p><p>åœ¨é¡ºåºæ‰«æç®—å­ä¸­ï¼Œæ„é€ å‡½æ•°æä¾›äº†ä¸¤ä¸ªå‚æ•°ï¼š</p><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">SeqScanExecutor::<span class="built_in">SeqScanExecutor</span>(ExecutorContext *exec_ctx, <span class="type">const</span> SeqScanPlanNode *plan) : <span class="built_in">AbstractExecutor</span>(exec_ctx) &#123;&#125;</span><br></pre></td></tr></table></figure><p>ExecutorContextå’ŒSeqScanPlanNodeï¼Œé¦–å…ˆè¦ææ˜ç™½æ‰§è¡Œä¸Šä¸‹æ–‡éƒ½åŒ…æ‹¬ä»€ä¹ˆä¸œè¥¿ï¼Ÿ</p><p><img src="/../imgs/exec_ctx.png"></p><p>æœ€ç»ˆçš„åŸå§‹æ•°æ®éƒ½åœ¨<code>Tuple</code>ä¸­ï¼Œä¹Ÿä»£è¡¨ç€OLTPæ•°æ®åº“ä¸­çš„ä¸€è¡Œæ•°æ®ã€‚</p><p><strong>SeqScanPlanNode</strong>ï¼Œæ‰§è¡Œè®¡åˆ’çš„ä¸€ä¸ªç»“ç‚¹åº”è¯¥åŒ…å«å“ªäº›ä¸œè¥¿ï¼Ÿ</p><p>output_schemaæ˜¯ç”¨æ¥è¡¨ç¤ºæ‰§è¡Œè®¡åˆ’ç»“ç‚¹çš„è¾“å‡ºæ¨¡å¼ã€‚è¾“å‡ºå…ƒç»„åŒ…å«å“ªäº›åˆ—, æ¯åˆ—çš„ç±»å‹å’Œåç§°æ˜¯ä»€ä¹ˆã€‚è¿™ä¸ºä¸‹æ¸¸è¿ç®—ç¬¦è§£æå’Œå¤„ç†æ•°æ®æä¾›ä¿¡æ¯ã€‚</p><p><img src="/../imgs/plannode.png"></p><p>bustubæä¾›äº†ä¸€ä¸ªè¿­ä»£å™¨<code>TableIterator</code>ï¼Œç”¨æ¥éå†<code>TableHeap</code>ã€‚æ ¹æ®ä¸Šé¢çš„ctxåŒ…å«çš„å†…å®¹å’ŒplanåŒ…å«çš„å†…å®¹å¯ä»¥ä¸€å±‚å±‚æ‹†è§£ã€‚</p><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">table_id = plan_-&gt;<span class="built_in">GetTableOid</span>();</span><br><span class="line">table_info = ctx-&gt;<span class="built_in">GetCatalog</span>()-&gt;<span class="built_in">GetTable</span>(table_id);</span><br><span class="line">table_heap = table_info-&gt;table_.<span class="built_in">get</span>();</span><br><span class="line">table_iter_ = table_heap_-&gt;<span class="built_in">Begin</span>(ctx-&gt;<span class="built_in">GetTransaction</span>());</span><br><span class="line">*table_iter_=tuple;</span><br><span class="line">rid=tuple-&gt;<span class="built_in">GetRid</span>();</span><br></pre></td></tr></table></figure><h2 id="task1"><a href="#task1" class="headerlink" title="task1:"></a>task1:</h2><h4 id="é¡ºåºæ‰«æ-src-execution-seq-scan-executor-cpp"><a href="#é¡ºåºæ‰«æ-src-execution-seq-scan-executor-cpp" class="headerlink" title="é¡ºåºæ‰«æ src/execution/seq_scan_executor.cpp"></a>é¡ºåºæ‰«æ <code>src/execution/seq_scan_executor.cpp</code></h4><p>åœ¨æœ‰äº†å‰é¢çš„é“ºå«åï¼Œé¡ºåºæ‰«æçš„<code>Next()</code>å®ç°å°±éå¸¸ç®€å•ï¼Œåªéœ€è¦è¿”å›è¿­ä»£å™¨æŒ‡å‘çš„<code>Tuple</code>å³å¯ã€‚</p><h3 id="æ’å…¥-src-execution-insert-executor-cpp"><a href="#æ’å…¥-src-execution-insert-executor-cpp" class="headerlink" title="æ’å…¥ src/execution/insert_executor.cpp"></a>æ’å…¥ <code>src/execution/insert_executor.cpp</code></h3><p>insertå’Œdeleteæ˜¯å”¯äºŒçš„å†™ç®—å­ã€‚<br>æ’å…¥è¿™é‡Œå¤šäº†ä¸€ä¸ªå‚æ•°<code>child_executor</code>, å³å€¼ä¼ å…¥ã€‚æ’å…¥ç›´æ¥å°†tupleæ’å…¥åˆ°tableå°¾éƒ¨ï¼Œç„¶åæ›´æ–°indexã€‚</p><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">InsertExecutor::<span class="built_in">InsertExecutor</span>(ExecutorContext *exec_ctx, <span class="type">const</span> InsertPlanNode *plan,</span><br><span class="line">                               std::unique_ptr&lt;AbstractExecutor&gt; &amp;&amp;child_executor)</span><br><span class="line">    : <span class="built_in">AbstractExecutor</span>(exec_ctx) &#123;&#125;</span><br></pre></td></tr></table></figure><p>å› ä¸ºè¦æ›´æ–°indexï¼Œå¯ä»¥é€šè¿‡<code>Catelog-&gt;GetTableIndexes()</code>æ¥è·å–æ‰€æœ‰åŒ…å«è¿™ä¸ªtableçš„indexï¼Œè¿™é‡Œä½¿ç”¨<code>std::vector&lt;IndexInfo *&gt; indexes_;</code> éå†indexesæ•°ç»„ï¼Œå°†æ¯ä¸€ä¸ªindexæ’å…¥B+æ ‘å³å¯ã€‚<br><code>bpIndex = ... index_.get()</code></p><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">bpIndex = <span class="keyword">reinterpret_cast</span>&lt;BPlusTreeIndex&lt;GenericKey&lt;<span class="number">8</span>&gt;, RID, GenericComparator&lt;<span class="number">8</span>&gt;&gt; (index-&gt;index_.<span class="built_in">get</span>());</span><br><span class="line">bpIndex-&gt;<span class="built_in">InsertEntry</span>(tuple-&gt;<span class="built_in">KeyFromTuple</span>(tinf-&gt;schema_, index-&gt;key_schema_, index-&gt;index_-&gt;<span class="built_in">GetKeyAttrs</span>()), *rid, txn); <span class="comment">// insert into B+tree</span></span><br></pre></td></tr></table></figure><p>ç„¶åä»å­è®¡åˆ’è·å–kv, æ’å…¥è¡¨ä¸­ TableHeap, è°ƒç”¨TableHeapä¸­çš„æ’å…¥æ–¹æ³•å³å¯ã€‚</p><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">table_heap_-&gt;<span class="built_in">InsertTuple</span>(*tuple, rid, txn);</span><br></pre></td></tr></table></figure><h3 id="åˆ é™¤-src-execution-insert-executor-cpp"><a href="#åˆ é™¤-src-execution-insert-executor-cpp" class="headerlink" title="åˆ é™¤ src/execution/insert_executor.cpp"></a>åˆ é™¤ <code>src/execution/insert_executor.cpp</code></h3><p>åˆ é™¤å‡ ä¹å’Œæ’å…¥ä¸€æ ·ï¼Œå”¯ä¸€ä¸åŒçš„æ˜¯æŠŠå†™è®°å½•æ¢æˆåˆ é™¤è®°å½•ï¼Œè°ƒç”¨TableHeapä¸­çš„åˆ é™¤æ–¹æ³•ã€‚</p><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">txn-&gt;<span class="built_in">AppendIndexWriteRecord</span>(delete_record);</span><br><span class="line">bpIndex-&gt;<span class="built_in">DeleteEntry</span>(tuple-&gt;<span class="built_in">KeyFromTuple</span>(tinf-&gt;schema_, index-&gt;key_schema_, index-&gt;index_-&gt;<span class="built_in">GetKeyAttrs</span>()),*rid, txn);</span><br></pre></td></tr></table></figure><h3 id="ç´¢å¼•æ‰«æ-src-execution-index-scan-executor-cpp"><a href="#ç´¢å¼•æ‰«æ-src-execution-index-scan-executor-cpp" class="headerlink" title="ç´¢å¼•æ‰«æ src/execution/index_scan_executor.cpp"></a>ç´¢å¼•æ‰«æ <code>src/execution/index_scan_executor.cpp</code></h3><p>åŒæ ·çš„ï¼Œbustubå°è£…äº†<code>IndexIterator</code>æŒ‡é’ˆï¼Œç”¨æ¥éå†B+æ ‘ã€‚æŒ‡å‘ä¸€ä¸ª<code>std::pair&lt;KeyType, ValueType&gt;</code>ç±»å‹ã€‚è¿™é‡Œçš„valueä¹Ÿå°±æ˜¯ridï¼Œå†é€šè¿‡ridè·å–tupleã€‚</p><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">BPlusTreeIndexForOneIntegerColumn *tree_;</span><br><span class="line">BPlusTreeIndexIteratorForOneIntegerColumn index_iter_;</span><br></pre></td></tr></table></figure><h2 id="Task2-aggr-and-join"><a href="#Task2-aggr-and-join" class="headerlink" title="Task2 aggr and join"></a>Task2 aggr and join</h2><h3 id="èšåˆ-src-execution-aggregation-executor-cpp"><a href="#èšåˆ-src-execution-aggregation-executor-cpp" class="headerlink" title="èšåˆ src/execution/aggregation_executor.cpp"></a>èšåˆ <code>src/execution/aggregation_executor.cpp</code></h3><p>åœ¨<code>AggregationPlanNode</code>ä¸­å¤šäº†è¿™äº›å‚æ•°ï¼š</p><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">* Construct a <span class="keyword">new</span> AggregationPlanNode.</span><br><span class="line">   * @param output_schema The output format of <span class="keyword">this</span> plan node</span><br><span class="line">   * @param child The child plan to aggregate data over</span><br><span class="line">   * @param group_bys The group by clause of the aggregation</span><br><span class="line">   * @param aggregates The expressions that we are aggregating</span><br><span class="line">   * @param agg_types The types that we are aggregating</span><br><span class="line"></span><br><span class="line"><span class="comment">/// åœ¨èšåˆæ‰§è¡Œå™¨ä¸­æœ‰ä»¥ä¸‹å‚æ•°</span></span><br><span class="line">  <span class="comment">/** The aggregation plan node */</span></span><br><span class="line">  <span class="type">const</span> AggregationPlanNode *plan_;</span><br><span class="line">  <span class="comment">/** The child executor that produces tuples over which the aggregation is computed */</span></span><br><span class="line">  std::unique_ptr&lt;AbstractExecutor&gt; child_;</span><br><span class="line">  <span class="comment">/** Simple aggregation hash table */</span></span><br><span class="line">  SimpleAggregationHashTable aht_;</span><br><span class="line">  <span class="comment">/** Simple aggregation hash table iterator */</span></span><br><span class="line">  SimpleAggregationHashTable::Iterator aht_iterator_;</span><br><span class="line"></span><br><span class="line"><span class="comment">/// æ„é€ å‡½æ•°éœ€è¦æ”¹ä¸º</span></span><br><span class="line"></span><br><span class="line">AggregationExecutor::<span class="built_in">AggregationExecutor</span>(ExecutorContext *exec_ctx, <span class="type">const</span> AggregationPlanNode *plan,</span><br><span class="line">                                         std::unique_ptr&lt;AbstractExecutor&gt; &amp;&amp;child)</span><br><span class="line">    : <span class="built_in">AbstractExecutor</span>(exec_ctx),</span><br><span class="line">      <span class="built_in">plan_</span>(plan),</span><br><span class="line">      <span class="built_in">child_</span>(std::<span class="built_in">move</span>(child)),</span><br><span class="line">      <span class="built_in">aht_</span>(plan-&gt;<span class="built_in">GetAggregates</span>(), plan-&gt;<span class="built_in">GetAggregateTypes</span>()),</span><br><span class="line">      <span class="built_in">aht_iterator_</span>(aht_.<span class="built_in">Begin</span>())&#123;&#125;</span><br></pre></td></tr></table></figure><p>èšåˆéœ€è¦æ ¹æ®<code>group by</code>åˆ†ç»„çš„ç»“æœæ¥è®¡ç®—å—ï¼Œæ‰€ä»¥è¿™é‡Œéœ€è¦å»ºç«‹ä¸€ä¸ªå“ˆå¸Œè¡¨ç”¨æ¥å­˜å‚¨ä¸­é—´ç»“æœã€‚å’Œä¹‹å‰æ¯ä¸€æ¬¡åªåä¸€æ¡æ•°æ®ä¸ä¸€æ ·çš„æ˜¯ï¼Œè¿™é‡Œå¿…é¡»è¦åœ¨<code>Init()</code>å‡½æ•°ä¸­æŠŠæ‰€æœ‰ç»“æœè®¡ç®—å‡ºæ¥ï¼Œå†åœ¨<code> Next()</code> ä¸­ä¸€æ¡ä¸€æ¡åœ° emitã€‚æ‰€ä»¥å®é™…ä¸Šè®¡ç®—è¿‡ç¨‹æ˜¯åœ¨<code>Init()</code>å‡½æ•°ä¸­ï¼Œé€šè¿‡ï¼š</p><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">while</span>(child_-&gt;<span class="built_in">Next</span>(&amp;tuple, &amp;rid))&#123;</span><br><span class="line">   aht_.<span class="built_in">InsertCombine</span>(<span class="built_in">MakeAggregateKey</span>(&amp;tuple), <span class="built_in">MakeAggregateValue</span>(&amp;tuple));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æœ€åæ³¨æ„åœ¨<code>Next()</code>å‡½æ•°ä¸­ï¼Œä¸€ä¸ªtupleå¯èƒ½è¦è¿”å›å¤šä¸ªèšé›†çš„å€¼ï¼Œä¾‹å¦‚æŸ¥è¯¢â€SELECT SUM(A), MAX(B), COUNT(C) FROM tableâ€å°±éœ€è¦è¿”å›ä¸€ä¸ªåŒ…å«ä¸‰ä¸ªèšåˆç»“æœçš„å…ƒç»„ã€‚æ‰€ä»¥å†…éƒ¨æ˜¯ä¸€ä¸ª<code>vector</code>ã€‚æ²¡æœ‰è¿”å›ridæ˜¯å› ä¸ºèšé›†ä¹‹åäº§ç”Ÿäº†æ–°ç»“æœï¼Œè€Œä¸æ˜¯åŸæœ‰çš„è®°å½•ã€‚</p><h3 id="inner-join-left-join-src-execution-nested-loop-join-executor-cpp"><a href="#inner-join-left-join-src-execution-nested-loop-join-executor-cpp" class="headerlink" title="inner join &amp; left join src/execution/nested_loop_join_executor.cpp"></a>inner join &amp; left join <code>src/execution/nested_loop_join_executor.cpp</code></h3><p><code>join</code>çš„æ—¶å€™ä¹Ÿæ˜¯éœ€è¦å»ºç«‹hashè¡¨çš„ï¼Œè¿™é‡Œæ˜¯æ ¹æ®joinçš„keyæ¥å»ºç«‹å“ˆå¸Œè¡¨ï¼Œè‡³äºæ˜¯å·¦è¡¨å»ºè¡¨è¿˜æ˜¯å³è¡¨å»ºè¡¨ï¼Œéœ€è¦çœ‹æ•°æ®åº“çš„å…·ä½“å®ç°ã€‚</p><h4 id="æ¦‚å¿µè§£é‡Šï¼š"><a href="#æ¦‚å¿µè§£é‡Šï¼š" class="headerlink" title="æ¦‚å¿µè§£é‡Šï¼š"></a>æ¦‚å¿µè§£é‡Šï¼š</h4><p>åµŒå¥—å¾ªç¯è¿æ¥æ˜¯è¿æ¥ç®—æ³•çš„ä¸€ç§,å®ƒçš„åŸºæœ¬åŸç†æ˜¯:</p><ul><li>å¤–è¡¨å’Œå†…è¡¨,å…¶ä¸­å¤–è¡¨æ˜¯é©±åŠ¨è¡¨,å†…è¡¨æ˜¯è¢«é©±åŠ¨è¡¨ã€‚</li><li>é€šè¿‡å¤–è¡¨å¾ªç¯éå†æ¯ä¸€è¡Œã€‚</li><li>å¯¹äºå¤–è¡¨çš„æ¯ä¸€è¡Œ,éå†å†…è¡¨æ‰¾åˆ°åŒ¹é…çš„è¡Œã€‚</li><li>å°†åŒ¹é…çš„å¤–è¡¨è¡Œå’Œå†…è¡¨è¡Œç»„åˆ,äº§ç”Ÿè¿æ¥ç»“æœã€‚</li><li>å¤–è¡¨çš„å¾ªç¯åµŒå¥—å†…è¡¨çš„å¾ªç¯,é€è¡Œè¿›è¡Œè¿æ¥å¤„ç†ã€‚</li></ul><p>ç›¸æ¯”å…¶ä»–è¿æ¥ç®—æ³•å¦‚å“ˆå¸Œè¿æ¥å’Œæ’åºåˆå¹¶è¿æ¥,åµŒå¥—å¾ªç¯è¿æ¥ç®€å•ç›´æ¥,ä½†æ˜¯å½“è¡¨å¤§å°ä¸å‡è¡¡æ—¶æ€§èƒ½è¾ƒå·®ã€‚<br>å®ƒé€‚ç”¨äºå¤–è¡¨å¾ˆå°è€Œå†…è¡¨è¾ƒå¤§çš„æƒ…å†µ,æˆ–è€…å½“è¿æ¥æ¡ä»¶éå¸¸å¤æ‚æ—¶ã€‚</p><p>æç¤ºï¼š Note for 2022 Fall: You ONLY need to implement left join and inner join.</p><ul><li><p>left joinï¼šå·¦è¡¨å…¨åŒ¹é…ï¼ˆæ²¡åŒ¹é…ä¸Šå³è¡¨æ—¶å³è¡¨ç”¨nullå¡«å……ï¼‰ï¼Œå³è¡¨åªåŒ¹é…joinä¸Šçš„</p></li><li><p>inner joinï¼š å·¦è¡¨å’Œå³è¡¨å‡åªåŒ¹é…èƒ½åŒ¹é…ä¸Šçš„</p></li></ul><h4 id="å…·ä½“å®ç°-1"><a href="#å…·ä½“å®ç°-1" class="headerlink" title="å…·ä½“å®ç°"></a>å…·ä½“å®ç°</h4><p>æ·»åŠ æˆå‘˜å˜é‡ï¼š</p><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">/** The NestedLoopJoin plan node to be executed. */</span></span><br><span class="line"><span class="type">const</span> NestedLoopJoinPlanNode *plan_;</span><br><span class="line"><span class="comment">/** The child executor that produces tuple for the left side of join. */</span></span><br><span class="line">std::unique_ptr&lt;AbstractExecutor&gt; left_executor_;</span><br><span class="line"><span class="comment">/** The child executor that produces tuple for the right side of join. */</span></span><br><span class="line">std::unique_ptr&lt;AbstractExecutor&gt; right_executor_;</span><br><span class="line"><span class="comment">/** The output tuple schema. */</span></span><br><span class="line">Schema left_schema_;</span><br><span class="line">Schema right_schema_;</span><br><span class="line"><span class="type">bool</span> is_inner_join_;</span><br><span class="line">std::vector&lt;Value&gt; right_tuples_;</span><br></pre></td></tr></table></figure><p><strong>è¿™é‡Œä¸ºä»€ä¹ˆéœ€è¦æŠŠå³è¡¨çš„å€¼å…ˆå…¨éƒ¨æ‹¿å‡ºæ¥å‘¢ï¼Ÿ</strong><br>å‡è®¾æˆ‘ä»¬çš„joiné€»è¾‘æ˜¯è¿™æ ·çš„ï¼š</p><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> outer_tuple in outer_table:</span><br><span class="line">    <span class="keyword">for</span> inner_tuple in inner_table:</span><br><span class="line">        <span class="keyword">if</span> inner_tuple matched outer_tuple:</span><br><span class="line">            emit</span><br></pre></td></tr></table></figure><p>å³è¡¨çš„å€¼ä¼šåœ¨å·¦è¡¨çš„ç¬¬ä¸€ä¸ªå€¼åšåŒ¹é…æ—¶å°±å®Œå…¨è¢«æ¶ˆè€—æ‰äº†ã€‚</p><p><strong>left join</strong><br>å³å€¼å¡«å……ç©ºå€¼å¯ä»¥ä½¿ç”¨ <code>ValueFactory::GetNullValueByType(right_schema_.GetColumn(i).GetType())</code></p><p>æ¯”è¾ƒå³è¡¨å’Œå·¦è¡¨çš„tupleæ˜¯å¦ç›¸ç­‰å¯ä»¥ä½¿ç”¨<code>EvaluateJoin(&amp;left_tuple_, &amp;left_schema_, &amp;right_tuple_, &amp;right_schema_);</code></p><h3 id="index-join-src-execution-nested-index-join-executor-cpp"><a href="#index-join-src-execution-nested-index-join-executor-cpp" class="headerlink" title="index join src/execution/nested_index_join_executor.cpp"></a>index join <code>src/execution/nested_index_join_executor.cpp</code></h3><p>ç´¢å¼•è¿æ¥(Index Join)æ˜¯è¿æ¥ç®—æ³•çš„ä¸€ç§ä¼˜åŒ–æŠ€æœ¯,å…¶ä¸»è¦æ€æƒ³æ˜¯:</p><p>å¯¹äºå¤šä¸ªè¡¨çš„è¿æ¥æŸ¥è¯¢,é€šè¿‡åœ¨ä¸€ä¸ªè¡¨ä¸Šä½¿ç”¨ç´¢å¼•æ¥åŠ é€Ÿè¿æ¥å¤„ç†ã€‚</p><p>ä¾‹å¦‚å¯¹äºä¸€ä¸ªå¤šè¡¨è¿æ¥æŸ¥è¯¢:</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> </span><br><span class="line"><span class="keyword">FROM</span> A <span class="keyword">JOIN</span> B <span class="keyword">ON</span> A.id <span class="operator">=</span> B.id <span class="keyword">JOIN</span> C <span class="keyword">ON</span> B.id <span class="operator">=</span> C.id</span><br></pre></td></tr></table></figure><p>å¦‚æœåœ¨è¡¨Bçš„idåˆ—ä¸Šå­˜åœ¨ç´¢å¼•,å¯ä»¥è¿›è¡Œç´¢å¼•è¿æ¥ä¼˜åŒ–:</p><p>é€šè¿‡æ‰«æè¡¨A,è·å–è¿æ¥éœ€è¦çš„idå€¼ã€‚<br>å¯¹äºè¡¨Açš„æ¯ä¸€è¡Œ,ä½¿ç”¨è¡¨Bä¸Šçš„ç´¢å¼•ç›´æ¥æŸ¥æ‰¾idå€¼,å¾—åˆ°Bä¸­çš„åŒ¹é…è¡Œã€‚<br>å†æ‰«æè¡¨Cæ‰¾åˆ°åŒ¹é…Bçš„è¡Œã€‚<br>æœ€ç»ˆç»„åˆA,B,Cçš„åŒ¹é…è¡Œã€‚<br>è¿™æ ·å¯ä»¥åˆ©ç”¨Bè¡¨ä¸Šçš„ç´¢å¼•,é¿å…å¯¹Bè¿›è¡Œå…¨è¡¨æ‰«æ,ä»è€ŒåŠ é€Ÿè¿æ¥æŸ¥è¯¢ã€‚</p><p>å…·ä½“å®ç°å’Œ NestedLoopJoin å·®ä¸å¤šï¼Œåªæ˜¯åœ¨å°è¯•åŒ¹é…å³è¡¨ tuple æ—¶ï¼Œä¼šæ‹¿ join key å» B+Tree Index é‡Œè¿›è¡ŒæŸ¥è¯¢ã€‚å¦‚æœæŸ¥è¯¢åˆ°ç»“æœï¼Œå°±æ‹¿ç€æŸ¥åˆ°çš„ RID å»å³è¡¨è·å– tuple ç„¶åè£…é…æˆç»“æœè¾“å‡ºã€‚</p><p>åœ¨æ„é€ å‡½æ•°ä¸­åªæœ‰ä¸€ä¸ªchild_executorï¼Œä¸åœ¨æ˜¯å·¦å³å­©å­çš„æ‰§è¡Œå™¨ï¼Œtupleæ¥æºï¼š</p><ul><li>left tuple æ¥è‡ª child_executor</li><li>right tuple æ¥è‡ª table</li><li>index scan key è·å– rid, ç”¨rid è·å–right tuple</li></ul><h2 id="Task3-Sort-Limit-Executors-and-Top-N-Optimization"><a href="#Task3-Sort-Limit-Executors-and-Top-N-Optimization" class="headerlink" title="Task3  Sort + Limit Executors and Top-N Optimization"></a>Task3  Sort + Limit Executors and Top-N Optimization</h2><h3 id="src-execution-sort-executor-cpp"><a href="#src-execution-sort-executor-cpp" class="headerlink" title="src&#x2F;execution&#x2F;sort_executor.cpp"></a>src&#x2F;execution&#x2F;sort_executor.cpp</h3><p>Sort ä¹Ÿæ˜¯ pipeline breakerã€‚åœ¨ Init() ä¸­è¯»å–æ‰€æœ‰ä¸‹å±‚ç®—å­çš„ tupleï¼Œå¹¶æŒ‰ ORDER BY çš„å­—æ®µå‡åºæˆ–é™åºæ’åºã€‚</p><p>next å‡½æ•°æ¯æ¬¡ç”¨è¿­ä»£å™¨è¿”å›ä¸€ä¸ªå€¼ã€‚</p><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="type">const</span> SortPlanNode *plan_;</span><br><span class="line">std::unique_ptr&lt;AbstractExecutor&gt; child_executor_;</span><br><span class="line">std::vector&lt;std::pair&lt;Tuple, RID&gt;&gt; tuples_; <span class="comment">// å­˜å‚¨æ‰€æœ‰çš„å€¼ç”¨æ¥æ’åº</span></span><br><span class="line">std::vector&lt;std::pair&lt;Tuple, RID&gt;&gt;::iterator it_;</span><br></pre></td></tr></table></figure><p>æ ¹æ®order byçš„å€¼æ¥è¿›è¡Œå‡åºæˆ–è€…é™åºæ’åºï¼Œè¿™é‡Œä½¿ç”¨åŒ¿åå‡½æ•°è‡ªå®šä¹‰æ’åºã€‚ç„¶åè¿”å›è¿­ä»£å™¨æŒ‡å‘çš„tupleã€‚</p><h3 id="src-execution-limit-executor-cpp"><a href="#src-execution-limit-executor-cpp" class="headerlink" title="src&#x2F;execution&#x2F;limit_executor.cpp"></a>src&#x2F;execution&#x2F;limit_executor.cpp</h3><p>ä½¿ç”¨ä¸€ä¸ªæˆå‘˜å˜é‡ <code>limit_</code>æ¥ç»Ÿè®¡è¾“å‡ºå¤šå°‘æ•°æ®å³å¯ã€‚</p><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">limit_ = plan_-&gt;<span class="built_in">GetLimit</span>();</span><br><span class="line"><span class="comment">/// after emit </span></span><br><span class="line">limit_--</span><br></pre></td></tr></table></figure><h3 id="src-execution-topn-execution-cpp"><a href="#src-execution-topn-execution-cpp" class="headerlink" title="src&#x2F;execution&#x2F;topn_execution.cpp"></a>src&#x2F;execution&#x2F;topn_execution.cpp</h3><p>top_nå‡½æ•°ï¼šè¿”å›æœ€å¤§æˆ–è€…æœ€å°çš„nä¸ªtuple</p><p>ä¹Ÿæ˜¯ pipeline breakerï¼Œéœ€è¦åœ¨<code>Init()</code>æ—¶ï¼Œä½¿ç”¨ä¼˜å…ˆé˜Ÿåˆ—ã€‚æœ€åæ¯ä¸€æ¬¡è°ƒç”¨<code>Next()</code>å°±ä»æ ˆä¸­å¼¹å‡ºä¸€ä¸ªã€‚</p><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">while</span>(child_executor_-&gt;<span class="built_in">Next</span>(&amp;tuple, &amp;rid))&#123;</span><br><span class="line">   pq.<span class="built_in">push</span>(tuple);</span><br><span class="line">   <span class="keyword">if</span>(pq.<span class="built_in">size</span>() &gt; plan_-&gt;<span class="built_in">GetN</span>())&#123;</span><br><span class="line">      pq.<span class="built_in">pop</span>();</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">while</span>(!pq.<span class="built_in">empty</span>())&#123;</span><br><span class="line">   stack_.<span class="built_in">push</span>(pq.<span class="built_in">top</span>());</span><br><span class="line">   pq.<span class="built_in">pop</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;æ‰§è¡Œå¼•æ“ä»‹ç»&quot;&gt;&lt;a href=&quot;#æ‰§è¡Œå¼•æ“ä»‹ç»&quot; class=&quot;headerlink&quot; title=&quot;æ‰§è¡Œå¼•æ“ä»‹ç»&quot;&gt;&lt;/a&gt;æ‰§è¡Œå¼•æ“ä»‹ç»&lt;/h2&gt;&lt;p&gt;&lt;strong&gt;ä¸€æ¡SQLè¯­å¥è¿›å…¥åˆ°æ•°æ®åº“ä¸­åæ˜¯å¦‚ä½•è¢«æ‰§è¡Œçš„ï¼Ÿ&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;img s</summary>
      
    
    
    
    <category term="DataBase" scheme="http://example.com/categories/DataBase/"/>
    
    
    <category term="CMU15-445" scheme="http://example.com/tags/CMU15-445/"/>
    
  </entry>
  
  <entry>
    <title>CMU15-445 B+tree</title>
    <link href="http://example.com/2023/08/17/B-tree/"/>
    <id>http://example.com/2023/08/17/B-tree/</id>
    <published>2023-08-16T23:07:54.000Z</published>
    <updated>2024-03-30T03:53:16.019Z</updated>
    
    <content type="html"><![CDATA[<h2 id="B-æ ‘çš„ä»‹ç»ï¼ˆä»¥InnoDBä¸ºä¾‹ï¼‰"><a href="#B-æ ‘çš„ä»‹ç»ï¼ˆä»¥InnoDBä¸ºä¾‹ï¼‰" class="headerlink" title="B+æ ‘çš„ä»‹ç»ï¼ˆä»¥InnoDBä¸ºä¾‹ï¼‰"></a>B+æ ‘çš„ä»‹ç»ï¼ˆä»¥InnoDBä¸ºä¾‹ï¼‰</h2><p>InnoDB çš„æ•°æ®æ˜¯æŒ‰ã€Œæ•°æ®é¡µã€ä¸ºå•ä½æ¥è¯»å†™çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå½“éœ€è¦è¯»ä¸€æ¡è®°å½•çš„æ—¶å€™ï¼Œå¹¶ä¸æ˜¯å°†è¿™ä¸ªè®°å½•æœ¬èº«ä»ç£ç›˜è¯»å‡ºæ¥ï¼Œè€Œæ˜¯ä»¥é¡µä¸ºå•ä½ï¼Œå°†å…¶æ•´ä½“è¯»å…¥å†…å­˜ã€‚</p><p>æ•°æ®åº“çš„ I&#x2F;O æ“ä½œçš„æœ€å°å•ä½æ˜¯é¡µï¼ŒInnoDB æ•°æ®é¡µçš„é»˜è®¤å¤§å°æ˜¯ 16KBï¼Œæ„å‘³ç€æ•°æ®åº“æ¯æ¬¡è¯»å†™éƒ½æ˜¯ä»¥ 16KB ä¸ºå•ä½çš„ï¼Œä¸€æ¬¡æœ€å°‘ä»ç£ç›˜ä¸­è¯»å– 16K çš„å†…å®¹åˆ°å†…å­˜ä¸­ï¼Œä¸€æ¬¡æœ€å°‘æŠŠå†…å­˜ä¸­çš„ 16K å†…å®¹åˆ·æ–°åˆ°ç£ç›˜ä¸­ã€‚</p><p>B+æ ‘åªæœ‰å¶å­ç»“ç‚¹å­˜å‚¨æ•°æ®ï¼Œå†…éƒ¨èŠ‚ç‚¹å’Œæ ¹ç»“ç‚¹åªå­˜å‚¨ç´¢å¼•ã€‚</p><p>å¦å¤–ï¼Œç´¢å¼•åˆå¯ä»¥åˆ†æˆèšç°‡ç´¢å¼•å’Œéèšç°‡ç´¢å¼•ï¼ˆäºŒçº§ç´¢å¼•ï¼‰ï¼Œå®ƒä»¬åŒºåˆ«å°±åœ¨äºå¶å­èŠ‚ç‚¹å­˜æ”¾çš„æ˜¯ä»€ä¹ˆæ•°æ®ï¼š</p><ul><li>èšç°‡ç´¢å¼•çš„å¶å­èŠ‚ç‚¹å­˜æ”¾çš„æ˜¯å®é™…æ•°æ®ï¼Œæ‰€æœ‰å®Œæ•´çš„ç”¨æˆ·è®°å½•éƒ½å­˜æ”¾åœ¨èšç°‡ç´¢å¼•çš„å¶å­èŠ‚ç‚¹ï¼›</li><li>äºŒçº§ç´¢å¼•çš„å¶å­èŠ‚ç‚¹å­˜æ”¾çš„æ˜¯ä¸»é”®å€¼ï¼Œè€Œä¸æ˜¯å®é™…æ•°æ®ã€‚</li></ul><h2 id="bustub"><a href="#bustub" class="headerlink" title="bustub"></a>bustub</h2><p>åœ¨è¿™è¿™ä¸ªå®éªŒä¸­åªéœ€è¦å®ç°ä¸‰ä¸ªæ¥å£ï¼šæŸ¥è¯¢ã€æ’å…¥å’Œåˆ é™¤ã€‚</p><p>éœ€è¦ä½¿ç”¨æˆ‘ä»¬åœ¨ Project 1 ä¸­å®ç°çš„ buffer pool manager æ¥è·å– pageã€‚</p><p>internal page ä¸­ï¼ŒKV å¯¹çš„ K æ˜¯èƒ½å¤Ÿæ¯”è¾ƒå¤§å°çš„ç´¢å¼•ï¼ŒV æ˜¯ page idï¼Œç”¨æ¥æŒ‡å‘ä¸‹ä¸€å±‚çš„èŠ‚ç‚¹ã€‚</p><p>leaf page å’Œ internal page çš„å†…å­˜å¸ƒå±€åŸºæœ¬ä¸€æ ·ï¼Œåªæ˜¯ leaf page å¤šäº†ä¸€ä¸ªæˆå‘˜å˜é‡ <code>next_page_id</code>ï¼ŒæŒ‡å‘ä¸‹ä¸€ä¸ª leaf pageï¼ˆç”¨äº range scanï¼‰</p><p>internal page ä¸­å‚¨å­˜ key å’Œ child page idï¼Œé‚£ä¹ˆåœ¨æ‹¿åˆ° page id åå¦‚ä½•è·å¾—å¯¹åº”çš„ page æŒ‡é’ˆï¼Ÿç”¨ Project 1 ä¸­å®ç°çš„ buffer poolã€‚</p><p><code>Page *page = buffer_pool_manager_-&gt;FetchPage(page_id);</code></p><p>æ–°å»ºä¸€ä¸ªç»“ç‚¹&#x2F;Page, ç¤ºä¾‹ä¸ºæ–°å»ºroot</p><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="type">page_id_t</span> page_id;</span><br><span class="line">Page *page = buffer_pool_manager_-&gt;<span class="built_in">NewPage</span>(&amp;page_id);</span><br><span class="line"><span class="keyword">auto</span> leaf_node = <span class="built_in">reinterpret_cast</span>&lt;LeafPage *&gt;(page-&gt;<span class="built_in">GetData</span>());</span><br><span class="line">leaf_node-&gt;<span class="built_in">Init</span>(page_id, INVALID_PAGE_ID, leaf_max_size_);</span><br><span class="line">root_page_id_ = page_id;</span><br><span class="line">buffer_pool_manager_-&gt;<span class="built_in">UnpinPage</span>(page_id, <span class="literal">true</span>);</span><br></pre></td></tr></table></figure><h3 id="find"><a href="#find" class="headerlink" title="find"></a>find</h3><p>æ‰¾åˆ°leaf pageï¼Œç„¶åäºŒåˆ†æ³•æ‰¾åˆ°keyï¼Œå°±èƒ½å¤Ÿæ‰¾åˆ°å¯¹åº”çš„record idã€‚</p><p>å”¯ä¸€è¦æ³¨æ„çš„é—®é¢˜å°±æ˜¯æˆ‘ä»¬åœ¨æ‹¿åˆ° page id åï¼Œè°ƒç”¨ buffer pool çš„ FetchPage() å‡½æ•°æ¥è·å–å¯¹åº”çš„ page æŒ‡é’ˆã€‚è¦æ³¨æ„çš„æ˜¯ï¼Œåœ¨ä½¿ç”¨å®Œ page ä¹‹åï¼Œéœ€è¦å°† page unpin æ‰ï¼Œå¦åˆ™æœ€ç»ˆä¼šå¯¼è‡´ buffer pool ä¸­çš„æ‰€æœ‰ page éƒ½è¢« pin ä½ï¼Œæ— æ³•ä» disk è¯»å–å…¶ä»–çš„ pageã€‚æ¯”è¾ƒåˆé€‚çš„åšæ³•æ˜¯ï¼Œåœ¨æœ¬æ¬¡æ“ä½œä¸­ï¼Œæ‰¾å‡º page æœ€åä¸€æ¬¡è¢«ä½¿ç”¨çš„åœ°æ–¹ï¼Œå¹¶åœ¨æœ€åä¸€æ¬¡ä½¿ç”¨å unpinã€‚</p><h3 id="insert"><a href="#insert" class="headerlink" title="insert"></a>insert</h3><p>å‡è®¾å¶å­ç»“ç‚¹æ’å…¥å€¼ä¹‹åæ»¡äº†ï¼Œè¦è€ƒè™‘breakçš„é—®é¢˜ï¼Œè¦å‘çˆ¶èŠ‚ç‚¹ä¸­æ’å…¥breakä¹‹åæ–°çš„ç´¢å¼•ï¼Œå‡è®¾çˆ¶èŠ‚ç‚¹ä¹Ÿæ»¡äº†ï¼Œä¹Ÿè¦breakï¼ˆè¿™æ˜¯ä¸€ä¸ªé€’å½’çš„è¿‡ç¨‹ï¼‰ï¼Œæ³¨æ„è¿™é‡Œå†…éƒ¨èŠ‚ç‚¹çš„ç¬¬ä¸€ä¸ªä½ç½®åªå­˜æ”¾valueï¼Œè€Œä¸å­˜æ”¾key</p><p><img src="/../imgs/B+insert.png"></p><h3 id="delete"><a href="#delete" class="headerlink" title="delete"></a>delete</h3><p>deleteçš„æ—¶å€™ï¼Œå¦‚æœå½“å‰èŠ‚ç‚¹å°äºæœ€å°sizeï¼ˆMax size&#x2F;2ï¼‰ï¼Œé¦–å…ˆè€ƒè™‘ä»å…„å¼Ÿç»“ç‚¹å·ä¸€ä¸ªè¿‡æ¥ï¼Œå¦‚æœå…„å¼Ÿç»“ç‚¹æŠ•ä¸äº†ï¼Œå°±è€ƒè™‘mergeã€‚å› ä¸ºæ˜¯ä¸€ä¸ªå‘ä¸Šé€’å½’åˆ é™¤çš„è¿‡ç¨‹ï¼Œæ‰€ä»¥mergeçš„æ—¶å€™è¦åŒºåˆ†æ˜¯å¶èŠ‚ç‚¹è¿˜æ˜¯å†…éƒ¨èŠ‚ç‚¹ã€‚</p><p>è¿™é‡Œæ³¨æ„æ˜¯å…ˆåˆ é™¤å†åšmergeæˆ–è€…å·ä¸€ä¸ªkey</p><p><img src="/../imgs/b+delete.png"></p><h3 id="é”çš„é—®é¢˜ï¼š"><a href="#é”çš„é—®é¢˜ï¼š" class="headerlink" title="é”çš„é—®é¢˜ï¼š"></a>é”çš„é—®é¢˜ï¼š</h3><p>èƒèŸ¹å¼åŠ é”ï¼ˆåŒºåˆ†è¯»é”å’Œå†™é”ï¼‰</p><p>å‚è€ƒè¯¾ä»¶:<a href="https://15445.courses.cs.cmu.edu/fall2022/slides/09-indexconcurrency.pdf">https://15445.courses.cs.cmu.edu/fall2022/slides/09-indexconcurrency.pdf</a></p><p>å…ˆç»™çˆ¶èŠ‚ç‚¹åŠ é”ï¼Œç„¶åç»™å­èŠ‚ç‚¹åŠ é”ï¼Œå¦‚æœç¡®è®¤å­èŠ‚ç‚¹å®‰å…¨ï¼ˆä¸ä¼šå‘ç”Ÿmergeæˆ–è€…breakï¼‰ï¼Œæ­¤æ—¶è§£é”çˆ¶èŠ‚ç‚¹</p><p><img src="/../imgs/image-22.png" alt="Alt text"></p><p>å½“å¯»æ‰¾å…„å¼Ÿç»“ç‚¹æ—¶ï¼Œä¸€ä¸ªæŒ‡é’ˆå¾€å‰èµ°ï¼Œå‡è®¾å¦ä¸€ä¸ªè¿›ç¨‹åœ¨å¾€åå¯»æ‰¾å…„å¼Ÿç»“ç‚¹ï¼Œæ­¤æ—¶ä¼šä¸ä¼šå‘ç”Ÿæ­»é”ï¼Ÿ</p><p>ä¸ä¼šï¼Œå› ä¸ºå½“å­èŠ‚ç‚¹éœ€è¦å¯»æ‰¾å…„å¼ŸèŠ‚ç‚¹æ—¶ï¼Œè¯´æ˜æ­¤æ—¶è¯¥èŠ‚ç‚¹ä¸å®‰å…¨ï¼Œæ‰€ä»¥çˆ¶èŠ‚ç‚¹çš„é”ä¸ä¼šé‡Šæ”¾ï¼Œä¹Ÿå°±æ„å‘³ç€å¦ä¸€ä¸ªå­è¿›ç¨‹æ‹¿ä¸åˆ°çˆ¶èŠ‚ç‚¹çš„é”ï¼Œåªä¼šç­‰å¾…ã€‚</p><p>å¦‚ä½•ç¡®å®šè¯¥pageæœ‰æ²¡æœ‰è¢«é”ä½ï¼Ÿä½¿ç”¨äº‹åŠ¡ç®¡ç†ã€‚</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;B-æ ‘çš„ä»‹ç»ï¼ˆä»¥InnoDBä¸ºä¾‹ï¼‰&quot;&gt;&lt;a href=&quot;#B-æ ‘çš„ä»‹ç»ï¼ˆä»¥InnoDBä¸ºä¾‹ï¼‰&quot; class=&quot;headerlink&quot; title=&quot;B+æ ‘çš„ä»‹ç»ï¼ˆä»¥InnoDBä¸ºä¾‹ï¼‰&quot;&gt;&lt;/a&gt;B+æ ‘çš„ä»‹ç»ï¼ˆä»¥InnoDBä¸ºä¾‹ï¼‰&lt;/h2&gt;&lt;p&gt;InnoDB çš„æ•°æ®</summary>
      
    
    
    
    <category term="DataBase" scheme="http://example.com/categories/DataBase/"/>
    
    
    <category term="CMU15-445" scheme="http://example.com/tags/CMU15-445/"/>
    
  </entry>
  
  <entry>
    <title>CMU15-445 buffer pool manager</title>
    <link href="http://example.com/2023/08/17/bufferpool/"/>
    <id>http://example.com/2023/08/17/bufferpool/</id>
    <published>2023-08-16T22:29:40.000Z</published>
    <updated>2024-03-30T03:53:39.910Z</updated>
    
    <content type="html"><![CDATA[<h3 id="æ•°æ®åº“ä¸­ä¸ºä»€ä¹ˆéœ€è¦buffer-poolï¼Ÿ"><a href="#æ•°æ®åº“ä¸­ä¸ºä»€ä¹ˆéœ€è¦buffer-poolï¼Ÿ" class="headerlink" title="æ•°æ®åº“ä¸­ä¸ºä»€ä¹ˆéœ€è¦buffer poolï¼Ÿ"></a>æ•°æ®åº“ä¸­ä¸ºä»€ä¹ˆéœ€è¦buffer poolï¼Ÿ</h3><p>æ•°æ®æ˜¯å­˜å‚¨åœ¨ç£ç›˜é‡Œçš„ï¼Œä½†æ˜¯ä¹Ÿä¸èƒ½æ¯æ¬¡éƒ½ä»ç£ç›˜é‡Œé¢è¯»å–æ•°æ®ï¼Œè¿™æ ·æ€§èƒ½æ˜¯æå·®çš„ã€‚</p><p>è¦æƒ³æå‡æŸ¥è¯¢æ€§èƒ½ï¼Œæ·»åŠ ç¼“å­˜ã€‚æ‰€ä»¥ï¼Œå½“æ•°æ®ä»ç£ç›˜ä¸­å–å‡ºåï¼Œç¼“å­˜å†…å­˜ä¸­ï¼Œä¸‹æ¬¡æŸ¥è¯¢åŒæ ·çš„æ•°æ®çš„æ—¶å€™ï¼Œç›´æ¥ä»å†…å­˜ä¸­è¯»å–ã€‚</p><p>é€šå¸¸å­˜å‚¨çš„æ•°æ®åˆ’åˆ†ä¸ºè‹¥å¹²ä¸ªã€Œé¡µã€ï¼Œä»¥é¡µä½œä¸ºç£ç›˜å’Œå†…å­˜äº¤äº’çš„åŸºæœ¬å•ä½ï¼Œä¸€ä¸ªé¡µçš„é»˜è®¤å¤§å°ä¸º 16KBã€‚å› æ­¤ï¼ŒBuffer Pool åŒæ ·éœ€è¦æŒ‰ã€Œé¡µã€æ¥åˆ’åˆ†ã€‚</p><p>åœ¨MySQLä¸­ï¼ŒInnoDB ä¼šä¸º Buffer Pool ç”³è¯·ä¸€ç‰‡è¿ç»­çš„å†…å­˜ç©ºé—´ï¼Œç„¶åæŒ‰ç…§é»˜è®¤çš„16KBçš„å¤§å°åˆ’åˆ†å‡ºä¸€ä¸ªä¸ªçš„é¡µ(<code>frame</code>)ï¼Œ Buffer Pool ä¸­çš„é¡µå°±å«åšç¼“å­˜é¡µã€‚æ­¤æ—¶è¿™äº›ç¼“å­˜é¡µéƒ½æ˜¯ç©ºé—²(<code>free list</code>)çš„ï¼Œä¹‹åéšç€ç¨‹åºçš„è¿è¡Œï¼Œæ‰ä¼šæœ‰ç£ç›˜ä¸Šçš„é¡µè¢«ç¼“å­˜åˆ° Buffer Pool ä¸­ã€‚</p><h3 id="Buffer-Pool-Manager-éœ€è¦å®ç°çš„åŠŸèƒ½ï¼š"><a href="#Buffer-Pool-Manager-éœ€è¦å®ç°çš„åŠŸèƒ½ï¼š" class="headerlink" title="Buffer Pool Manager éœ€è¦å®ç°çš„åŠŸèƒ½ï¼š"></a>Buffer Pool Manager éœ€è¦å®ç°çš„åŠŸèƒ½ï¼š</h3><p><code>auto NewPgImp(page_id_t *page_id) -&gt; Page * override</code><br>è¿”å›ä¸€ä¸ª<code>Page</code>ï¼ˆé¦–å…ˆæ£€æŸ¥free listä¸­æœ‰æ²¡æœ‰ç©ºé—²çš„Pageï¼Œå¦‚æœæœ‰ä»free listè¿”å›ï¼Œå¦‚æœæ²¡æœ‰ä½¿ç”¨LRU_Kç®—æ³•replaceä¸€ä¸ªé¡µé¢ä¹‹åè¿”å›, æ³¨æ„è¿™é‡Œçš„<code>page_id</code>æ˜¯ä¸€ä¸ªä¼ å…¥å‚æ•°ï¼‰</p><p><code>auto FetchPgImp(page_id_t page_id) -&gt; Page * override;</code><br>åœ¨buffer poolä¸­å¯èƒ½å­˜åœ¨è¿™ä¸ªpage_id, æ ‡è®°ä¸ºvisitä¹‹åè¿”å›ï¼Œä¸å­˜åœ¨å°±å’Œåˆ›å»ºæ–°çš„Pageä¸€æ ·æ“ä½œ</p><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">auto</span> <span class="title">UnpinPgImp</span><span class="params">(<span class="type">page_id_t</span> page_id, <span class="type">bool</span> is_dirty)</span> -&gt; <span class="type">bool</span> <span class="keyword">override</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">auto</span> <span class="title">FlushPgImp</span><span class="params">(<span class="type">page_id_t</span> page_id)</span> -&gt; <span class="type">bool</span> <span class="keyword">override</span></span>;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">FlushAllPgsImp</span><span class="params">()</span> <span class="keyword">override</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">auto</span> <span class="title">DeletePgImp</span><span class="params">(<span class="type">page_id_t</span> page_id)</span> -&gt; <span class="type">bool</span> <span class="keyword">override</span></span>;</span><br></pre></td></tr></table></figure><h3 id="Extendible-Hash-Table"><a href="#Extendible-Hash-Table" class="headerlink" title="Extendible Hash Table"></a>Extendible Hash Table</h3><h4 id="ä¸ºä»€ä¹ˆè¿™é‡Œéœ€è¦ä¸€ä¸ªhashè¡¨ï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆè¿™é‡Œéœ€è¦ä¸€ä¸ªhashè¡¨ï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆè¿™é‡Œéœ€è¦ä¸€ä¸ªhashè¡¨ï¼Ÿ"></a>ä¸ºä»€ä¹ˆè¿™é‡Œéœ€è¦ä¸€ä¸ªhashè¡¨ï¼Ÿ</h4><p>å¤–éƒ¨ä½¿ç”¨çš„å‚æ•°ä¸º<code>page_id</code> , å†…éƒ¨è½¬æ¢ä¸º<code>frame_id</code>, æ¯ä¸€ä¸ªframeå¯¹åº”ç€ä¸€ä¸ªpageã€‚ä»<code>page_id</code>è½¬æ¢ä¸º<code>frame_id</code>é€šè¿‡hashè¡¨å®ç°ã€‚</p><p><strong>é‡ç‚¹åœ¨äºå¦‚ä½•å»ç®¡ç†æ¡¶ï¼Œå½“æ¡¶æ»¡äº†å†æ’å…¥æ—¶åº”è¯¥å¦‚ä½•æ“ä½œã€‚</strong></p><p>æ¯ä¸ªæ¡¶ï¼ˆbucketï¼‰éƒ½æœ‰ä¸€ä¸ªæœ¬åœ°æ·±åº¦ï¼ˆlocal depthï¼‰å’Œä¸€ä¸ªå…¨å±€æ·±åº¦ï¼ˆglobal depthï¼‰</p><p>æœ¬åœ°æ·±åº¦æ˜¯æŒ‡æ¯ä¸ªæ¡¶ä¸­å­˜å‚¨çš„é”®å€¼å¯¹çš„å“ˆå¸Œå€¼çš„å‰ç¼€é•¿åº¦ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæœ¬åœ°æ·±åº¦ä¸º2ï¼Œåˆ™æ¡¶ä¸­å­˜å‚¨çš„é”®å€¼å¯¹çš„å“ˆå¸Œå€¼çš„å‰ä¸¤ä½å¿…é¡»ç›¸åŒã€‚</p><p>å…¨å±€æ·±åº¦æ˜¯æŒ‡å“ˆå¸Œè¡¨ä¸­æ‰€æœ‰æ¡¶çš„æœ¬åœ°æ·±åº¦çš„æœ€å¤§å€¼ã€‚å®ƒè¡¨ç¤ºå“ˆå¸Œè¡¨çš„ç´¢å¼•ç©ºé—´çš„å¤§å°ã€‚</p><p>å¦‚æœæ’å…¥æ—¶å…¨å±€æ·±åº¦ç­‰äºæœ¬åœ°æ·±åº¦ï¼Œå“ˆå¸Œç›®å½•æ‰©å±•ä¸ºä¸¤å€ï¼ˆå·¦ç§»ä¸€ä½ï¼‰<br>æ­¤æ—¶é’ˆå¯¹æ¡¶çš„å¤„ç†æœ€ç®€å•çš„åŠæ³•æ˜¯ä¹Ÿæ–°å»ºä¸€å€çš„æ¡¶ï¼Œæ¯ä¸€ä¸ªæ¡¶å¯¹åº”ç€æ¯ä¸ªç´¢å¼•ï¼Œä½†æ˜¯è¿™æ ·å¾ˆæµªè´¹ç©ºé—´ï¼Œå½“æœ‰æ•°æ®æ’å…¥çš„æ—¶å€™å†è€ƒè™‘æ–°å»ºæ¡¶ã€‚<br>æ‰©å±•ç›®å½•ä¸ºdoubleï¼Œæ›´æ–°indexï¼Œå°†æ¡¶ä¸­çš„æ•°æ®é‡æ–°æ’å…¥åˆ°æ–°çš„æ¡¶ä¸­ã€‚</p><p><img src="/../imgs/image-21.png" alt="Alt text"></p><h3 id="LRU-Kç®—æ³•"><a href="#LRU-Kç®—æ³•" class="headerlink" title="LRU_Kç®—æ³•"></a>LRU_Kç®—æ³•</h3><p>å’Œä¼ ç»Ÿçš„LRUä¸ä¸€æ ·çš„åœ°æ–¹åœ¨äºï¼Œä¼ ç»Ÿçš„LRUæ˜¯æ·˜æ±°æœ€è¿‘æœªä½¿ç”¨çš„ï¼Œè€ŒLRU_Kå¤šç»´æŠ¤äº†ä¸€ä¸ªrecordé“¾è¡¨ï¼Œç”¨äºè®°å½•è®¿é—®æ¬¡æ•°å¤§äºç­‰äºKçš„Pageï¼Œå½“æ·˜æ±°æ—¶ä¼˜å…ˆæ·˜æ±°è®¿é—®æ¬¡æ•°å°äºKæ¬¡çš„ï¼Œè‹¥æ‰€æœ‰çš„Pageè®¿é—®æ¬¡æ•°éƒ½å¤§äºKæ¬¡æ‰ä»recordé“¾è¡¨ä¸­å»æ·˜æ±°ã€‚</p><p><img src="/../imgs/image-20.png" alt="Alt text"></p><h3 id="å…·ä½“å®ç°"><a href="#å…·ä½“å®ç°" class="headerlink" title="å…·ä½“å®ç°"></a>å…·ä½“å®ç°</h3><p><img src="/../imgs/bufferpool.png"></p><h3 id="tips"><a href="#tips" class="headerlink" title="tips"></a>tips</h3><ul><li><p>æ˜¯å¦æ˜¯dirtyï¼Œæ˜¯åœ¨Pageå†…éƒ¨ç”¨å˜é‡æ ‡è¯†çš„ï¼Œåœ¨buffer poolä¸­æ²¡æœ‰ä½¿ç”¨é¢å¤–çš„listç®¡ç†è„é¡µã€‚</p></li><li><p>åœ¨buffer poolä¸­çš„Page arrayçš„ä½œç”¨ï¼š<code>pages_</code>ç”¨æ¥ç®¡ç†å·²ç»åœ¨bufferp poolä¸­çš„Page</p><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> (page_table_-&gt;<span class="built_in">Find</span>(page_id, frame_id)) &#123;</span><br><span class="line">    replacer_-&gt;<span class="built_in">RecordAccess</span>(frame_id);</span><br><span class="line">    replacer_-&gt;<span class="built_in">SetEvictable</span>(frame_id, <span class="literal">false</span>);</span><br><span class="line">    pages_[frame_id].pin_count_++;</span><br><span class="line">    <span class="keyword">return</span> &amp;pages_[frame_id];</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;h3 id=&quot;æ•°æ®åº“ä¸­ä¸ºä»€ä¹ˆéœ€è¦buffer-poolï¼Ÿ&quot;&gt;&lt;a href=&quot;#æ•°æ®åº“ä¸­ä¸ºä»€ä¹ˆéœ€è¦buffer-poolï¼Ÿ&quot; class=&quot;headerlink&quot; title=&quot;æ•°æ®åº“ä¸­ä¸ºä»€ä¹ˆéœ€è¦buffer poolï¼Ÿ&quot;&gt;&lt;/a&gt;æ•°æ®åº“ä¸­ä¸ºä»€ä¹ˆéœ€è¦buffer poolï¼Ÿ&lt;/</summary>
      
    
    
    
    <category term="DataBase" scheme="http://example.com/categories/DataBase/"/>
    
    
    <category term="CMU15-445" scheme="http://example.com/tags/CMU15-445/"/>
    
  </entry>
  
  <entry>
    <title>mallocæ˜¯å¦‚ä½•å’Œç‰©ç†åœ°å€å…³è”ä¸Šçš„ï¼Ÿ</title>
    <link href="http://example.com/2023/08/16/malloc%E6%98%AF%E5%A6%82%E4%BD%95%E5%92%8C%E7%89%A9%E7%90%86%E5%9C%B0%E5%9D%80%E5%85%B3%E8%81%94%E4%B8%8A%E7%9A%84/"/>
    <id>http://example.com/2023/08/16/malloc%E6%98%AF%E5%A6%82%E4%BD%95%E5%92%8C%E7%89%A9%E7%90%86%E5%9C%B0%E5%9D%80%E5%85%B3%E8%81%94%E4%B8%8A%E7%9A%84/</id>
    <published>2023-08-16T09:38:52.000Z</published>
    <updated>2024-03-30T03:55:21.277Z</updated>
    
    <content type="html"><![CDATA[<p><img src="/../imgs/image-19.png"></p><ol><li><p>mallocå‡½æ•°ç”¨äºåœ¨å †ä¸ŠåŠ¨æ€åˆ†é…å†…å­˜,å®ƒä¼šå‘æ“ä½œç³»ç»Ÿè¯·æ±‚ä¸€å—æœªä½¿ç”¨çš„å†…å­˜,ç„¶åè¿”å›è¿™å—å†…å­˜çš„åœ°å€ã€‚</p></li><li><p>æ“ä½œç³»ç»Ÿç»´æŠ¤ç€å¯ç”¨ç‰©ç†å†…å­˜çš„ä¿¡æ¯,çŸ¥é“å“ªäº›å†…å­˜åœ°å€ å½“å‰æœªè¢«ä½¿ç”¨ã€‚å½“æ”¶åˆ°mallocçš„è¯·æ±‚æ—¶,å®ƒä¼šä»å¯ç”¨ç‰©ç†å†…å­˜ä¸­é€‰æ‹©ä¸€å—æœªä½¿ç”¨çš„å†…å­˜,å°†å…¶æ ‡è®°ä¸ºå·²åˆ†é…,å¹¶è¿”å›ç»™åº”ç”¨ç¨‹åºã€‚</p></li><li><p>åœ¨32ä½ç³»ç»Ÿä¸­,mallocè¿”å›çš„åœ°å€æ˜¯è™šæ‹Ÿåœ°å€,éœ€è¦ç»è¿‡MMUåœ°å€è½¬æ¢æ‰¾åˆ°å¯¹åº”çš„ç‰©ç†åœ°å€ã€‚64ä½ç³»ç»Ÿä¸­,mallocçš„åœ°å€ç©ºé—´é€šå¸¸å°±ç›´æ¥å¯¹åº”ç‰©ç†åœ°å€ç©ºé—´ã€‚</p><p> a. åœ¨32ä½ç³»ç»Ÿä¸­,CPUå¯ä»¥å¯»å€çš„è™šæ‹Ÿåœ°å€ç©ºé—´æ¯”è¾ƒå°,ä¸€èˆ¬ä¸º4GBå·¦å³ã€‚è€Œç‰©ç†å†…å­˜å¯èƒ½ä¼šè¶…è¿‡4GBã€‚ä¸ºäº†è®©è¿›ç¨‹å¯ä»¥è®¿é—®è¶…è¿‡4GBçš„ç‰©ç†å†…å­˜,æ“ä½œç³»ç»Ÿä¼šä½¿ç”¨è™šæ‹Ÿå†…å­˜æŠ€æœ¯,å°†è™šæ‹Ÿåœ°å€æ˜ å°„åˆ°ç‰©ç†åœ°å€ä¸Šã€‚mallocè¿”å›çš„è™šæ‹Ÿåœ°å€éœ€è¦é€šè¿‡MMU(å†…å­˜ç®¡ç†å•å…ƒ)ç¿»è¯‘æˆç‰©ç†åœ°å€,æ‰èƒ½çœŸæ­£è®¿é—®åˆ°å†…å­˜ã€‚</p><p> b. è€Œåœ¨64ä½ç³»ç»Ÿä¸­,è™šæ‹Ÿåœ°å€ç©ºé—´å·¨å¤§(16EB),è¿œè¿œå¤§äºå½“å‰çš„ç‰©ç†å†…å­˜å¤§å°ã€‚æ‰€ä»¥æ“ä½œç³»ç»Ÿå¯ä»¥é€‰æ‹©æŠŠè™šæ‹Ÿåœ°å€ç›´æ¥æ˜ å°„åˆ°ç‰©ç†åœ°å€ä¸Š,è¿™ç§ç§°ä¸ºå¹³å¦å†…å­˜æ¨¡å‹ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹,mallocè¿”å›çš„åœ°å€å°±æ˜¯ç‰©ç†åœ°å€,ä¸éœ€è¦å†åšåœ°å€è½¬æ¢ã€‚åº”ç”¨ç¨‹åºæŠŠmallocè¿”å›çš„åœ°å€ç›´æ¥ä½œä¸ºç‰©ç†åœ°å€ä½¿ç”¨å³å¯ã€‚</p></li></ol><h3 id="å¹³å¦å†…å­˜æ¨¡å‹-Flat-Memory-Model"><a href="#å¹³å¦å†…å­˜æ¨¡å‹-Flat-Memory-Model" class="headerlink" title="å¹³å¦å†…å­˜æ¨¡å‹(Flat Memory Model)"></a>å¹³å¦å†…å­˜æ¨¡å‹(Flat Memory Model)</h3><ol><li>åœ¨å¹³å¦å†…å­˜æ¨¡å‹ä¸‹,è¿›ç¨‹çš„è™šæ‹Ÿåœ°å€ä¸ç‰©ç†åœ°å€æ˜¯ä¸€ä¸€å¯¹åº”çš„ã€‚æ“ä½œç³»ç»Ÿä¸ä¼šè¿›è¡Œåœ°å€è½¬æ¢,è¿›ç¨‹ä½¿ç”¨çš„è™šæ‹Ÿåœ°å€å°±æ˜¯å¯¹åº”ç‰©ç†å†…å­˜çš„ç‰©ç†åœ°å€ã€‚</li><li>ç”±äºè™šæ‹Ÿåœ°å€ç›´æ¥å¯¹åº”ç‰©ç†åœ°å€,ä¸éœ€è¦è¿›è¡Œåœ°å€è½¬æ¢,æ‰€ä»¥çœå»äº†åœ°å€è½¬æ¢æ‰€å¸¦æ¥çš„æ€§èƒ½å¼€é”€ã€‚</li><li>ç¨‹åºç›´æ¥ä½¿ç”¨è™šæ‹Ÿåœ°å€è®¿é—®ç‰©ç†å†…å­˜,ä¸éœ€è¦åŒºåˆ†é€»è¾‘åœ°å€å’Œç‰©ç†åœ°å€,ç¼–ç¨‹æ¨¡å‹ç®€å•ã€‚</li><li>64ä½ç³»ç»Ÿæ‹¥æœ‰æå…¶å¤§çš„è™šæ‹Ÿåœ°å€ç©ºé—´(16EB),ä½¿å¾—ç›´æ¥æ˜ å°„æˆä¸ºå¯èƒ½ã€‚è™šæ‹Ÿåœ°å€ç©ºé—´å¤§äºç›®å‰çš„ç‰©ç†å†…å­˜å®¹é‡ã€‚</li><li>ç”±äºçœå»äº†å†…å­˜è™šæ‹ŸåŒ–,æ— æ³•å®ç°å¼¹æ€§è°ƒé…ç‰©ç†é¡µæ¡†,å¯èƒ½ä¼šå‡ºç°è¾ƒä¸¥é‡çš„å†…å­˜ç¢ç‰‡ã€‚</li><li>å¾ˆå¤š64ä½ç³»ç»Ÿä¸ä¼šé€‰æ‹©å®Œå…¨å¹³å¦çš„æ¨¡å‹,è€Œæ˜¯åœ¨ä¸€å®šèŒƒå›´å†…åšæ˜ å°„,åŒæ—¶é…åˆé¡µè¡¨å®ç°è™šæ‹Ÿå†…å­˜ã€‚ç»¼åˆåˆ©ç”¨äº†å¹³å¦æ¨¡å‹ä¸ä¼ ç»Ÿè™šæ‹Ÿå†…å­˜çš„ä¼˜ç‚¹ã€‚</li></ol><h3 id="MMU-Memory-Management-Unit"><a href="#MMU-Memory-Management-Unit" class="headerlink" title="MMU(Memory Management Unit)"></a>MMU(Memory Management Unit)</h3><p>æœ‰äº›ç³»ç»ŸMMUé›†æˆåœ¨CPUä¸­ï¼Œæœ‰äº›ç³»ç»Ÿæ˜¯å•ç‹¬èŠ¯ç‰‡å®ç°ï¼Œé€šè¿‡åœ°å€æ€»çº¿å’ŒCPUè¿æ¥ã€‚ï¼ˆåœ°å€æ€»çº¿ã€æ•°æ®æ€»çº¿ã€æ§åˆ¶æ€»çº¿â€“&gt;ä¼ é€’ä¿¡å·ï¼‰</p><ol><li>åœ°å€è½¬æ¢ MMUè´Ÿè´£å°†CPUäº§ç”Ÿçš„è™šæ‹Ÿåœ°å€è½¬æ¢æˆç‰©ç†åœ°å€ã€‚è½¬æ¢è¿‡ç¨‹éœ€è¦å‚è€ƒTLB,æ ¹æ®è™šæ‹Ÿåœ°å€çš„é«˜ä½æ‰¾åˆ°å¯¹åº”çš„é¡µè¡¨é¡¹,ç¿»è¯‘å‡ºç‰©ç†é¡µå·,ä¸è™šæ‹Ÿåœ°å€çš„ä½ä½ç»„åˆæˆç‰©ç†åœ°å€ã€‚</li><li>é¡µé¢ç½®æ¢ å½“è®¿é—®çš„é¡µé¢ä¸åœ¨ç‰©ç†å†…å­˜æ—¶,MMUä¼šè§¦å‘é¡µé¢ç½®æ¢ï¼ˆ<em>é¡µé¢ç½®æ¢ç®—æ³•é€šå¸¸ä¸æ˜¯ç”±MMU(å†…å­˜ç®¡ç†å•å…ƒ)ç›´æ¥å®ç°çš„,è€Œæ˜¯ç”±æ“ä½œç³»ç»Ÿå†…æ ¸çš„è™šæ‹Ÿå†…å­˜ç®¡ç†å­ç³»ç»Ÿæ¥å®ç°ã€‚é¡µè¡¨å’Œåœ°å€è½¬æ¢æ˜¯ç”±MMUç¡¬ä»¶æ¥å®Œæˆ,ä½†ç¡®å®šå“ªäº›é¡µé¢éœ€è¦æ¢å‡ºã€åŠ è½½,ä»¥åŠé¡µé¢æ›¿æ¢ç­–ç•¥åˆ™ç”±æ“ä½œç³»ç»Ÿå†…æ ¸çš„è™šæ‹Ÿå†…å­˜ç®¡ç†æœºåˆ¶å†³å®šã€‚</em>ï¼‰,å°†å†…å­˜ä¸­çš„æŸä¸€é¡µæ¢å‡º,å°†éœ€è¦è®¿é—®çš„é¡µæ¢å…¥ç‰©ç†å†…å­˜ã€‚</li><li>å­˜å–æƒé™æ£€æŸ¥ MMUä¼šæ£€æŸ¥æ¯æ¬¡åœ°å€è½¬æ¢åçš„ç‰©ç†å†…å­˜è®¿é—®æƒé™,ä¾‹å¦‚æ˜¯å¦å¯è¯»ã€å¯å†™ã€å¯æ‰§è¡Œ,é¿å…éæ³•è®¿é—®ã€‚</li><li>ç¼“å­˜ä¸€è‡´æ€§ MMUä¼šä¸CPUç¼“å­˜ååŒå·¥ä½œ,å®ç°ç¼“å­˜ä¸€è‡´æ€§,ä¿è¯å†…å­˜è®¿é—®æ­£ç¡®ã€‚</li><li>åœ°å€ç©ºé—´éš”ç¦» MMUä¸ºæ¯ä¸ªè¿›ç¨‹ç»´æŠ¤ä¸€ä¸ªç‹¬ç«‹çš„åœ°å€ç©ºé—´,å®ç°è¿›ç¨‹é—´çš„å†…å­˜éš”ç¦»ã€‚</li><li>ä¸­æ–­ä¸å¼‚å¸¸ è‹¥åœ°å€éæ³•æˆ–è€…ç¼ºé¡µç­‰å¼‚å¸¸,MMUä¼šè§¦å‘ä¸­æ–­ä¿¡å·,é€šçŸ¥CPUè¿›è¡Œå¼‚å¸¸å¤„ç†ã€‚</li><li>ç¡¬ä»¶ç¼“å­˜ éƒ¨åˆ†MMUé›†æˆäº†TLBç­‰ç¼“å­˜ç»“æ„,åŠ é€Ÿåœ°å€è½¬æ¢çš„é€Ÿåº¦ã€‚</li></ol><h3 id="ä¸ºä»€ä¹ˆMMUå¯ä»¥è§£å†³å†…å­˜ç¢ç‰‡çš„é—®é¢˜ï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆMMUå¯ä»¥è§£å†³å†…å­˜ç¢ç‰‡çš„é—®é¢˜ï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆMMUå¯ä»¥è§£å†³å†…å­˜ç¢ç‰‡çš„é—®é¢˜ï¼Ÿ"></a>ä¸ºä»€ä¹ˆMMUå¯ä»¥è§£å†³å†…å­˜ç¢ç‰‡çš„é—®é¢˜ï¼Ÿ</h3><ol><li>MMUå®ç°äº†è™šæ‹Ÿåœ°å€åˆ°ç‰©ç†åœ°å€çš„æ˜ å°„,ç¨‹åºåªéœ€è¦ä¸€ä¸ªè¿ç»­çš„è™šæ‹Ÿåœ°å€ç©ºé—´ã€‚æ“ä½œç³»ç»Ÿå¯ä»¥å°†ä¸è¿ç»­çš„ç‰©ç†å†…å­˜ç‰‡æ®µæ˜ å°„åˆ°è¯¥è¿ç»­è™šæ‹Ÿåœ°å€ç©ºé—´ä¸Šã€‚é€šè¿‡è¿™ç§æ˜ å°„,å³ä½¿ç‰©ç†å†…å­˜åˆ†å¸ƒä¸è¿ç»­,ç¨‹åºè§†å›¾ä¹Ÿæ˜¯ä¸€ä¸ªè¿ç»­ç©ºé—´,å¯ä»¥ä»»æ„ä½¿ç”¨è€Œä¸ä¼šå‡ºç°ç¢ç‰‡ã€‚æ“ä½œç³»ç»Ÿä¼šè´Ÿè´£è¿™äº›ä¸è¿ç»­ç‰©ç†é¡µçš„æ˜ å°„å’Œè°ƒåº¦,å¯¹ä¸Šå±‚åº”ç”¨é€æ˜ã€‚</li><li>å½“ç‰©ç†å†…å­˜ä½¿ç”¨äº§ç”Ÿå¤–éƒ¨ç¢ç‰‡æ—¶,è™šæ‹Ÿå­˜å‚¨æŠ€æœ¯å¯ä»¥è¿›è¡Œç¢ç‰‡å›æ”¶,å°†é—²ç½®çš„å°å—å†…å­˜æ˜ å°„ç»™å…¶ä»–ç¨‹åºä½¿ç”¨ã€‚</li><li>åŒæ—¶,è™šæ‹Ÿå†…å­˜å¯ä»¥å°†æš‚æ—¶ä¸ç”¨çš„å†…å­˜é¡µæ¢å‡ºåˆ°ç£ç›˜,è…¾å‡ºç‰©ç†å†…å­˜ç©ºé—´ä¾›å…¶ä»–ç¨‹åºä½¿ç”¨,å‡å°‘å†…å­˜ç¢ç‰‡ã€‚</li><li>è¿›è€Œé¿å…äº†ä¸¥é‡çš„å¤–éƒ¨ç¢ç‰‡,æé«˜äº†ç‰©ç†å†…å­˜çš„åˆ©ç”¨æ•ˆç‡ã€‚</li></ol><h3 id="ç¼“å­˜ä¸€è‡´æ€§"><a href="#ç¼“å­˜ä¸€è‡´æ€§" class="headerlink" title="ç¼“å­˜ä¸€è‡´æ€§"></a>ç¼“å­˜ä¸€è‡´æ€§</h3><p>ä¸€ä¸ªè®¡ç®—ç³»ç»Ÿé€šå¸¸åŒ…å«å¤šçº§ç¼“å­˜,ä»»ä½•ä¸¤ä¸ªå­˜å‚¨å±‚æ¬¡ä¹‹é—´éƒ½å¯èƒ½å­˜åœ¨æ•°æ®ä¸€è‡´æ€§çš„é—®é¢˜ã€‚</p><ol><li><p>CPUç¼“å­˜ä¸ç¡¬ç›˜ç¼“å­˜</p></li><li><p>å¤šæ ¸CPUä¹‹é—´</p></li><li><p>å„çº§ç³»ç»Ÿç¼“å­˜ä¹‹é—´</p><p> MMUä¸CPUç¼“å­˜çš„ä¸€è‡´æ€§æ˜¯é€šè¿‡ä»¥ä¸‹å‡ ç§æ–¹å¼å®ç°çš„:<br> a. ç¼“å­˜ä¸€è‡´æ€§åè®® CPUå’ŒMMUä¹‹é—´é€šè¿‡ä¸€å®šçš„ç¡¬ä»¶åè®®(å¦‚Intelçš„MESIåè®®)æ¥ç»´æŒç¼“å­˜å’Œä¸»å­˜çš„æ•°æ®ä¸€è‡´æ€§ã€‚å½“ç¼“å­˜æ•°æ®è¢«ä¿®æ”¹æ—¶,ä¼šæ ¹æ®åè®®è§„åˆ™é€šçŸ¥MMUå°†ä¸»å­˜æ›´æ–°ã€‚</p><p> b. ç¼“å­˜é”å®š é’ˆå¯¹ä¸€äº›å…³é”®æ•°æ®,CPUç¼“å­˜ä¼šè¢«é”å®š,æ¯æ¬¡è®¿é—®å¿…é¡»ä»MMUåŠ è½½,è€Œä¸æ˜¯ç¼“å­˜ä¸­çš„æ‹·è´ã€‚ä¿è¯äº†è¿™éƒ¨åˆ†æ•°æ®çš„ä¸€è‡´æ€§ã€‚</p><p> c. åœ°å€ç¿»è¯‘è¡¨åŒæ­¥ åœ°å€ç¿»è¯‘è¡¨å¦‚TLBä¹Ÿå­˜æ”¾åœ¨CPUé«˜é€Ÿç¼“å­˜ä¸­,MMUä¼šåŒæ­¥æ›´æ–°CPUä¸­çš„ç¿»è¯‘è¡¨ç¼“å­˜,ä¿è¯è®¿é—®è·å–çš„æ˜¯æœ€æ–°ç¿»è¯‘å…³ç³»ã€‚</p><p> d. ç¼“å­˜è¡Œæ³¨é‡Š MMUå¯ä»¥å‘ç¼“å­˜ä¸­çš„ç¼“å­˜è¡Œæ·»åŠ æ ‡è®°ä¿¡æ¯,å¦‚æ˜¯å¦å¯ç¼“å­˜ã€æ˜¯å¦å·²ä¿®æ”¹ç­‰,æ–¹ä¾¿ç¼“å­˜æ§åˆ¶ã€‚</p></li><li><p>åˆ†å¸ƒå¼ç¼“å­˜ç³»ç»Ÿ</p></li><li><p>å­˜å‚¨è®¾å¤‡ä¹‹é—´</p></li><li><p>å®¢æˆ·ç«¯ç¼“å­˜</p></li></ol><h3 id="mallocè°ƒç”¨æ—¶ä»€ä¹ˆæ—¶å€™ç”¨sys-mmap-ä»€ä¹ˆæ—¶å€™ç”¨brkï¼Ÿ"><a href="#mallocè°ƒç”¨æ—¶ä»€ä¹ˆæ—¶å€™ç”¨sys-mmap-ä»€ä¹ˆæ—¶å€™ç”¨brkï¼Ÿ" class="headerlink" title="mallocè°ƒç”¨æ—¶ä»€ä¹ˆæ—¶å€™ç”¨sys_mmap, ä»€ä¹ˆæ—¶å€™ç”¨brkï¼Ÿ"></a>mallocè°ƒç”¨æ—¶ä»€ä¹ˆæ—¶å€™ç”¨sys_mmap, ä»€ä¹ˆæ—¶å€™ç”¨brkï¼Ÿ</h3><p>åœ¨è°ƒç”¨mallocæ—¶ä¼šäº§ç”Ÿç³»ç»Ÿè°ƒç”¨ï¼Œåˆ‡æ¢åˆ°å†…æ ¸æ€ï¼Œç„¶åæ‰§è¡Œç³»ç»Ÿè°ƒç”¨<br>åœ¨mallocè°ƒç”¨æ—¶,æ˜¯å¦ä½¿ç”¨sys_mmapæˆ–brkåˆ†é…å†…å­˜,ä¸»è¦å–å†³äºè¯·æ±‚çš„å†…å­˜å¤§å°:</p><ol><li>å¯¹äºè¾ƒå°çš„å†…å­˜è¯·æ±‚,mallocé€šå¸¸ä¼šä½¿ç”¨brkç³»ç»Ÿè°ƒç”¨å»æ‰©å±•ç¨‹åºçš„å †åŒºã€‚</li><li>å½“è¯·æ±‚è¾ƒå¤§å†…å­˜é¡µ(ä¸€èˆ¬è¶…è¿‡128KB)æ—¶,mallocä¼šä½¿ç”¨mmapç³»ç»Ÿè°ƒç”¨å»æ˜ å°„åŒ¿åå†…å­˜é¡µã€‚</li></ol><p>mmapç›¸æ¯”brkçš„ä¼˜åŠ¿åœ¨äº:</p><ul><li>å¯ä»¥æŒ‡å®šåœ°å€å¯¹é½,æé«˜æ•ˆç‡</li><li>å¯ä»¥éšæ—¶é‡Šæ”¾ä¸è¿ç»­çš„å¤§å†…å­˜å—</li><li>é¿å…å †åŒºç¢ç‰‡</li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;&lt;img src=&quot;/../imgs/image-19.png&quot;&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;p&gt;mallocå‡½æ•°ç”¨äºåœ¨å †ä¸ŠåŠ¨æ€åˆ†é…å†…å­˜,å®ƒä¼šå‘æ“ä½œç³»ç»Ÿè¯·æ±‚ä¸€å—æœªä½¿ç”¨çš„å†…å­˜,ç„¶åè¿”å›è¿™å—å†…å­˜çš„åœ°å€ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;æ“ä½œç³»ç»Ÿç»´æŠ¤ç€å¯ç”¨ç‰©ç†å†…å­˜çš„ä¿¡æ¯,çŸ¥é“</summary>
      
    
    
    
    <category term="Operating System" scheme="http://example.com/categories/Operating-System/"/>
    
    
  </entry>
  
  <entry>
    <title>hexo Cannot GET/</title>
    <link href="http://example.com/2023/08/15/hexo_Cannot_GET/"/>
    <id>http://example.com/2023/08/15/hexo_Cannot_GET/</id>
    <published>2023-08-14T23:33:02.000Z</published>
    <updated>2024-03-30T03:54:56.007Z</updated>
    
    <content type="html"><![CDATA[<p><strong>é—®é¢˜ï¼š</strong></p><p>åœ¨hexoæ­å»ºåšå®¢çš„è¿‡ç¨‹ä¸­ï¼Œå‡ºç°Cannot GET&#x2F;xxxçš„é”™è¯¯ã€‚</p><h3 id="æŸ¥çœ‹æ˜¯å¦ç¼ºå°‘ç»„ä»¶"><a href="#æŸ¥çœ‹æ˜¯å¦ç¼ºå°‘ç»„ä»¶" class="headerlink" title="æŸ¥çœ‹æ˜¯å¦ç¼ºå°‘ç»„ä»¶"></a>æŸ¥çœ‹æ˜¯å¦ç¼ºå°‘ç»„ä»¶</h3><ol><li><p>åˆ°publicç›®å½•ä¸‹æ‰¾åˆ°xxxæ–‡ä»¶æ˜¯å¦å­˜åœ¨ï¼Œæˆ‘çš„é”™è¯¯æ˜¯<code>Cannot GET/</code>ï¼Œæ‰€ä»¥å»æ‰¾<code>index.html</code>æ˜¯å¦å­˜åœ¨ã€‚</p></li><li><p>ä¸å­˜åœ¨ï¼Œæ‰§è¡Œ<code>hexo clean &amp;&amp; hexo g</code>é‡æ–°ç”Ÿæˆ</p></li><li><p>è¿˜æ˜¯ä¸å­˜åœ¨ï¼Œæ‰§è¡Œ<code>npm audit fix</code>æˆ–è€…æ˜¯<code>npm ls --depth 0</code>ï¼ŒæŸ¥çœ‹æ˜¯å¦ç¼ºå°‘ç»„ä»¶ã€‚é€šè¿‡<code>npm install hexo-xxx-xxx</code>å®‰è£…</p></li><li><p>æ‰§è¡Œå®Œæ¯•åå‘ç°æˆ‘å¹¶ä¸ç¼ºå°‘ç»„ä»¶ã€‚å°è¯•å…¶ä»–è§£å†³åŠæ³•ã€‚</p></li></ol><h3 id="è·¯å¾„é—®é¢˜"><a href="#è·¯å¾„é—®é¢˜" class="headerlink" title="è·¯å¾„é—®é¢˜"></a>è·¯å¾„é—®é¢˜</h3><p><code>configâ€“&gt;index.js</code>ä¸­çš„ <code>assetsPublicPath: &#39;/&#39;</code>æ”¹æˆ<code>assetsPublicPath: â€˜./â€™</code></p><h3 id="æ²¡æœ‰æ–‡ä»¶"><a href="#æ²¡æœ‰æ–‡ä»¶" class="headerlink" title="æ²¡æœ‰æ–‡ä»¶"></a>æ²¡æœ‰æ–‡ä»¶</h3><p>åœ¨è·¯å¾„<code>\source\_posts\</code>ä¸­è‡³å°‘éœ€è¦å­˜æ”¾ä¸€ç¯‡æ–‡æ¡£ï¼Œå¦åˆ™ä¼šå‡ºç°<code>Cannot GET/</code>é”™è¯¯ã€‚</p><h3 id="nodejsç­‰çº§å¤ªé«˜"><a href="#nodejsç­‰çº§å¤ªé«˜" class="headerlink" title="nodejsç­‰çº§å¤ªé«˜"></a>nodejsç­‰çº§å¤ªé«˜</h3><p>å®˜æ–¹æ–‡æ¡£å‚è€ƒé“¾æ¥ï¼š<a href="https://hexo.io/zh-cn/docs/index.html">https://hexo.io/zh-cn/docs/index.html</a></p><p><img src="/../imgs/image-1.png"></p><h3 id="æ–‡ä»¶åé—®é¢˜"><a href="#æ–‡ä»¶åé—®é¢˜" class="headerlink" title="æ–‡ä»¶åé—®é¢˜"></a>æ–‡ä»¶åé—®é¢˜</h3><p>å°†æ‰€æœ‰markdownæ–‡ä»¶çš„åç§°æ›¿æ¢ä¸ºè‹±æ–‡</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;&lt;strong&gt;é—®é¢˜ï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;åœ¨hexoæ­å»ºåšå®¢çš„è¿‡ç¨‹ä¸­ï¼Œå‡ºç°Cannot GET&amp;#x2F;xxxçš„é”™è¯¯ã€‚&lt;/p&gt;
&lt;h3 id=&quot;æŸ¥çœ‹æ˜¯å¦ç¼ºå°‘ç»„ä»¶&quot;&gt;&lt;a href=&quot;#æŸ¥çœ‹æ˜¯å¦ç¼ºå°‘ç»„ä»¶&quot; class=&quot;headerlink&quot; title=&quot;æŸ¥</summary>
      
    
    
    
    <category term="Solutions" scheme="http://example.com/categories/Solutions/"/>
    
    
    <category term="hexo" scheme="http://example.com/tags/hexo/"/>
    
  </entry>
  
  <entry>
    <title>leetcodeé¢˜è§£åˆé›†</title>
    <link href="http://example.com/2022/10/15/leetoce%E9%A2%98%E8%A7%A3%E5%90%88%E9%9B%86/"/>
    <id>http://example.com/2022/10/15/leetoce%E9%A2%98%E8%A7%A3%E5%90%88%E9%9B%86/</id>
    <published>2022-10-14T23:33:02.000Z</published>
    <updated>2024-03-30T03:55:14.270Z</updated>
    
    <content type="html"><![CDATA[<h3 id="DFS-å›æº¯"><a href="#DFS-å›æº¯" class="headerlink" title="DFS&#x2F;å›æº¯"></a>DFS&#x2F;å›æº¯</h3><p><strong>ä»¥æ•´æ•°æ‹†åˆ†ä¸ºä¾‹ï¼š</strong><br><img src="/../imgs/image-5.png"></p><p><strong>å‰ªææ¡ä»¶</strong></p><ul><li>å½“å’Œä¸ºnæ—¶ï¼Œä¿å­˜ç»“æœ</li><li>å½“å’Œå¤§äºnæ—¶ï¼Œè¿›è¡Œå‰ªæ</li></ul><p>åœ¨DFSä¸­ï¼ŒåŒä¸€æ’çš„ç»“ç‚¹æ˜¯åœ¨åŒä¸€ä¸ªå‡½æ•°è°ƒç”¨ä¸­è¿›è¡Œå¤„ç†ï¼Œå¦‚ä¸Šå›¾ä¸­çš„ç¬¬ä¸€æ’ï¼Œ1ã€2ã€3ã€4ã€è¿™4ä¸ªç»“ç‚¹æ˜¯åœ¨ç¬¬ä¸€æ¬¡å‡½æ•°è°ƒç”¨ä¸­è¿›è¡Œå¤„ç†ã€‚</p><p><strong>å› æ­¤ä½¿ç”¨ä¸€ä¸ªforå¾ªç¯æ¥å¤„ç†åŒä¸€æ’çš„ç»“ç‚¹ã€‚</strong><br>å› ä¸ºå…ƒç´ å¯ä»¥é‡å¤å–ç”¨ï¼Œæœ¬æ¥forå¾ªç¯çš„èµ·å§‹ä½ç½®åº”è¯¥éƒ½ä¸º1ï¼Œä½†æ˜¯ä¸ºäº†é¿å…é‡å¤ï¼Œæˆ‘ä»¬å¯ä»¥å‡è®¾forå¾ªç¯çš„èµ·å§‹ä½ç½®ä¸ºå…¶çˆ¶èŠ‚ç‚¹çš„å€¼ï¼Œè¿™é‡Œç”¨å˜é‡<code>index</code>è¡¨ç¤º</p><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">vector&lt;<span class="type">int</span>&gt; res;</span><br><span class="line"><span class="comment">//nè¡¨ç¤ºè¦æ‹†åˆ†çš„æ•° indexè¡¨ç¤ºå½“å‰å‡½æ•°ä»å“ªä¸ªæ•°å¼€å§‹æ‹† sumè¡¨ç¤ºå½“å‰çš„å’Œ</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">split</span><span class="params">(<span class="type">int</span> n,<span class="type">int</span> index,<span class="type">int</span> sum)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (sum == n) &#123;<span class="comment">//ä¿å­˜ç»“æœ</span></span><br><span class="line">        <span class="built_in">myPrint</span>(res);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (sum &gt; n) <span class="keyword">return</span>;<span class="comment">//å‰ªæ</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = index; i &lt; n; ++i) &#123;</span><br><span class="line">        res.<span class="built_in">push_back</span>(i);</span><br><span class="line">        <span class="comment">//å…ƒç´ å¯ä»¥é‡å¤ä½¿ç”¨ï¼Œä¸‹ä¸€æ¬¡è¿˜æ˜¯ä»iå¼€å§‹æ‹†åˆ†ï¼Œæ‹†åˆ°nä¸ºæ­¢</span></span><br><span class="line">        <span class="built_in">split</span>(n, i, sum + i);</span><br><span class="line">        res.<span class="built_in">pop_back</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><a href="https://leetcode.cn/problems/combinations/">77 ç»„åˆ</a><br><a href="https://leetcode.cn/problems/combination-sum-iii/solution/by-sdy-r-mava/">216. ç»„åˆæ€»å’Œ III</a><br><a href="https://leetcode.cn/problems/combination-sum-iii/solution/by-sdy-r-mava/">39. ç»„åˆæ€»å’Œ</a><br><a href="https://leetcode.cn/problems/letter-combinations-of-a-phone-number/solution/c-hui-su-suan-fa-by-sdy-r-6soj/">17. ç”µè¯å·ç çš„å­—æ¯ç»„åˆ</a><br><a href="https://leetcode.cn/problems/combination-sum-ii/solution/by-sdy-r-vecj/">40. ç»„åˆæ€»å’Œ II</a><br><a href="https://leetcode.cn/problems/subsets-ii/solution/by-sdy-r-nehc/">90. å­é›† II</a><br><a href="https://leetcode.cn/problems/permutations-ii/solution/by-sdy-r-fiul/">47. å…¨æ’åˆ— II</a><br><a href="https://blog.csdn.net/wenningker/article/details/124399435?spm=1001.2014.3001.5502">679. 24ç‚¹æ¸¸æˆ</a><br><a href="https://leetcode.cn/problems/longest-univalue-path/solution/by-sdy-r-0cz4/">687. æœ€é•¿åŒå€¼è·¯å¾„</a></p><h3 id="åŠ¨æ€è§„åˆ’"><a href="#åŠ¨æ€è§„åˆ’" class="headerlink" title="åŠ¨æ€è§„åˆ’"></a>åŠ¨æ€è§„åˆ’</h3><p><a href="https://www.bilibili.com/video/BV1X741127ZM/?spm_id_from=333.337.search-card.all.click&vd_source=59139a795dc5f3ee3da07683650b7b16">ä¸€ä¸ªè¶…çº§å®ç”¨çš„è§†é¢‘</a><br><strong>çŠ¶æ€è¡¨ç¤ºï¼š</strong><br>f å‡½æ•°ä»£è¡¨ä»€ä¹ˆçŠ¶æ€ï¼Ÿ<br>å†™å‡ºçŠ¶æ€è¡¨ç¤ºä¹‹åæˆ‘ä»¬ä¼šæœ‰ä¸€ä¸ªfå‡½æ•°çš„é›†åˆï¼Œä»£è¡¨é€’æ¨åˆ°f(i)æ—¶ï¼Œæœ‰å¤šå°‘ç§å¯èƒ½çš„çŠ¶æ€ã€‚</p><p><strong>åŠ¨æ€è½¬ç§»æ–¹ç¨‹</strong><br>æŠŠé›†åˆä¸­çš„æ¯ä¸€ç§å¯èƒ½è¡¨ç¤ºå‡ºæ¥ï¼Œå¯¹åº”è¦æ±‚çš„ç»“æœï¼ˆæ±‚æœ€å¤§ã€æœ€å°ã€æ±‚å’Œç­‰ï¼‰å†™å‡ºåŠ¨æ€è½¬ç§»æ–¹ç¨‹ã€‚</p><ul><li>çŠ¶æ€è¡¨ç¤º</li><li>çŠ¶æ€é›†ï¼Œä»çŠ¶æ€é›†æ±‚å‡ºå½“å‰çŠ¶æ€</li></ul><p><strong>æ€è€ƒå½“å‰çŠ¶æ€å¯¹æ¯”å‰ä¸€ä¸ªçŠ¶æ€ä¼šæœ‰ä»€ä¹ˆå˜åŒ–ï¼š</strong></p><ul><li>ä»å‰ä¸€æ­¥åŠ 1ï¼Ÿ</li><li>ç­‰äºå‰ä¸€æ­¥ï¼Ÿ</li></ul><p><strong>å¦‚ä¸‹å›¾æ‰€ç¤º</strong><br><img src="/../imgs/image-7.png"></p><p><a href="https://blog.csdn.net/wenningker/article/details/124410311?spm=1001.2014.3001.5502">è·¯å¾„å’Œæœ‰å…³çš„é¢˜ç›®</a></p><p><a href="https://leetcode.cn/problems/best-time-to-buy-and-sell-stock-with-transaction-fee/solution/by-sdy-r-6p9s/">714. ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœºå«æ‰‹ç»­è´¹</a></p><p><a href="https://leetcode.cn/problems/word-break/solution/by-sdy-r-cj3h/">139. å•è¯æ‹†åˆ†</a></p><p><a href="https://leetcode.cn/problems/integer-break/solution/by-sdy-r-q33e/">343. æ•´æ•°æ‹†åˆ†</a></p><p><a href="https://leetcode.cn/problems/house-robber-iii/solution/by-sdy-r-9rnk/">337. æ‰“å®¶åŠ«èˆ III</a></p><p><a href="https://leetcode.cn/problems/longest-increasing-subsequence/solution/by-sdy-r-hrxf/">300. æœ€é•¿é€’å¢å­åºåˆ—</a></p><p><a href="https://leetcode.cn/problems/distinct-subsequences-ii/solution/by-sdy-r-atvj/">940. ä¸åŒçš„å­åºåˆ— II</a></p><p><a href="https://leetcode.cn/problems/number-of-ways-to-reach-a-position-after-exactly-k-steps/solution/by-sdy-r-dytx/">2400. æ°å¥½ç§»åŠ¨ k æ­¥åˆ°è¾¾æŸä¸€ä½ç½®çš„æ–¹æ³•æ•°ç›®</a></p><p><a href="https://leetcode.cn/problems/maximum-length-of-pair-chain/solution/by-sdy-r-g02s/">646. æœ€é•¿æ•°å¯¹é“¾</a></p><p><a href="https://leetcode.cn/problems/triangle/solution/by-sdy-r-fuap/">120. ä¸‰è§’å½¢æœ€å°è·¯å¾„å’Œ</a></p><p><a href="https://leetcode.cn/problems/sum-of-subarray-minimums/solution/by-sdy-r-563t/">907. å­æ•°ç»„çš„æœ€å°å€¼ä¹‹å’Œ</a></p><p><a href="https://leetcode.cn/problems/wildcard-matching/solution/by-sdy-r-pm4u/">44. é€šé…ç¬¦åŒ¹é…</a></p><p><a href="https://leetcode.cn/problems/edit-distance/solution/by-sdy-r-boss/">72. ç¼–è¾‘è·ç¦»</a></p><h3 id="è´ªå¿ƒ"><a href="#è´ªå¿ƒ" class="headerlink" title="è´ªå¿ƒ"></a>è´ªå¿ƒ</h3><p><strong>æ¯æ¬¡é€‰å–å±€éƒ¨æœ€ä¼˜è§£ï¼Œå¾—åˆ°æœ€ç»ˆçš„æœ€ä¼˜è§£ã€‚</strong><br><a href="https://leetcode.cn/problems/divide-intervals-into-minimum-number-of-groups/solution/by-sdy-r-umuh/">2406. å°†åŒºé—´åˆ†ä¸ºæœ€å°‘ç»„æ•°</a><br><a href="https://leetcode.cn/problems/queue-reconstruction-by-height/solution/by-sdy-r-3ec9/">406. æ ¹æ®èº«é«˜é‡å»ºé˜Ÿåˆ—</a><br><a href="https://leetcode.cn/problems/minimum-number-of-arrows-to-burst-balloons/solution/by-sdy-r-17wh/">452. ç”¨æœ€å°‘æ•°é‡çš„ç®­å¼•çˆ†æ°”çƒ</a></p><h3 id="æ•°æ®ç»“æ„"><a href="#æ•°æ®ç»“æ„" class="headerlink" title="æ•°æ®ç»“æ„"></a>æ•°æ®ç»“æ„</h3><h4 id="ä¼˜å…ˆé˜Ÿåˆ—"><a href="#ä¼˜å…ˆé˜Ÿåˆ—" class="headerlink" title="ä¼˜å…ˆé˜Ÿåˆ—"></a>ä¼˜å…ˆé˜Ÿåˆ—</h4><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">//å‡åºé˜Ÿåˆ— å°é¡¶å †</span></span><br><span class="line">priority_queue &lt;<span class="type">int</span>,vector&lt;<span class="type">int</span>&gt;,greater&lt;<span class="type">int</span>&gt;&gt; q;</span><br><span class="line"><span class="comment">//é™åºé˜Ÿåˆ—  å¤§é¡¶å † é»˜è®¤æƒ…å†µ</span></span><br><span class="line">priority_queue &lt;<span class="type">int</span>,vector&lt;<span class="type">int</span>&gt;,less&lt;<span class="type">int</span>&gt;&gt; q;</span><br></pre></td></tr></table></figure><p><a href="https://leetcode.cn/problems/divide-intervals-into-minimum-number-of-groups/solution/by-sdy-r-umuh/">2406. å°†åŒºé—´åˆ†ä¸ºæœ€å°‘ç»„æ•°</a></p><p><a href="https://leetcode.cn/problems/sliding-window-maximum/solution/by-sdy-r-tu81/">239. æ»‘åŠ¨çª—å£æœ€å¤§å€¼</a></p><p><a href="https://leetcode.cn/problems/meeting-rooms-iii/solution/by-sdy-r-xle0/">2402. ä¼šè®®å®¤ III</a></p><p><a href="https://blog.csdn.net/wenningker/article/details/124468136?spm=1001.2014.3001.5501">23. åˆå¹¶kä¸ªæœ‰åºé“¾è¡¨</a></p><h4 id="æ•°ç»„-é“¾è¡¨-å“ˆå¸Œ"><a href="#æ•°ç»„-é“¾è¡¨-å“ˆå¸Œ" class="headerlink" title="æ•°ç»„&#x2F;é“¾è¡¨&#x2F;å“ˆå¸Œ"></a>æ•°ç»„&#x2F;é“¾è¡¨&#x2F;å“ˆå¸Œ</h4><p><strong>æ•°ç»„ï¼š</strong> æŸ¥æ‰¾æ•ˆç‡é«˜ï¼Œæ’å…¥å’Œåˆ é™¤æ•ˆç‡ä½<br><strong>é“¾è¡¨ï¼š</strong> æ’å…¥åˆ é™¤æ•ˆç‡é«˜ï¼ŒæŸ¥æ‰¾æ•ˆç‡ä½</p><p><strong>å“ˆå¸Œï¼š</strong> </p><ul><li>æ€æƒ³ï¼šé€šè¿‡å“ˆå¸Œå‡½æ•°å¾—åˆ°çš„é”®å€¼ï¼Œä½¿å…¶èƒ½å¤Ÿé«˜æ•ˆæŸ¥æ‰¾</li><li>å½“é”®å€¼é‡å¤æ—¶ï¼Œå¤„ç†å“ˆå¸Œå†²çª</li><li>åœ¨C++ä¸­unordered_set å’Œunordered_mapçš„åº•å±‚å®ç°æ—¶å“ˆå¸Œè¡¨</li></ul><p><a href="https://leetcode.cn/problems/4sum-ii/solution/by-sdy-r-jlw2/">454. å››æ•°ç›¸åŠ  II</a><br><a href="https://leetcode.cn/problems/optimal-partition-of-string/solution/by-sdy-r-uq9h/">2405. å­å­—ç¬¦ä¸²çš„æœ€ä¼˜åˆ’åˆ†</a><br><a href="https://leetcode.cn/problems/most-popular-video-creator/solution/by-sdy-r-tknt/">6221. æœ€æµè¡Œçš„è§†é¢‘åˆ›ä½œè€…</a></p><h4 id="æ ˆ-é˜Ÿåˆ—"><a href="#æ ˆ-é˜Ÿåˆ—" class="headerlink" title="æ ˆ&#x2F;é˜Ÿåˆ—"></a>æ ˆ&#x2F;é˜Ÿåˆ—</h4><p><a href="https://leetcode.cn/problems/sum-of-subarray-minimums/solution/by-sdy-r-563t/">907. å­æ•°ç»„çš„æœ€å°å€¼ä¹‹å’Œ</a><br><a href="https://leetcode.cn/problems/parsing-a-boolean-expression/solution/c-by-sdy-r-nxof/">1106. è§£æå¸ƒå°”è¡¨è¾¾å¼</a></p><h5 id="å•è°ƒæ ˆ"><a href="#å•è°ƒæ ˆ" class="headerlink" title="å•è°ƒæ ˆ"></a>å•è°ƒæ ˆ</h5><p>é€šå¸¸æ˜¯ä¸€ç»´æ•°ç»„ï¼Œè¦å¯»æ‰¾ä»»ä¸€ä¸ªå…ƒç´ çš„å³è¾¹æˆ–è€…å·¦è¾¹ç¬¬ä¸€ä¸ªæ¯”è‡ªå·±å¤§æˆ–è€…å°çš„å…ƒç´ çš„ä½ç½®ï¼Œæ­¤æ—¶æˆ‘ä»¬å°±è¦æƒ³åˆ°å¯ä»¥ç”¨å•è°ƒæ ˆäº†ã€‚<br><a href="https://leetcode.cn/problems/daily-temperatures/solution/by-sdy-r-7za8/">739. æ¯æ—¥æ¸©åº¦</a><br><a href="https://leetcode.cn/problems/next-greater-element-ii/solution/by-sdy-r-t3b7/">503. ä¸‹ä¸€ä¸ªæ›´å¤§å…ƒç´  II</a></p><h4 id="å‰ç¼€æ ‘"><a href="#å‰ç¼€æ ‘" class="headerlink" title="å‰ç¼€æ ‘"></a>å‰ç¼€æ ‘</h4><p><a href="https://blog.csdn.net/wenningker/article/details/126799292?spm=1001.2014.3001.5502">å‰ç¼€æ ‘</a></p><h4 id="å¹¶æŸ¥é›†"><a href="#å¹¶æŸ¥é›†" class="headerlink" title="å¹¶æŸ¥é›†"></a>å¹¶æŸ¥é›†</h4><p><strong>å¹¶æŸ¥é›†ç”±ä¸¤ä¸ªéƒ¨åˆ†æ„æˆï¼š</strong></p><ul><li><code>find()</code>å‡½æ•°ï¼Œå‘ç°xçš„æ ¹</li><li><code>Union()</code>å‡½æ•°ï¼Œåˆå¹¶</li></ul><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">// åˆå§‹åŒ–ï¼Œæœ€åˆæ¯ä¸ªå…ƒç´ çš„æ ¹éƒ½æ˜¯è‡ªå·±</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">init</span><span class="params">(vector&lt;<span class="type">int</span>&gt; &amp;parent, <span class="type">int</span> n)</span></span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>;i &lt; n; ++i)&#123;</span><br><span class="line">        parent.<span class="built_in">push_back</span>(i);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//å‘ç°xçš„æ ¹</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">myfind</span><span class="params">(vector&lt;<span class="type">int</span>&gt; &amp;parent, <span class="type">int</span> x)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(parent[x] != x) &#123;</span><br><span class="line">        parent[x] = <span class="built_in">myfind</span>(parent,parent[x]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> parent[x];</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//å°†yçš„æ ¹ç»™xçš„æ ¹ï¼Œå°†xå’Œyåˆå¹¶ä¸ºä¸€å †</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">myunion</span><span class="params">(vector&lt;<span class="type">int</span>&gt; &amp;parent,<span class="type">int</span> x,<span class="type">int</span> y)</span> </span>&#123;</span><br><span class="line">    parent[<span class="built_in">myfind</span>(parent,x)] = <span class="built_in">myfind</span>(parent,y);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><a href="https://blog.csdn.net/wenningker/article/details/124127763?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522166597671316800186587518%2522%252C%2522scm%2522%253A%252220140713.130102334.pc%255Fblog.%2522%257D&request_id=166597671316800186587518&biz_id=0&utm_medium=distribute.pc_search_result.none-task-blog-2~blog~first_rank_ecpm_v1~rank_v31_ecpm-2-124127763-null-null.nonecase&utm_term=%E5%B9%B6%E6%9F%A5%E9%9B%86&spm=1018.2226.3001.4450">å¹¶æŸ¥é›†</a></p><p><a href="https://leetcode.cn/problems/possible-bipartition/">886. å¯èƒ½çš„äºŒåˆ†æ³•</a></p><p><a href="https://leetcode.cn/problems/shortest-bridge/solution/by-sdy-r-ao55/">934. æœ€çŸ­çš„æ¡¥</a> BFS+DFS</p><p><a href="https://leetcode.cn/problems/redundant-connection/solutions/2401010/c-bing-cha-ji-tuo-bu-pai-xu-by-sdy-r-48sg/">684. å†—ä½™è¿æ¥</a> å¹¶æŸ¥é›†+æ‹“æ‰‘æ’åº</p><h4 id="çº¿æ®µæ ‘"><a href="#çº¿æ®µæ ‘" class="headerlink" title="çº¿æ®µæ ‘"></a>çº¿æ®µæ ‘</h4><h3 id="åŒæŒ‡é’ˆ-æ»‘åŠ¨çª—å£"><a href="#åŒæŒ‡é’ˆ-æ»‘åŠ¨çª—å£" class="headerlink" title="åŒæŒ‡é’ˆ&#x2F;æ»‘åŠ¨çª—å£"></a>åŒæŒ‡é’ˆ&#x2F;æ»‘åŠ¨çª—å£</h3><p><strong>ä¸»è¦æ˜¯è€ƒè™‘å·¦æŒ‡é’ˆå¾€å³èµ°çš„æ¡ä»¶ã€‚</strong><br><a href="https://leetcode.cn/problems/minimum-size-subarray-sum/solution/by-sdy-r-yayj/">209. é•¿åº¦æœ€å°çš„å­æ•°ç»„</a></p><p><a href="https://leetcode.cn/problems/minimum-window-substring/solution/by-sdy-r-zwx8/">76. æœ€å°è¦†ç›–å­ä¸²</a></p><p><a href="https://blog.csdn.net/wenningker/article/details/124530777?spm=1001.2014.3001.5502">90. æ°´æœæˆè“</a></p><p><a href="https://leetcode.cn/problems/sliding-window-maximum/solution/by-sdy-r-tu81/">239. æ»‘åŠ¨çª—å£æœ€å¤§å€¼</a></p><p><a href="https://leetcode.cn/problems/longest-nice-subarray/solution/by-sdy-r-glyh/">2401. æœ€é•¿ä¼˜é›…å­æ•°ç»„</a></p><p><a href="https://leetcode.cn/problems/partition-array-into-disjoint-intervals/solution/by-sdy-r-sm3x/">915. åˆ†å‰²æ•°ç»„</a></p><p><a href="https://leetcode.cn/problems/sort-colors/solution/by-sdy-r-tg7s/">75. é¢œè‰²åˆ†ç±»</a></p><p><a href="https://leetcode.cn/problems/remove-nth-node-from-end-of-list/solution/kuai-man-zhi-zhen-yi-bian-sao-miao-by-sd-pwps/">19. åˆ é™¤é“¾è¡¨çš„å€’æ•°ç¬¬ N ä¸ªç»“ç‚¹</a></p><h3 id="æ ‘"><a href="#æ ‘" class="headerlink" title="æ ‘"></a>æ ‘</h3><p>å¯¹äºäºŒå‰æ ‘æ¥ä¹¦ï¼Œè€ƒè™‘éå†æ–¹å¼ï¼š</p><ul><li>å‰åºéå†ï¼šå…ˆå¤„ç†çˆ¶èŠ‚ç‚¹ï¼Œå†å¤„ç†å­©å­èŠ‚ç‚¹</li><li>ä¸­åºéå†ï¼šå…ˆå¤„ç†å·¦å­©å­ï¼Œå†å¤„ç†çˆ¶èŠ‚ç‚¹ï¼Œæœ€åå¤„ç†å³å­©å­</li><li>ååºéå†ï¼šå…ˆå¤„ç†å­©å­ç»“ç‚¹ï¼Œå†å¤„ç†çˆ¶èŠ‚ç‚¹</li></ul><p><strong>å¤§éƒ¨åˆ†é¢˜ç›®éƒ½æ˜¯ä½¿ç”¨çš„ååºéå†æ¥æ±‚è§£ï¼šå› ä¸ºå¤„ç†çˆ¶èŠ‚ç‚¹æ—¶å¾€å¾€éœ€è¦ç”¨åˆ°å­èŠ‚ç‚¹çš„ç»“æœ</strong></p><p><a href="https://leetcode.cn/problems/construct-binary-tree-from-inorder-and-postorder-traversal/solution/by-sdy-r-307g/">106. ä»ä¸­åºä¸ååºéå†åºåˆ—æ„é€ äºŒå‰æ ‘</a></p><p><a href="https://leetcode.cn/problems/validate-binary-search-tree/solution/by-sdy-r-6m2z/">98. éªŒè¯äºŒå‰æœç´¢æ ‘</a></p><p><a href="https://leetcode.cn/problems/lowest-common-ancestor-of-a-binary-tree/solution/by-sdy-r-n5e3/">236. äºŒå‰æ ‘çš„æœ€è¿‘å…¬å…±ç¥–å…ˆ</a></p><p><a href="https://leetcode.cn/problems/insert-into-a-binary-search-tree/solution/by-sdy-r-vovn/">701. äºŒå‰æœç´¢æ ‘ä¸­çš„æ’å…¥æ“ä½œ</a></p><p><a href="https://leetcode.cn/problems/maximum-binary-tree-ii/solution/by-sdy-r-96ic/">998. æœ€å¤§äºŒå‰æ ‘ II</a></p><p><a href="https://leetcode.cn/problems/convert-bst-to-greater-tree/solution/by-sdy-r-x7yd/">538. æŠŠäºŒå‰æœç´¢æ ‘è½¬æ¢ä¸ºç´¯åŠ æ ‘</a></p><p><a href="https://leetcode.cn/problems/closest-nodes-queries-in-a-binary-search-tree/solution/c-by-sdy-r-osdi/">6242. äºŒå‰æœç´¢æ ‘æœ€è¿‘èŠ‚ç‚¹æŸ¥è¯¢</a><br>åºåˆ—åŒ–äºŒå‰æœç´¢æ ‘</p><h3 id="ä½è¿ç®—"><a href="#ä½è¿ç®—" class="headerlink" title="ä½è¿ç®—"></a>ä½è¿ç®—</h3><table><thead><tr><th>æ“ä½œ</th><th>ç»“æœ</th><th>ç‰¹æ€§</th></tr></thead><tbody><tr><td>~</td><td>å–åï¼Œ0å˜ä¸º1ï¼Œ1å˜ä¸º0</td><td></td></tr><tr><td>a&amp;b</td><td>ä¸”ï¼ŒabåŒæ—¶ä¸º1æ—¶æ‰å–1</td><td>a &amp; b &lt;&#x3D; min(a,b)ï¼Œäº¤æ¢å¾‹ã€ç»“åˆå¾‹ï¼Œè¶Šå–è¶Šå°</td></tr><tr><td>a æˆ– b</td><td>aå’Œbå…¶ä¸­æœ‰ä¸€ä¸ªä¸º1ï¼Œæœ€ç»ˆç»“æœå°±æ˜¯1</td><td>è¶Šå–è¶Šå¤§</td></tr><tr><td>a ^ b</td><td>aå’Œbç›¸åŒæ—¶ä¸º1ï¼Œä¸åŒä¸º0</td><td></td></tr><tr><td>&lt;&lt; å’Œ &gt;&gt;</td><td>å·¦ç§»ä¸€ä½ï¼Œç›¸å½“äº*2ï¼Œå³ç§»ä¸€ä½ï¼Œç›¸å½“äº&#x2F;2</td><td></td></tr></tbody></table><p><a href="https://leetcode.cn/problems/longest-subarray-with-maximum-bitwise-and/solution/by-sdy-r-6vt8/">2419. æŒ‰ä½ä¸æœ€å¤§çš„æœ€é•¿å­æ•°ç»„</a></p><h3 id="æ¨¡æ‹Ÿ"><a href="#æ¨¡æ‹Ÿ" class="headerlink" title="æ¨¡æ‹Ÿ"></a>æ¨¡æ‹Ÿ</h3><p><strong>æ ¹æ®é¢˜æ„æ¨¡æ‹Ÿï¼Œä¸»è¦æ˜¯ä»£ç ç»†èŠ‚è¦æ³¨æ„ã€‚</strong></p><p><a href="https://leetcode.cn/problems/spiral-matrix-ii/solution/by-sdy-r-g20f/">59. èºæ—‹çŸ©é˜µ II</a></p><p><a href="https://leetcode.cn/problems/EXvqDp/solution/by-sdy-r-wlw0/">LCP 63. å¼¹ç æ¸¸æˆ</a></p><p><a href="https://leetcode.cn/problems/build-an-array-with-stack-operations/solution/by-sdy-r-yemm/">1441. ç”¨æ ˆæ“ä½œæ„å»ºæ•°ç»„</a></p><p><a href="https://leetcode.cn/problems/k-th-symbol-in-grammar/solution/by-sdy-r-alxj/">779. ç¬¬Kä¸ªè¯­æ³•ç¬¦å·</a></p><p><a href="https://leetcode.cn/problems/minimum-addition-to-make-integer-beautiful/solution/by-sdy-r-a32l/">6222. ç¾ä¸½æ•´æ•°çš„æœ€å°å¢é‡</a></p><p><a href="https://leetcode.cn/problems/coordinate-with-maximum-network-quality/solution/by-sdy-r-lrwi/">1620. ç½‘ç»œä¿¡å·æœ€å¥½çš„åæ ‡</a></p><p><a href="https://leetcode.cn/problems/global-and-local-inversions/solution/c-by-sdy-r-8gqu/">775. å…¨å±€å€’ç½®ä¸å±€éƒ¨å€’ç½®</a></p><h3 id="æ•°å­¦"><a href="#æ•°å­¦" class="headerlink" title="æ•°å­¦"></a>æ•°å­¦</h3><p>ä¸»è¦å¤šè€ƒè™‘ç»„åˆæ•°å­¦</p><p><strong>ä»èµ·ç‚¹åˆ°ç»ˆç‚¹çš„æ‰€æœ‰è·¯å¾„ï¼šç»™å®šä¸€ä¸ª$n$å’Œä¸€ä¸ª$kï¼Œn$ä»£è¡¨è¦èµ°çš„æ­¥æ•°ï¼Œ$k$ä»£è¡¨ç»ˆç‚¹ï¼Œä»0å‡ºå‘ï¼Œæ¯æ¬¡å¯ä»¥é€‰æ‹©å¾€å·¦èµ°æˆ–è€…å¾€å³èµ°ï¼Œèµ°åˆ°$k$ï¼Œæœ‰å¤šå°‘ç§è·¯å¾„ï¼Ÿ</strong></p><ol><li>å‡è®¾$a$ç­‰äºå¾€å³èµ°çš„æ­¥æ•°ï¼Œå¾€å·¦èµ°çš„æ­¥æ•°ä¸º$k-a$,èµ°åˆ°$n$æ—¶çš„æ­¥æ•°ä¸º$a-(k-a)&#x3D;a$ï¼Œ$a&#x3D;(k+n)&#x2F;2$</li><li>å½“ä¸”ä»…å½“$(k+n)$ä¸ºå¶æ•°æ—¶æœ‰è§£</li><li>ç­‰ä»·äºä»$k$æ­¥é‡Œé¢é€‰$a$æ­¥å¾€å³èµ°ï¼Œæ‰€ä»¥ç»“æœæ˜¯$C^{(k+n)&#x2F;2}_k$</li></ol><p><a href="https://leetcode.cn/problems/number-of-ways-to-reach-a-position-after-exactly-k-steps/solution/by-sdy-r-dytx/">2400. æ°å¥½ç§»åŠ¨ k æ­¥åˆ°è¾¾æŸä¸€ä½ç½®çš„æ–¹æ³•æ•°ç›®</a></p><p><strong>C++å¦‚ä½•è®¡ç®—ç»„åˆæ•°ï¼Ÿ</strong></p><p>ä»<code>n</code>ä¸ªé‡Œé¢é€‰<code>m</code>ä¸ªï¼Œå½“å‰è¿™ä¸ªé€‰ï¼Œå°±å˜ä¸ºä»<code>n-1</code>ä¸ªé‡Œé¢é€‰<code>m-1</code>ä¸ªï¼Œå½“å‰ä¸é€‰ï¼Œå°±å˜æˆä»<code>n-1</code>ä¸ªé‡Œé¢é€‰<code>m</code>ä¸ªã€‚</p><p>æ ¹æ®å…¬å¼:ï¼š$C_n^m&#x3D;C^m_{n-1}+C_{n-1}^{m-1}$</p><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="type">long</span> <span class="type">long</span> res[<span class="number">67</span>][<span class="number">67</span>]=&#123;<span class="number">0</span>&#125;;</span><br><span class="line"><span class="function"><span class="type">long</span> <span class="type">long</span> <span class="title">C</span><span class="params">(<span class="type">long</span> <span class="type">long</span> n,<span class="type">long</span> <span class="type">long</span> m)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(m==<span class="number">0</span> || m==n) <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">if</span>(res[n][m] != <span class="number">0</span>)<span class="keyword">return</span> res[n][m];<span class="comment">//ä¿å­˜çŠ¶æ€</span></span><br><span class="line">    <span class="keyword">return</span> res[n][m] = <span class="built_in">C</span>(n<span class="number">-1</span>,m)+ <span class="built_in">C</span>(n<span class="number">-1</span>,m<span class="number">-1</span>);<span class="comment">//èµ‹å€¼ç»™res[n][m]å¹¶è¿”å›</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%ld&quot;</span>,<span class="built_in">C</span>(<span class="number">6</span>,<span class="number">3</span>));</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>æ’åºä¸ç­‰å¼ï¼š</strong><br>$a_1 \leq a_2 \leq â€¦ \leq a_n$<br>$b_1 \leq b_2 \leq â€¦ \leq b_n$</p><p>æœ€å¤§å€¼&#x3D; $a_1b_1+a_2b_2+â€¦+a_nb_n$<br>æœ€å°å€¼&#x3D; $a_1b_n+a_2b_{n-1}+â€¦+a_nb_1$</p><p><strong>æ±‚è§£æœ€å¤§å…¬çº¦æ•°å’Œæœ€å°å…¬å€æ•°</strong></p><ul><li>æœ€å¤§å…¬çº¦æ•°ï¼šæ•°ç»„ä¸­æ‰€æœ‰æ•°éƒ½èƒ½æ•´é™¤çš„æœ€å¤§æ•°</li><li>æœ€å°å…¬å€æ•°ï¼šæ•°ç»„ä¸­æ‰€æœ‰æ•°çš„æœ€å°å€æ•°</li></ul><p>$aå’Œbçš„æœ€å°å…¬å€æ•°&#x3D;a*b&#x2F;(aå’Œbçš„æœ€å¤§å…¬çº¦æ•°)$<br>æ±‚è§£æœ€å¤§å…¬çº¦æ•°ä½¿ç”¨<code>gcd(a,b)</code>å‡½æ•°</p><p><a href="https://leetcode.cn/problems/numbers-at-most-n-given-digit-set/solution/-by-sdy-r-z1sc/">902. æœ€å¤§ä¸º N çš„æ•°å­—ç»„åˆ</a></p><p><a href="https://leetcode.cn/problems/number-of-subarrays-with-lcm-equal-to-k/">6234. æœ€å°å…¬å€æ•°ä¸º K çš„å­æ•°ç»„æ•°ç›®</a></p><p><a href="https://leetcode.cn/problems/number-of-subarrays-with-gcd-equal-to-k/">2447. æœ€å¤§å…¬å› æ•°ç­‰äº K çš„å­æ•°ç»„æ•°ç›®</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h3 id=&quot;DFS-å›æº¯&quot;&gt;&lt;a href=&quot;#DFS-å›æº¯&quot; class=&quot;headerlink&quot; title=&quot;DFS&amp;#x2F;å›æº¯&quot;&gt;&lt;/a&gt;DFS&amp;#x2F;å›æº¯&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;ä»¥æ•´æ•°æ‹†åˆ†ä¸ºä¾‹ï¼š&lt;/strong&gt;&lt;br&gt;&lt;img src=&quot;/../i</summary>
      
    
    
    
    <category term="Algorithm" scheme="http://example.com/categories/Algorithm/"/>
    
    
  </entry>
  
  <entry>
    <title>C++å®ç°ä¸€ä¸ªç®€å•çš„çº¿ç¨‹æ± </title>
    <link href="http://example.com/2022/09/15/%E3%80%90c++%E3%80%91%E5%AE%9E%E7%8E%B0%E4%B8%80%E4%B8%AA%E7%AE%80%E5%8D%95%E7%9A%84%E7%BA%BF%E7%A8%8B%E6%B1%A0/"/>
    <id>http://example.com/2022/09/15/%E3%80%90c++%E3%80%91%E5%AE%9E%E7%8E%B0%E4%B8%80%E4%B8%AA%E7%AE%80%E5%8D%95%E7%9A%84%E7%BA%BF%E7%A8%8B%E6%B1%A0/</id>
    <published>2022-09-14T23:33:02.000Z</published>
    <updated>2024-03-30T03:52:10.586Z</updated>
    
    <content type="html"><![CDATA[<p><img src="/../imgs/image-8.png"></p><h2 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h2><h3 id="ä»»åŠ¡ç»“æ„ä½“"><a href="#ä»»åŠ¡ç»“æ„ä½“" class="headerlink" title="ä»»åŠ¡ç»“æ„ä½“"></a>ä»»åŠ¡ç»“æ„ä½“</h3><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">//ä»»åŠ¡ç»“æ„ä½“</span></span><br><span class="line"><span class="keyword">using</span>  callback = <span class="built_in">void</span>(*)(<span class="type">void</span>*);</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">Task</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">Task</span>()=<span class="keyword">default</span>;</span><br><span class="line">    <span class="built_in">Task</span>(callback function,<span class="type">void</span>* arg):</span><br><span class="line">    <span class="built_in">function</span>(function),<span class="built_in">arg</span>(arg)&#123;&#125;</span><br><span class="line">    <span class="comment">//å‡½æ•°æŒ‡é’ˆ</span></span><br><span class="line">    callback function;</span><br><span class="line">    <span class="type">void</span>* arg;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="ä»»åŠ¡é˜Ÿåˆ—"><a href="#ä»»åŠ¡é˜Ÿåˆ—" class="headerlink" title="ä»»åŠ¡é˜Ÿåˆ—"></a>ä»»åŠ¡é˜Ÿåˆ—</h3><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">TaskQueue</span>&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">TaskQueue</span>();</span><br><span class="line">    ~<span class="built_in">TaskQueue</span>();</span><br><span class="line">    <span class="comment">//æ·»åŠ ä»»åŠ¡</span></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">addTask</span><span class="params">(Task&amp; task)</span></span>;</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">addTask</span><span class="params">(callback f,<span class="type">void</span>* arg)</span></span>;</span><br><span class="line">    <span class="comment">//å–å‡ºä»»åŠ¡</span></span><br><span class="line">    <span class="function">Task <span class="title">takeTask</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="comment">//è·å–å½“å‰ä»»åŠ¡çš„ä¸ªæ•°ï¼Œå†…è”å‡½æ•°ä¸ä¼šè¿›è¡Œå‹æ ˆï¼Œé€šè¿‡ä»£ç æ›¿æ¢å®ç°</span></span><br><span class="line">    <span class="function"><span class="keyword">inline</span> <span class="type">int</span> <span class="title">taskNumber</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> m_taskQ.<span class="built_in">size</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="type">pthread_mutex_t</span> m_mutex;<span class="comment">//æ·»åŠ äº’æ–¥é”</span></span><br><span class="line">    queue&lt;Task&gt; m_taskQ;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="çº¿ç¨‹æ± "><a href="#çº¿ç¨‹æ± " class="headerlink" title="çº¿ç¨‹æ± "></a>çº¿ç¨‹æ± </h3><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">//çº¿ç¨‹æ± </span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ThreadPool</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">ThreadPool</span>(<span class="type">int</span> min,<span class="type">int</span> max);</span><br><span class="line">    ~<span class="built_in">ThreadPool</span>();</span><br><span class="line">    <span class="comment">//ç»™çº¿ç¨‹æ± æ·»åŠ ä»»åŠ¡</span></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">addTask</span><span class="params">(Task task)</span></span>;</span><br><span class="line">    <span class="comment">//è·å–çº¿ç¨‹æ± ä¸­å·¥ä½œçš„çº¿ç¨‹ä¸ªæ•°</span></span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">getBusyNum</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="comment">//è·å–çº¿ç¨‹æ± ä¸­æ´»ç€çš„çº¿ç¨‹ä¸ªæ•°</span></span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">getLiveNum</span><span class="params">()</span></span>;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="comment">//å·¥ä½œçš„çº¿ç¨‹ä»»åŠ¡å‡½æ•°</span></span><br><span class="line">    <span class="comment">//é™æ€æˆå‘˜å‡½æ•°å®šä¹‰æ—¶å°±åˆ†é…åœ°å€ï¼Œæ™®é€šæˆå‘˜å‡½æ•°åªæœ‰å®ä¾‹åŒ–æ‰æœ‰åœ°å€</span></span><br><span class="line">    <span class="function"><span class="type">static</span> <span class="type">void</span>* <span class="title">worker</span><span class="params">(<span class="type">void</span>* arg)</span></span>;</span><br><span class="line">    <span class="comment">//ç®¡ç†è€…çº¿ç¨‹ä»»åŠ¡å‡½æ•°</span></span><br><span class="line">    <span class="function"><span class="type">static</span> <span class="type">void</span>* <span class="title">manager</span><span class="params">(<span class="type">void</span>* arg)</span></span>;</span><br><span class="line">    <span class="comment">//å•ä¸ªçº¿ç¨‹é€€å‡º</span></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">threadExit</span><span class="params">()</span></span>;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    TaskQueue* taskQ;<span class="comment">//ä»»åŠ¡é˜Ÿåˆ—</span></span><br><span class="line">    <span class="type">pthread_t</span> managerID;<span class="comment">//ç®¡ç†è€…çº¿ç¨‹ID</span></span><br><span class="line">    <span class="type">pthread_t</span>* threadID;<span class="comment">//å·¥ä½œçº¿ç¨‹ID</span></span><br><span class="line">    <span class="type">int</span> minNum;<span class="comment">//æœ€å°çº¿ç¨‹æ•°é‡</span></span><br><span class="line">    <span class="type">int</span> maxNum;<span class="comment">//æœ€å¤§çº¿ç¨‹æ•°é‡</span></span><br><span class="line">    <span class="type">int</span> busyNum;<span class="comment">//å¿™çš„çº¿ç¨‹ä¸ªæ•°</span></span><br><span class="line">    <span class="type">int</span> liveNum;<span class="comment">//å­˜æ´»çš„çº¿ç¨‹ä¸ªæ•°</span></span><br><span class="line">    <span class="type">int</span> exitNum;<span class="comment">//è¦é”€æ¯çš„çº¿ç¨‹ä¸ªæ•°</span></span><br><span class="line">    <span class="type">pthread_mutex_t</span> mutexPool;<span class="comment">//é”å®šæ•´ä¸ªçº¿ç¨‹æ± </span></span><br><span class="line">    <span class="type">pthread_cond_t</span> notEmpty;<span class="comment">//ä»»åŠ¡é˜Ÿåˆ—æ˜¯å¦ä¸ºç©º</span></span><br><span class="line">    <span class="type">static</span> <span class="type">const</span> <span class="type">int</span> NUMBER = <span class="number">2</span>;<span class="comment">//æ¯æ¬¡åˆ›å»ºçº¿ç¨‹çš„æ•°é‡</span></span><br><span class="line">    <span class="type">bool</span> shutdown;<span class="comment">//æ˜¯ä¸æ˜¯è¦é”€æ¯çº¿ç¨‹æ± ï¼Œé”€æ¯ä¸º1ï¼Œä¸é”€æ¯ä¸º0</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="å®ç°"><a href="#å®ç°" class="headerlink" title="å®ç°"></a>å®ç°</h3><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;threadpool.h&quot;</span></span></span><br><span class="line"></span><br><span class="line">TaskQueue::<span class="built_in">TaskQueue</span>()&#123;</span><br><span class="line">    <span class="comment">//åˆå§‹åŒ–äº’æ–¥é”</span></span><br><span class="line">    <span class="built_in">pthread_mutex_init</span>(&amp;m_mutex,<span class="literal">NULL</span>);</span><br><span class="line">&#125;</span><br><span class="line">TaskQueue::~<span class="built_in">TaskQueue</span>()&#123;</span><br><span class="line">    <span class="comment">//é”€æ¯äº’æ–¥é”</span></span><br><span class="line">    <span class="built_in">pthread_mutex_destroy</span>(&amp;m_mutex);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">TaskQueue::addTask</span><span class="params">(Task&amp; task)</span></span>&#123;</span><br><span class="line">    <span class="comment">//è®¿é—®ä»»åŠ¡é˜Ÿåˆ—ä¹‹å‰å…ˆåŠ é”</span></span><br><span class="line">    <span class="built_in">pthread_mutex_lock</span>(&amp;m_mutex);</span><br><span class="line">    m_taskQ.<span class="built_in">push</span>(task);</span><br><span class="line">    <span class="comment">//è®¿é—®ç»“æŸè§£é”</span></span><br><span class="line">    <span class="built_in">pthread_mutex_unlock</span>(&amp;m_mutex);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">TaskQueue::addTask</span><span class="params">(callback f,<span class="type">void</span>* arg)</span></span>&#123;</span><br><span class="line">    <span class="comment">//è®¿é—®ä»»åŠ¡é˜Ÿåˆ—ä¹‹å‰å…ˆåŠ é”</span></span><br><span class="line">    <span class="built_in">pthread_mutex_lock</span>(&amp;m_mutex);</span><br><span class="line">    m_taskQ.<span class="built_in">push</span>(<span class="built_in">Task</span>(f,arg));</span><br><span class="line">    <span class="comment">//è®¿é—®ç»“æŸè§£é”</span></span><br><span class="line">    <span class="built_in">pthread_mutex_unlock</span>(&amp;m_mutex);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">Task <span class="title">TaskQueue::takeTask</span><span class="params">()</span></span>&#123;</span><br><span class="line">    Task t;</span><br><span class="line">    <span class="built_in">pthread_mutex_lock</span>(&amp;m_mutex);</span><br><span class="line">    <span class="keyword">if</span>(!m_taskQ.<span class="built_in">empty</span>())&#123;</span><br><span class="line">        t = m_taskQ.<span class="built_in">front</span>();</span><br><span class="line">        m_taskQ.<span class="built_in">pop</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">pthread_mutex_unlock</span>(&amp;m_mutex);</span><br><span class="line">    <span class="keyword">return</span> t;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">ThreadPool::<span class="built_in">ThreadPool</span>(<span class="type">int</span> min,<span class="type">int</span> max)&#123;</span><br><span class="line">        <span class="comment">//å®ä¾‹åŒ–ä»»åŠ¡é˜Ÿåˆ—</span></span><br><span class="line">        taskQ = <span class="keyword">new</span> TaskQueue;</span><br><span class="line">    <span class="keyword">do</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(taskQ == <span class="literal">nullptr</span>)&#123;</span><br><span class="line">            cout&lt;&lt;<span class="string">&quot;creat tackqueue error...&quot;</span>&lt;&lt;endl;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        threadID = <span class="keyword">new</span> <span class="type">pthread_t</span>[max];</span><br><span class="line">        <span class="keyword">if</span>(threadID == <span class="literal">NULL</span>)&#123;</span><br><span class="line">            cout&lt;&lt;<span class="string">&quot;creat threadpool error...&quot;</span>&lt;&lt;endl;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">memset</span>(threadID,<span class="number">0</span>,<span class="built_in">sizeof</span>(<span class="type">pthread_t</span>) * max);</span><br><span class="line">        minNum = min;</span><br><span class="line">        maxNum = max;</span><br><span class="line">        busyNum = <span class="number">0</span>;</span><br><span class="line">        liveNum = min;</span><br><span class="line">        exitNum = <span class="number">0</span>;</span><br><span class="line">        <span class="comment">//åˆå§‹åŒ–äº’æ–¥é”å’Œæ¡ä»¶å˜é‡</span></span><br><span class="line">        <span class="keyword">if</span>(<span class="built_in">pthread_mutex_init</span>(&amp;mutexPool,<span class="literal">NULL</span>) != <span class="number">0</span> ||</span><br><span class="line">           <span class="built_in">pthread_cond_init</span>(&amp;notEmpty,<span class="literal">NULL</span>) != <span class="number">0</span>)&#123;</span><br><span class="line">            cout&lt;&lt;<span class="string">&quot;mutex or condition init fail...&quot;</span>&lt;&lt;endl;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        shutdown = <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//åˆ›å»ºçº¿ç¨‹ï¼Œå‚æ•°ï¼šçº¿ç¨‹ï¼Œçº¿ç¨‹çš„å±æ€§ï¼Œçº¿ç¨‹è¦æ‰§è¡Œçš„å‡½æ•°ï¼Œè¯¥å‡½æ•°ä¼ å…¥çš„å‚æ•°</span></span><br><span class="line">        <span class="comment">//æˆåŠŸè¿”å›0ï¼Œå¤±è´¥è¿”å›é0å€¼</span></span><br><span class="line">        <span class="built_in">pthread_create</span>(&amp;managerID,<span class="literal">NULL</span>,manager,<span class="keyword">this</span>);</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>;i &lt; minNum;++i)&#123;</span><br><span class="line">            <span class="built_in">pthread_create</span>(&amp;threadID[i],<span class="literal">NULL</span>,worker,<span class="keyword">this</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;<span class="keyword">while</span>(<span class="number">0</span>);</span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line">ThreadPool::~<span class="built_in">ThreadPool</span>()&#123;</span><br><span class="line">    <span class="comment">//é‡Šæ”¾èµ„æº</span></span><br><span class="line">    shutdown = <span class="literal">true</span>;</span><br><span class="line">    <span class="comment">//å›æ”¶ç®¡ç†è€…çº¿ç¨‹</span></span><br><span class="line">    <span class="built_in">pthread_join</span>(managerID,<span class="literal">NULL</span>);</span><br><span class="line">    <span class="comment">//å”¤é†’é˜»å¡çš„å·¥ä½œçº¿ç¨‹</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>;i &lt; liveNum;++i)&#123;</span><br><span class="line">        <span class="built_in">pthread_cond_signal</span>(&amp;notEmpty);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//é”€æ¯çº¿ç¨‹å’Œè¿›ç¨‹</span></span><br><span class="line">    <span class="keyword">if</span>(threadID) <span class="keyword">delete</span>[]threadID;</span><br><span class="line">    <span class="keyword">if</span>(taskQ) <span class="keyword">delete</span> taskQ;</span><br><span class="line">    <span class="comment">//é”€æ¯äº’æ–¥é”å’Œæ¡ä»¶å˜é‡</span></span><br><span class="line">    <span class="built_in">pthread_mutex_destroy</span>(&amp;mutexPool);</span><br><span class="line">    <span class="built_in">pthread_cond_destroy</span>(&amp;notEmpty);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//ç»™çº¿ç¨‹æ± æ·»åŠ ä»»åŠ¡</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">ThreadPool::addTask</span><span class="params">(Task task)</span></span>&#123;</span><br><span class="line">    <span class="comment">//è¿™é‡Œè®¿é—®ä»»åŠ¡é˜Ÿåˆ—ä¸éœ€è¦å†åŠ é”ï¼Œå› ä¸ºå†ä»»åŠ¡é˜Ÿåˆ—çš„æ·»åŠ æ“ä½œé‡Œå·²ç»åŠ äº†é”</span></span><br><span class="line">    <span class="comment">//pthread_mutex_lock(&amp;mutexPool);</span></span><br><span class="line">    <span class="keyword">if</span>(shutdown)&#123;</span><br><span class="line">        <span class="built_in">pthread_mutex_unlock</span>(&amp;mutexPool);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//æ·»åŠ ä»»åŠ¡</span></span><br><span class="line">    taskQ-&gt;<span class="built_in">addTask</span>(task);</span><br><span class="line">    <span class="comment">//æœ‰ä»»åŠ¡äº†å”¤é†’å·¥ä½œçº¿ç¨‹</span></span><br><span class="line">    <span class="built_in">pthread_cond_signal</span>(&amp;notEmpty);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//è·å–çº¿ç¨‹æ± ä¸­å·¥ä½œçš„çº¿ç¨‹ä¸ªæ•°</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">ThreadPool::getBusyNum</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="built_in">pthread_mutex_lock</span>(&amp;mutexPool);</span><br><span class="line">    <span class="comment">//è¿™é‡Œä¸èƒ½ç›´æ¥è¿”å›ï¼Œå¦åˆ™ä¼šå‘ç”Ÿæ­»é”</span></span><br><span class="line">    <span class="type">int</span> busyNum = <span class="keyword">this</span>-&gt;busyNum;</span><br><span class="line">    <span class="built_in">pthread_mutex_unlock</span>(&amp;mutexPool);</span><br><span class="line">    <span class="keyword">return</span> busyNum;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//è·å–çº¿ç¨‹æ± ä¸­æ´»ç€çš„çº¿ç¨‹ä¸ªæ•°</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">ThreadPool::getLiveNum</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="built_in">pthread_mutex_lock</span>(&amp;mutexPool);</span><br><span class="line">    <span class="type">int</span> liveNum = <span class="keyword">this</span>-&gt;liveNum;</span><br><span class="line">    <span class="built_in">pthread_mutex_unlock</span>(&amp;mutexPool);</span><br><span class="line">    <span class="keyword">return</span> liveNum;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å·¥ä½œçš„çº¿ç¨‹ä»»åŠ¡å‡½æ•°</span></span><br><span class="line"><span class="comment">//è¿™é‡Œéœ€è¦æŠŠpoolä¼ è¿›æ¥æ˜¯å› ä¸ºè¿™ä¸ªå‡½æ•°æ˜¯é™æ€æˆå‘˜å‡½æ•°ï¼Œæ— æ³•è®¿é—®éé™æ€æˆå‘˜å˜é‡</span></span><br><span class="line"><span class="function"><span class="type">void</span>* <span class="title">ThreadPool::worker</span><span class="params">(<span class="type">void</span>* arg)</span></span>&#123;</span><br><span class="line">    ThreadPool* pool = <span class="built_in">static_cast</span>&lt;ThreadPool*&gt; (arg);</span><br><span class="line">    <span class="keyword">while</span>(<span class="literal">true</span>)&#123;</span><br><span class="line">        <span class="comment">//å› ä¸ºæ¯ä¸€ä¸ªçº¿ç¨‹éƒ½éœ€è¦å¯¹è¿™ä¸ªçº¿ç¨‹æ± è¿›è¡Œæ“ä½œï¼Œæ‰€ä»¥è¿™é‡Œè¦å¯¹çº¿ç¨‹æ± åŠ é”</span></span><br><span class="line">        <span class="built_in">pthread_mutex_lock</span>(&amp;pool-&gt;mutexPool);</span><br><span class="line">        <span class="comment">//å½“å‰ä»»åŠ¡é˜Ÿåˆ—æ˜¯å¦ä¸ºç©ºï¼Œä¸”çº¿ç¨‹æ± æ²¡æœ‰è¢«å…³é—­</span></span><br><span class="line">        <span class="keyword">while</span>(pool-&gt;taskQ-&gt;<span class="built_in">taskNumber</span>() == <span class="number">0</span> &amp;&amp; !pool-&gt;shutdown)&#123;</span><br><span class="line">            <span class="comment">//é˜»å¡å·¥ä½œçº¿ç¨‹</span></span><br><span class="line">            <span class="built_in">pthread_cond_wait</span>(&amp;pool-&gt;notEmpty,&amp;pool-&gt;mutexPool);</span><br><span class="line">            <span class="comment">//åˆ¤æ–­æ˜¯å¦è¦é”€æ¯çº¿ç¨‹(è¯¥çº¿ç¨‹è¢«å”¤é†’ä¹‹å)</span></span><br><span class="line">            <span class="keyword">if</span>(pool-&gt;exitNum &gt; <span class="number">0</span>)&#123;</span><br><span class="line">                pool-&gt;exitNum--;</span><br><span class="line">                <span class="keyword">if</span>(pool-&gt;liveNum &gt; pool-&gt;minNum)&#123;</span><br><span class="line">                    pool-&gt;liveNum--;</span><br><span class="line">                    <span class="built_in">pthread_mutex_unlock</span>(&amp;pool-&gt;mutexPool);</span><br><span class="line">                    pool-&gt;<span class="built_in">threadExit</span>();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//åˆ¤æ–­çº¿ç¨‹æ± æ˜¯å¦å…³é—­äº†</span></span><br><span class="line">        <span class="keyword">if</span>(pool-&gt;shutdown)&#123;</span><br><span class="line">            <span class="built_in">pthread_mutex_unlock</span>(&amp;pool-&gt;mutexPool);</span><br><span class="line">            pool-&gt;<span class="built_in">threadExit</span>();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//ä»ä»»åŠ¡é˜Ÿåˆ—ä¸­å–å‡ºä¸€ä¸ªä»»åŠ¡</span></span><br><span class="line">        Task task = pool-&gt;taskQ-&gt;<span class="built_in">takeTask</span>();</span><br><span class="line">        <span class="comment">//å¿™çš„çº¿ç¨‹æ•°åŠ ä¸€</span></span><br><span class="line">        pool-&gt;busyNum++;</span><br><span class="line">        <span class="comment">//ç”¨å®Œè§£é”</span></span><br><span class="line">        <span class="built_in">pthread_mutex_unlock</span>(&amp;pool-&gt;mutexPool);</span><br><span class="line">        cout&lt;&lt;<span class="string">&quot;thread&quot;</span>&lt;&lt;<span class="built_in">pthread_self</span>()&lt;&lt;<span class="string">&quot;start working...\n&quot;</span>;</span><br><span class="line">        <span class="comment">//æ‰§è¡Œä»»åŠ¡</span></span><br><span class="line">        task.<span class="built_in">function</span>(task.arg);</span><br><span class="line">        <span class="comment">//delete task.arg;</span></span><br><span class="line">        arg = <span class="literal">nullptr</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//ä»»åŠ¡æ‰§è¡Œå®Œæ¯•</span></span><br><span class="line">        <span class="built_in">pthread_mutex_lock</span>(&amp;pool-&gt;mutexPool);</span><br><span class="line">        pool-&gt;busyNum--;</span><br><span class="line">        <span class="built_in">pthread_mutex_unlock</span>(&amp;pool-&gt;mutexPool);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//ç®¡ç†è€…çº¿ç¨‹ä»»åŠ¡å‡½æ•°</span></span><br><span class="line"><span class="function"><span class="type">void</span>* <span class="title">ThreadPool::manager</span><span class="params">(<span class="type">void</span>* arg)</span></span>&#123;</span><br><span class="line">    ThreadPool* pool = <span class="built_in">static_cast</span>&lt;ThreadPool*&gt;(arg);</span><br><span class="line">    <span class="keyword">while</span>(!pool-&gt;shutdown)&#123;</span><br><span class="line">        <span class="comment">//æ¯éš”ä¸‰ç§’æ£€æµ‹ä¸€æ¬¡</span></span><br><span class="line">        <span class="built_in">sleep</span>(<span class="number">3</span>);</span><br><span class="line">        <span class="comment">//å–å‡ºçº¿ç¨‹æ± ä¸­çš„ä»»åŠ¡æ•°é‡å’Œå½“å‰çº¿ç¨‹çš„æ•°é‡</span></span><br><span class="line">        <span class="built_in">pthread_mutex_lock</span>(&amp;pool-&gt;mutexPool);</span><br><span class="line">        <span class="comment">//ä»»åŠ¡æ•°é‡</span></span><br><span class="line">        <span class="type">int</span> queueSize = pool-&gt;taskQ-&gt;<span class="built_in">taskNumber</span>();</span><br><span class="line">        <span class="type">int</span> liveNum = pool-&gt;liveNum;</span><br><span class="line">        <span class="comment">//å–å‡ºå¿™çš„çº¿ç¨‹æ•°é‡</span></span><br><span class="line">        <span class="type">int</span> busyNum = pool-&gt;busyNum;</span><br><span class="line">        <span class="built_in">pthread_mutex_unlock</span>(&amp;pool-&gt;mutexPool);</span><br><span class="line">        <span class="comment">//æ·»åŠ çº¿ç¨‹</span></span><br><span class="line">        <span class="comment">//ä»»åŠ¡çš„ä¸ªæ•°å¤§äºå­˜æ´»çš„çº¿ç¨‹æ•°&amp;&amp;å­˜æ´»çš„çº¿ç¨‹æ•°å°äºæœ€å¤§çº¿ç¨‹æ•°</span></span><br><span class="line">        <span class="keyword">if</span>(queueSize &gt; liveNum &amp;&amp; liveNum &lt; pool-&gt;maxNum)&#123;</span><br><span class="line">            <span class="built_in">pthread_mutex_lock</span>(&amp;pool-&gt;mutexPool);</span><br><span class="line">            <span class="type">int</span> counter = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>;i &lt; pool-&gt;maxNum &amp;&amp;</span><br><span class="line">            i &lt; pool-&gt;NUMBER &amp;&amp; pool-&gt;liveNum &lt; pool-&gt;maxNum;++i)&#123;</span><br><span class="line">                <span class="keyword">if</span>(pool-&gt;threadID[i] == <span class="number">0</span>)&#123;</span><br><span class="line">                    <span class="built_in">pthread_create</span>(&amp;pool-&gt;threadID[i],<span class="literal">NULL</span>,worker,pool);</span><br><span class="line">                    counter++;</span><br><span class="line">                    pool-&gt;liveNum++;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="built_in">pthread_mutex_unlock</span>(&amp;pool-&gt;mutexPool);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//é”€æ¯çº¿ç¨‹</span></span><br><span class="line">        <span class="comment">//å¿™çš„çº¿ç¨‹*2å°äºå­˜æ´»çš„çº¿ç¨‹æ•°&amp;&amp;å­˜æ´»çš„çº¿ç¨‹æ•°å¤§äºæœ€å°çº¿ç¨‹æ•°</span></span><br><span class="line">        <span class="keyword">if</span>(busyNum * <span class="number">2</span> &lt; liveNum &amp;&amp; liveNum &gt; pool-&gt;minNum)&#123;</span><br><span class="line">            <span class="built_in">pthread_mutex_lock</span>(&amp;pool-&gt;mutexPool);</span><br><span class="line">            pool-&gt;exitNum = pool-&gt;NUMBER;</span><br><span class="line">            <span class="built_in">pthread_mutex_unlock</span>(&amp;pool-&gt;mutexPool);</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>;i &lt; pool-&gt;NUMBER;++i)&#123;</span><br><span class="line">                <span class="comment">//å”¤é†’çº¿ç¨‹ï¼Œç„¶åé”€æ¯,å› ä¸ºå·¥ä½œçš„çº¿ç¨‹æ²¡è¢«é˜»å¡ï¼Œè¿™é‡Œå”¤é†’è¢«é˜»å¡çš„çº¿ç¨‹</span></span><br><span class="line">                <span class="built_in">pthread_cond_signal</span>(&amp;pool-&gt;notEmpty);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;       </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//å•ä¸ªçº¿ç¨‹é€€å‡º</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">ThreadPool::threadExit</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="comment">//è·å–å½“å‰çº¿ç¨‹çš„ID</span></span><br><span class="line">    <span class="type">ptrdiff_t</span> tid = <span class="built_in">pthread_self</span>();</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>;i &lt; maxNum;++i)&#123;</span><br><span class="line">        <span class="keyword">if</span>(threadID[i] == tid)&#123;</span><br><span class="line">            threadID[i] = <span class="number">0</span>;</span><br><span class="line">            cout&lt;&lt;<span class="string">&quot;threadExit() called,&quot;</span>&lt;&lt;tid&lt;&lt;<span class="string">&quot;exiting...\n&quot;</span>;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">pthread_exit</span>(<span class="literal">NULL</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="æµ‹è¯•æ–‡ä»¶"><a href="#æµ‹è¯•æ–‡ä»¶" class="headerlink" title="æµ‹è¯•æ–‡ä»¶"></a>æµ‹è¯•æ–‡ä»¶</h3><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&quot;threadpool.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">taskFunc</span><span class="params">(<span class="type">void</span>* arg)</span></span>&#123;</span><br><span class="line">    <span class="type">int</span> num = *<span class="built_in">static_cast</span>&lt;<span class="type">int</span>*&gt;(arg);</span><br><span class="line">    cout&lt;&lt;<span class="string">&quot;thread&quot;</span>&lt;&lt;<span class="built_in">to_string</span>(<span class="built_in">pthread_self</span>())&lt;&lt;<span class="string">&quot;working,number=&quot;</span>&lt;&lt;num&lt;&lt;endl;</span><br><span class="line">    <span class="built_in">sleep</span>(<span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="function">ThreadPool <span class="title">pool</span><span class="params">(<span class="number">3</span>,<span class="number">10</span>)</span></span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>;i &lt; <span class="number">100</span>;++i)&#123;</span><br><span class="line">        <span class="type">int</span>* num = <span class="keyword">new</span> <span class="built_in">int</span>(i + <span class="number">100</span>);</span><br><span class="line">        pool.<span class="built_in">addTask</span>(<span class="built_in">Task</span>(taskFunc,num));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">sleep</span>(<span class="number">10</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;&lt;img src=&quot;/../imgs/image-8.png&quot;&gt;&lt;/p&gt;
&lt;h2 id=&quot;ä»£ç &quot;&gt;&lt;a href=&quot;#ä»£ç &quot; class=&quot;headerlink&quot; title=&quot;ä»£ç &quot;&gt;&lt;/a&gt;ä»£ç &lt;/h2&gt;&lt;h3 id=&quot;ä»»åŠ¡ç»“æ„ä½“&quot;&gt;&lt;a href=&quot;#ä»»åŠ¡ç»“æ„ä½“&quot; c</summary>
      
    
    
    
    <category term="CPP" scheme="http://example.com/categories/CPP/"/>
    
    
    <category term="CPP" scheme="http://example.com/tags/CPP/"/>
    
  </entry>
  
  <entry>
    <title>Trieæ ‘</title>
    <link href="http://example.com/2022/09/10/Trie%E6%A0%91/"/>
    <id>http://example.com/2022/09/10/Trie%E6%A0%91/</id>
    <published>2022-09-09T23:33:02.000Z</published>
    <updated>2024-03-30T03:57:19.228Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>Trieæ ‘ï¼Œå³å­—å…¸æ ‘ï¼Œåˆç§°å•è¯æŸ¥æ‰¾æ ‘æˆ–é”®æ ‘ï¼Œæ˜¯ä¸€ç§æ ‘å½¢ç»“æ„ï¼Œæ˜¯ä¸€ç§å“ˆå¸Œæ ‘çš„å˜ç§ã€‚å…¸å‹åº”ç”¨æ˜¯ç”¨äºç»Ÿè®¡å’Œæ’åºå¤§é‡çš„å­—ç¬¦ä¸²ï¼ˆä½†ä¸ä»…é™äºå­—ç¬¦ä¸²ï¼‰ï¼Œæ‰€ä»¥ç»å¸¸è¢«æœç´¢å¼•æ“ç³»ç»Ÿç”¨äºæ–‡æœ¬è¯é¢‘ç»Ÿè®¡ã€‚å®ƒçš„ä¼˜ç‚¹æ˜¯ï¼šåˆ©ç”¨å­—ç¬¦ä¸²çš„å…¬å…±å‰ç¼€æ¥å‡å°‘æŸ¥è¯¢æ—¶é—´ï¼Œæœ€å¤§é™åº¦åœ°å‡å°‘æ— è°“çš„å­—ç¬¦ä¸²æ¯”è¾ƒã€‚</p></blockquote><p><strong>å‰ç¼€æ ‘çš„3ä¸ªåŸºæœ¬æ€§è´¨ï¼š</strong></p><ul><li>æ ¹èŠ‚ç‚¹ä¸åŒ…å«å­—ç¬¦ï¼Œé™¤æ ¹èŠ‚ç‚¹å¤–æ¯ä¸€ä¸ªèŠ‚ç‚¹éƒ½åªåŒ…å«ä¸€ä¸ªå­—ç¬¦ã€‚ </li><li>ä»æ ¹èŠ‚ç‚¹åˆ°æŸä¸€èŠ‚ç‚¹ï¼Œè·¯å¾„ä¸Šç»è¿‡çš„å­—ç¬¦è¿æ¥èµ·æ¥ï¼Œä¸ºè¯¥èŠ‚ç‚¹å¯¹åº”çš„å­—ç¬¦ä¸²ã€‚</li><li>æ¯ä¸ªèŠ‚ç‚¹çš„æ‰€æœ‰å­èŠ‚ç‚¹åŒ…å«çš„å­—ç¬¦éƒ½ä¸ç›¸åŒã€‚</li></ul><p><strong>æ—¶é—´å¤æ‚åº¦ï¼š</strong> $O(L)$, $L$æ˜¯å­—ç¬¦ä¸²çš„é•¿åº¦<br><strong>ç©ºé—´å¤æ‚åº¦ï¼š</strong>$O(n^2)$,æœ€å·®æƒ…å†µä¸‹æ¯ä¸ªå­—ç¬¦ä¸²éƒ½ä¸ç›¸åŒã€‚</p><p><a href="https://leetcode.cn/problems/implement-trie-prefix-tree/solution/by-lfool-k6hb/">leetcode208 å®ç°å‰ç¼€æ ‘</a></p><p><img src="/../imgs/image-9.png" alt="Alt text"></p><p><strong>å¦‚ä½•å»å®ç°ä¸€ä¸ªå‰ç¼€æ ‘ï¼Ÿ</strong></p><ul><li>æ¯ä¸ªç»“ç‚¹åŒ…å«çš„ä¸œè¥¿ï¼šè¯¥èŠ‚ç‚¹æ˜¯å¦æ˜¯æœ€åä¸€ä¸ªã€è¯¥èŠ‚ç‚¹çš„å­èŠ‚ç‚¹æœ‰å“ªäº›ã€‚<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">Node</span>&#123;</span><br><span class="line">    <span class="built_in">Node</span>():<span class="built_in">isEnd</span>(<span class="literal">false</span>)&#123;</span><br><span class="line">        child.<span class="built_in">resize</span>(<span class="number">26</span>);<span class="comment">//å°å†™å­—æ¯æœ€å¤šæœ‰26ä¸ª</span></span><br><span class="line">    &#125;;</span><br><span class="line">    ~<span class="built_in">Node</span>()&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">auto</span> ch : child)&#123;</span><br><span class="line">    <span class="keyword">if</span>(ch)<span class="keyword">delete</span> ch;</span><br><span class="line">    &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//æ ‡è®°å½“å‰ç»“ç‚¹æ˜¯å¦æ˜¯å­—ç¬¦ä¸²æœ€åä¸€ä½</span></span><br><span class="line">    <span class="type">bool</span> isEnd;</span><br><span class="line">    <span class="comment">//æœ‰å“ªäº›å­©å­èŠ‚ç‚¹</span></span><br><span class="line">    vector&lt;Node*&gt; child;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><strong>è¿™é‡Œä¸ºä»€ä¹ˆä¸ç”¨å­˜å‚¨å½“å‰ç»“ç‚¹ä»£è¡¨çš„å­—ç¬¦å‘¢ï¼Ÿ</strong><br>å› ä¸ºå½“æŸ¥åˆ°åˆ°å½“å‰èŠ‚ç‚¹æ—¶ï¼Œè¯´æ˜æŸ¥æ‰¾çš„è¿™ä¸ªä¸€ä¸ªå­—ç¬¦å·²ç»å­˜åœ¨ã€‚æ¢å¥è¯è¯´ï¼Œè¯¥èŠ‚ç‚¹çš„å­—ç¬¦å­˜å‚¨åœ¨çˆ¶èŠ‚ç‚¹ä¸­ã€‚</li></ul><p><strong>å®ç°åˆå§‹åŒ–ã€æŸ¥æ‰¾æŸä¸€ä¸ªå­—ç¬¦ä¸²æ˜¯å¦åœ¨è¯¥æ ‘ä¸­ã€æŸ¥æ‰¾æŸä¸€ä¸ªå‰ç¼€æ˜¯å¦åœ¨è¯¥æ ‘ä¸­ã€æ’å…¥ä¸€ä¸ªå­—ç¬¦ä¸²ã€‚</strong></p><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Trie</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">Trie</span>() &#123;</span><br><span class="line">        root = <span class="keyword">new</span> Node;</span><br><span class="line">    &#125;</span><br><span class="line">    ~<span class="built_in">Trie</span>()&#123;</span><br><span class="line">    <span class="keyword">delete</span> root;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//æ’å…¥å­—ç¬¦ä¸²</span></span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">insert</span><span class="params">(string word)</span> </span>&#123;</span><br><span class="line">        Node* p = root;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">auto</span> c : word)&#123;</span><br><span class="line">            <span class="keyword">if</span>(!p-&gt;child[c - <span class="string">&#x27;a&#x27;</span>])</span><br><span class="line">                p-&gt;child[c - <span class="string">&#x27;a&#x27;</span>] = <span class="keyword">new</span> Node;</span><br><span class="line">            p = p-&gt;child[c - <span class="string">&#x27;a&#x27;</span>];</span><br><span class="line">        &#125;</span><br><span class="line">        p-&gt;isEnd = <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//æŸ¥æ‰¾æŸä¸€ä¸ªå­—ç¬¦ä¸²æ˜¯å¦åœ¨è¯¥æ ‘ä¸­</span></span><br><span class="line">    <span class="function"><span class="type">bool</span> <span class="title">search</span><span class="params">(string word)</span> </span>&#123;</span><br><span class="line">        Node* p = root;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">auto</span> c : word)&#123;</span><br><span class="line">            <span class="keyword">if</span>(!p-&gt;child[c - <span class="string">&#x27;a&#x27;</span>])<span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">            p = p-&gt;child[c - <span class="string">&#x27;a&#x27;</span>];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> p-&gt;isEnd;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//æŸ¥æ‰¾æŸä¸€ä¸ªå‰ç¼€æ˜¯å¦åœ¨è¯¥æ ‘ä¸­</span></span><br><span class="line">    <span class="function"><span class="type">bool</span> <span class="title">startsWith</span><span class="params">(string prefix)</span> </span>&#123;</span><br><span class="line">        Node* p = root;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">auto</span> c : prefix)&#123;</span><br><span class="line">            <span class="keyword">if</span>(!p-&gt;child[c - <span class="string">&#x27;a&#x27;</span>])<span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">            p = p-&gt;child[c - <span class="string">&#x27;a&#x27;</span>];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    Node* root;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p><strong>æ³¨æ„å†…å­˜æ³„æ¼é—®é¢˜</strong></p><ul><li>åœ¨æ„é€ å‡½æ•°é‡Œæ„é€ æ–°çš„ç»“ç‚¹ï¼Œåœ¨ææ„å‡½æ•°ä¸­é‡Šæ”¾</li><li>å­©å­ç»“ç‚¹æ¯ä¸€ä¸ªéƒ½è¦é‡Šæ”¾</li></ul><p><code>vector&lt;Node*&gt; child</code>ï¼Œä¹Ÿå¯ä»¥ç”¨å“ˆå¸Œè¡¨æ›¿ä»£ï¼Œ<code>unordered_set&lt;Node*&gt;  child</code></p>]]></content>
    
    
      
      
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;Trieæ ‘ï¼Œå³å­—å…¸æ ‘ï¼Œåˆç§°å•è¯æŸ¥æ‰¾æ ‘æˆ–é”®æ ‘ï¼Œæ˜¯ä¸€ç§æ ‘å½¢ç»“æ„ï¼Œæ˜¯ä¸€ç§å“ˆå¸Œæ ‘çš„å˜ç§ã€‚å…¸å‹åº”ç”¨æ˜¯ç”¨äºç»Ÿè®¡å’Œæ’åºå¤§é‡çš„å­—ç¬¦ä¸²ï¼ˆä½†ä¸ä»…é™äºå­—ç¬¦ä¸²ï¼‰ï¼Œæ‰€ä»¥ç»å¸¸è¢«æœç´¢å¼•æ“ç³»ç»Ÿç”¨äºæ–‡æœ¬è¯é¢‘ç»Ÿè®¡ã€‚å®ƒçš„ä¼˜ç‚¹æ˜¯ï¼šåˆ©ç”¨å­—ç¬¦ä¸²çš„å…¬å…±å‰ç¼€æ¥å‡å°‘æŸ¥è¯¢æ—¶é—´ï¼Œæœ€å¤§é™åº¦åœ°å‡å°‘æ— è°“çš„å­—</summary>
      
    
    
    
    <category term="Algorithm" scheme="http://example.com/categories/Algorithm/"/>
    
    
    <category term="CPP" scheme="http://example.com/tags/CPP/"/>
    
  </entry>
  
</feed>
