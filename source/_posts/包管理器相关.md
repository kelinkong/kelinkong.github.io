---
title: 包管理器相关
date: 2024-09-30 11:14:49
tags: [architecture]
categories: [solutions]
---

## 前言
每次配置什么环境都是从网上找个教程，然后安装教程一步步走，遇到问题继续搜索，直到配置完成。

到现在已经接触到很多包管理器，比如 `npm`、`yarn`、`pip`、`brew`、`apt`、`yum`、`docker`、`composer` 等等。

于是想到，这些包管理器都是怎么实现的呢？它们之间有什么区别呢？

## 什么是包管理器

包管理器是一种工具，用于自动化管理软件包（libraries, dependencies）的下载、安装、更新和卸载。它帮助开发人员轻松处理项目所需的依赖项，确保不同的库和工具能够正确地协同工作。

如果不使用包管理器，那么就需要手动下载、安装、更新和卸载软件包，这样会导致很多问题，比如版本冲突、依赖关系、安装路径等等。

## 包管理器的包是从哪里来的呢？

包管理器的包通常存储在一个或多个远程仓库中，开发人员可以从这些仓库中下载所需的软件包。这些仓库通常由软件的开发者或维护者维护，确保软件包的安全性和可靠性。

有些包管理的仓库服务器在国外，下载速度可能会比较慢，所以有些国内的公司会搭建自己的镜像仓库，比如淘宝的 `npm` 镜像、阿里云的 `docker` 镜像等等。（这里涉及到更换源）

那么理论上来说，也可以在本地搭建一个仓库，然后使用包管理器从本地仓库下载软件包。

## 包管理器的作用

- 安装依赖项：根据项目的配置文件（如`package.json`、`pom.xml`等），自动下载并安装项目所需的依赖包。
- 版本管理：包管理器能够处理依赖包的版本，确保项目使用兼容的版本，避免版本冲突。
- 更新：可以检查并更新到某个包的最新版本，或者锁定在特定版本。
- 卸载：移除不再需要的依赖包。

## 包管理器的分类

### 1. 操作系统级别的包管理器

这些包管理器用于管理操作系统中的软件包和库，通常用于安装和管理操作系统级别的应用程序和工具。它们主要处理的是操作系统中的二进制文件或预编译的软件包
- APT (Advanced Package Tool)：Debian 和 Ubuntu 系统上常用的包管理器。
- YUM (Yellowdog Updater, Modified)：CentOS、RHEL 系统上的包管理器。
- brew：macOS 上的包管理器。
- Chocolatey：Windows 上的包管理器。

### 2. 编程语言级别的包管理器

这些包管理器用于管理编程语言中的软件包和库，通常用于安装和管理项目级别的依赖项。它们主要处理的是源代码或库文件，通常会下载源代码并编译安装。

- npm (Node Package Manager)：JavaScript 的包管理器，用于 Node.js 项目。
- yarn：JavaScript 的包管理器，用于 Node.js 项目。
- pip：Python 的包管理器。
- Maven：管理 Java 项目的依赖项和构建的工具。
- Gradle：更灵活的构建和依赖管理工具，适用于多种编程语言，包括 Java。

## 版本管理器

这里的版本管理器指conda、nvm、rbenv、pyenv等，它们用于管理不同版本的编程语言或工具。

- conda：Python 的版本管理器，用于创建和管理 Python 环境。
- nvm (Node Version Manager)：Node.js 的版本管理器，用于管理 Node.js 的不同版本。

在踩坑之前，我觉得conda、nvm都很麻烦，我使用一个版本的python就好了，为什么还需要去做多个版本管理？

但是在实际开发中，有一次是安装别的工具，这个工具自己下载了一个合适的python版本，并且将我默认的python版本改成了这个版本，导致我之前的项目无法运行，当时的解决方式是更换环境变量，但是这种手动的切换十分麻烦，所以版本管理器就显得很有必要了。

像node.js也是一样，不同的版本就会出现各种问题，所以本地配置往往需要很多个版本去适应不同的项目。

> 使用 `pip` 在不同的 `Python` 版本（如 Python 3.10 和 Python 3.11）下安装包时，包不能直接在另一个版本下使用，因为每个 `Python` 版本有自己独立的环境和库安装路径。切换 `Python` 版本后，之前为另一个版本安装的包不会自动可用。
> 
> 正确的做法是为每个 `Python` 项目指定一个独立的虚拟环境。这样可以确保每个项目拥有独立的依赖项，避免不同项目之间产生冲突或兼容性问题。虚拟环境允许隔离项目的 `Python` 版本和包管理，使得每个项目可以使用其特定的 `Python` 版本和依赖库。

## 其他

**CMake算是一个包管理器吗？**

我们都知道Cmake的功能是用于管理项目的构建过程，它可以生成Makefile、Visual Studio项目文件等，但是它并不是一个包管理器，它只是一个构建工具。

**CMake并不能自动下载和安装依赖项，需要提前安装好，并且在CMakeLists.txt 中指定依赖项**

那么，C++是如何做包管理的呢？（程序员手动管理哈哈）

C++没有像Java、Python、JavaScript那样有一个统一的包管理器，不过有一些第三方的包管理器，比如：
- Conan：C++ 的包管理器，用于管理 C++ 项目的依赖项。
- vcpkg：微软开发的 C++ 包管理器，用于管理 C++ 项目的依赖项。

